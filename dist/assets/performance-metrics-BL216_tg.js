import{R as a}from"./react-vendor-EfHycc-t.js";import{I as e}from"./icons-BXW-tQdz.js";import{m as t,l as s}from"./trade-analytics-D1XTklIQ.js";import{n,v as o,K as i,a as r}from"./index-CCg2rRgv.js";import{u as c,a as l}from"./use-accounting-calculations-2iOnH437.js";import{M as d}from"./MobileTooltip-JywXozpF.js";import{j as p,i as m}from"./ui-framework-nn7D7dv2.js";import{motion as x,AnimatePresence as _}from"./animations-DTB6hMKs.js";import"./database-Ch4ty5VL.js";const f=a.memo(({label:n,value:o,change:i,tooltip:r,isPositive:c,isNegative:l,isPercentage:f,isEditing:g,onValueChange:h,index:j=0})=>{const[u,y]=a.useState(o.toString()),v=a.useRef(null);a.useEffect(()=>{g&&v.current&&v.current.focus()},[g]);return p.jsxs(x.div,{className:"flex flex-col bg-content2/40 p-2 rounded-lg will-change-transform",variants:t,initial:"initial",animate:"animate",whileHover:"hover",custom:j,transition:{delay:.1*j},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:div:56:4",children:[p.jsxs(x.div,{className:"flex items-center gap-1 text-default-600 text-xs font-medium mb-0.5 will-change-transform",variants:s,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:div:65:6",children:[n,r&&p.jsx(d,{content:r,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:MobileTooltip:71:10",children:p.jsx(x.span,{whileHover:{scale:1.2},whileTap:{scale:.9},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:span:72:12",children:p.jsx(e,{icon:"lucide:info",className:"w-3.5 h-3.5 text-default-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:Icon:76:14"})})})]}),p.jsxs(x.div,{className:"flex items-end gap-2",variants:s,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:div:81:6",children:[p.jsx(_,{mode:"wait","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:AnimatePresence:85:8",children:g?p.jsx(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:div:87:12",children:p.jsx(m,{ref:v,type:"text",value:u,onValueChange:y,onBlur:()=>{h&&h(u)},size:"sm",variant:"bordered",className:"max-w-[100px]",classNames:{input:"text-right font-semibold text-base",inputWrapper:"h-7 min-h-unit-7"},endContent:f&&p.jsx("span",{className:"text-default-400 text-sm","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:span:106:44",children:"%"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:Input:93:14"})}):p.jsx(x.span,{className:"text-lg font-semibold tracking-tight",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:span:110:12",children:f?`${o}%`:o})}),void 0!==i&&p.jsxs(x.span,{className:`text-sm ${c?"text-success":l?"text-danger":"text-default-500"} flex items-center font-medium`,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.2},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:span:122:10",children:[c&&p.jsx(x.span,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,delay:.3},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:span:129:14",children:p.jsx(e,{icon:"lucide:trending-up",className:"w-3 h-3 mr-0.5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:Icon:134:16"})}),l&&p.jsx(x.span,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,delay:.3},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:span:138:14",children:p.jsx(e,{icon:"lucide:trending-down",className:"w-3 h-3 mr-0.5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:Icon:143:16"})}),f?`${i}%`:i]})]})]})}),g=({trades:e,isEditing:t=!1})=>{const{accountingMethod:s}=n(),d="cash"===s,{filter:m}=o(),_=a.useMemo(()=>"all"===m.type?e:e.filter(a=>i(a,m,d)),[e,m,d]);r(_);const{totalTrades:g,winRate:h,avgPosMove:j,avgNegMove:u,avgPositionSize:y,avgHoldingDays:v,avgR:w,planFollowed:C,openPositions:k}=c(_);let z;if(l(),d){const a=_.filter(a=>"Open"===a.positionStatus||"Partial"===a.positionStatus).flatMap(a=>Array.isArray(a._expandedTrades)&&a._expandedTrades.length>0?a._expandedTrades.filter(a=>"Open"===a.positionStatus||"Partial"===a.positionStatus):[a]),e=new Map;a.forEach(a=>{const t=a.id.split("_exit_")[0];e.has(t)||e.set(t,[]),e.get(t).push(a)}),z=Array.from(e.entries()).map(([a,e])=>e[0])}else z=_.filter(a=>"Open"===a.positionStatus||"Partial"===a.positionStatus);const D=100-z.reduce((a,e)=>a+("Partial"===e.positionStatus?(e.allocation||0)*(e.openQty||0)/((e.openQty||0)+(e.exitedQty||0)):e.allocation||0),0);return p.jsx("div",{className:"space-y-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:div:222:4",children:p.jsxs(x.div,{className:"grid grid-cols-2 gap-4",initial:"initial",animate:"animate",variants:{animate:{transition:{staggerChildren:.05}}},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:div:224:6",children:[p.jsx(f,{label:"Total Trades",value:g,isEditing:t,index:0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:Metric:236:6"}),p.jsx(f,{label:"Win Rate",value:h.toFixed(2),isPositive:!0,isPercentage:!0,tooltip:"Percentage of profitable trades",isEditing:t,index:1,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:Metric:242:6"}),p.jsx(f,{label:"Avg + Move",value:j.toFixed(2),isPercentage:!0,tooltip:"Average percentage gain on winning trades",isEditing:t,index:2,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:Metric:251:6"}),p.jsx(f,{label:"Avg - Move",value:u.toFixed(2),isPercentage:!0,tooltip:"Average percentage loss on losing trades",isEditing:t,index:3,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:Metric:259:6"}),p.jsx(f,{label:"Avg Position Size",value:y.toFixed(2),isPercentage:!0,tooltip:"Average position size as percentage of portfolio",isEditing:t,index:4,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:Metric:267:6"}),p.jsx(f,{label:"Avg Holding Days",value:v.toFixed(2),tooltip:"Average number of days positions are held",isEditing:t,index:5,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:Metric:275:6"}),p.jsx(f,{label:"Plan Followed",value:C.toFixed(2),isPercentage:!0,tooltip:"Percentage of trades that followed the trading plan",isEditing:t,index:6,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:Metric:282:6"}),p.jsx(f,{label:"Avg R",value:w.toFixed(2),tooltip:"Average reward-to-risk ratio across all trades",isEditing:t,index:7,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:Metric:290:6"}),p.jsx(f,{label:"Open Positions",value:k,tooltip:"Number of currently open positions",isEditing:t,index:8,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:Metric:297:6"}),p.jsx(f,{label:"Cash",value:D.toFixed(2),isPercentage:!0,tooltip:"Percentage of portfolio in cash (approximate)",isEditing:t,index:9,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\performance-metrics.tsx:Metric:304:6"})]})})};export{g as PerformanceMetrics};
//# sourceMappingURL=performance-metrics-BL216_tg.js.map
