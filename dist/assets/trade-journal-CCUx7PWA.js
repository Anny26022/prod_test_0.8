const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CCg2rRgv.js","assets/react-vendor-EfHycc-t.js","assets/ui-framework-nn7D7dv2.js","assets/animations-DTB6hMKs.js","assets/icons-BXW-tQdz.js","assets/database-Ch4ty5VL.js","assets/index-DKEsi9y-.css","assets/chartImageService-D0un2IL8.js","assets/formatters-jc31xfU0.js","assets/data-utils-DC7zLTCj.js"])))=>i.map(i=>d[i]);
import{j as e,t,f as a,h as s,k as r,l as o,n,E as d,i,m as l,a as c,b as p,d as m,e as u,o as x,p as h,_,g as j,F as w,G as y,I as g,q as f,v,w as k,x as C,y as b,z as D,J as U,A as z,B as N,C as S,D as I,K as T,r as P,L as M,M as E,N as A,O as F}from"./ui-framework-nn7D7dv2.js";import{r as $,R}from"./react-vendor-EfHycc-t.js";import{I as Q}from"./icons-BXW-tQdz.js";import{C as O,v as L,a as q,f as V,g as B,b as H,s as Y,c as W}from"./chartImageService-D0un2IL8.js";import{u as K}from"./virtualization-XEk1mQjT.js";import{i as G,a as J,r as Z,u as X,w as ee}from"./data-utils-DC7zLTCj.js";import{AnimatePresence as te,motion as ae}from"./animations-DTB6hMKs.js";import{S as se,u as re,a as oe,c as ne,b as de,d as ie,e as le,f as ce,g as pe,h as me,i as ue,j as xe,k as he,l as _e,m as je,n as we,o as ye,p as ge,q as fe,r as ve,s as ke}from"./index-CCg2rRgv.js";import{P as Ce,f as be,a as De}from"./formatters-jc31xfU0.js";import{u as Ue}from"./use-accounting-calculations-2iOnH437.js";import{M as ze}from"./MobileTooltip-JywXozpF.js";import"./database-Ch4ty5VL.js";const Ne=()=>{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate());return t.setHours(9,8,0,0),t},Se=()=>{const e=new Date,t=e.getDay();if(0===t||6===t)return!1;const a=e.getHours(),s=e.getMinutes();return!(a<9||9===a&&s<8)&&!(a>15||15===a&&s>30)};let Ie=null,Te=null;const Pe=()=>new Date((new Date).getTime()+198e5),Me=e=>{const t=Pe();for(;0===t.getDay()||6===t.getDay();)t.setDate(t.getDate()-1);return t},Ee=()=>{const e=Pe().getDay();return 0===e||6===e},Ae=()=>{const e=Pe(),t=e.getDay(),a=e.getHours(),s=e.getMinutes();return 0!==t&&6!==t&&(a<9||9===a&&s<15)},Fe=()=>{const e=Pe(),t=new Date(e);for(t.setDate(e.getDate()-1);0===t.getDay()||6===t.getDay();)t.setDate(t.getDate()-1);return t},$e=async(e,t,a,s)=>(async(e,t=3,a=1e3)=>{let s;for(let o=0;o<=t;o++)try{return await e()}catch(r){if(s=r,o===t)break;const e=a*Math.pow(2,o);await new Promise(t=>setTimeout(t,e))}throw s})(async()=>{const r=Pe(),o=Ee(),n=Ae();let d,i,l;if(!o||t||a)if(!n||t||a)t||a?(l=s||"1m",d=t||Ne(),i=a||new Date):(l=s||"1m",d=Ne(),i=new Date);else{l=s||"1m";const e=Fe();d=new Date(e),d.setHours(9,15,59,0),i=new Date(e),i.setHours(23,59,59,999)}else{l=s||"1d";const e=Me();i=new Date(e),i.setHours(23,59,59,999),d=new Date(e),d.setDate(d.getDate()-45),d.setHours(9,15,59,0)}const c=e=>{const t=e=>e.toString().padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}T${t(e.getHours())}%3A${t(e.getMinutes())}%3A${t(e.getSeconds())}%2B05%3A30`},p=`https://api-v2.strike.money/v2/api/equity/priceticks?candleInterval=${l}&from=${c(d)}&to=${c(i)}&securities=${`EQ%3A${e.toUpperCase()}`}`,m=await fetch(p,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36","Accept-Language":"en-US,en;q=0.9","Accept-Encoding":"gzip, deflate, br",Connection:"keep-alive","Upgrade-Insecure-Requests":"1","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"cross-site"},mode:"cors",cache:"no-cache",credentials:"omit",signal:AbortSignal.timeout(15e3)});if(!m.ok){const e=await m.text(),t=`API request failed with status ${m.status}: ${e}`;throw new Error(t)}const u=await m.json();if(G(r)&&r>(()=>{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate());return t.setHours(15,30,0,0),t})()){const t=u.data.ticks[e];if(t&&t.length>0){const e=t[t.length-1];e&&e[4]&&(Ie=e[4],Te=new Date(r),"undefined"!=typeof window&&(localStorage.setItem("fridayClosePrice",Ie.toString()),localStorage.setItem("lastFridayDate",Te.toISOString())))}}return u},3,1e3),Re=async(e,t,a,s)=>{const r=["https://api-prod-v21.strike.money","https://api.strike.money"];let o;for(const d of r)try{Pe();const r=Ee(),o=Ae();let n,i,l;if(!r||t||a)if(!o||t||a)t||a?(l=s||"1m",n=t||Ne(),i=a||new Date):(l=s||"1m",n=Ne(),i=new Date);else{l=s||"1m";const e=Fe();n=new Date(e),n.setHours(9,15,59,0),i=new Date(e),i.setHours(23,59,59,999)}else{l=s||"1d";const e=Me();i=new Date(e),i.setHours(23,59,59,999),n=new Date(e),n.setDate(n.getDate()-45),n.setHours(9,15,59,0)}const c=e=>{const t=e=>e.toString().padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}T${t(e.getHours())}%3A${t(e.getMinutes())}%3A${t(e.getSeconds())}%2B05%3A30`},p=c(n),m=c(i),u=`${d}/v2/api/equity/priceticks?candleInterval=${l}&from=${p}&to=${m}&securities=${`EQ%3A${e.toUpperCase()}`}`,x=await fetch(u,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"},mode:"cors",cache:"no-cache",signal:AbortSignal.timeout(1e4)});if(x.ok){return await x.json()}throw new Error(`HTTP ${x.status}: ${x.statusText}`)}catch(n){o=n;continue}throw o||new Error("All API endpoints failed")},Qe=async(e,t,a,s)=>{if((()=>{const e=Pe(),t=e.getDay(),a=e.getHours(),s=e.getMinutes();return 0!==t&&6!==t&&(a>3&&a<9||3===a&&s>=55||9===a&&s<15)})())try{return await Oe(e)}catch(r){try{return await $e(e,t,a,s)}catch(o){return await Re(e,t,a,s)}}else try{return await $e(e,t,a,s)}catch(o){try{return await Re(e,t,a,s)}catch(n){return await Oe(e)}}},Oe=async e=>{var t,a;const s=Pe(),r=new Date(s),o=Ee()?Me():r;o.setHours(23,59,59,999);const n=new Date(o);n.setFullYear(n.getFullYear()-1),n.setMonth(11),n.setDate(4),n.setHours(9,15,59,0);const d=e=>{const t=e=>e.toString().padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}T${t(e.getHours())}%3A${t(e.getMinutes())}%3A${t(e.getSeconds())}%2B05%3A30`},i=`https://api-v2.strike.money/v2/api/equity/priceticks?candleInterval=1d&from=${d(n)}&to=${d(o)}&securities=${`EQ%3A${e.toUpperCase()}`}`;try{const s=await fetch(i,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36","Accept-Language":"en-US,en;q=0.9","Accept-Encoding":"gzip, deflate, br",Connection:"keep-alive","Upgrade-Insecure-Requests":"1","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"cross-site"},mode:"cors",cache:"no-cache",credentials:"omit",signal:AbortSignal.timeout(2e4)});if(!s.ok){const e=await s.text();throw new Error(`Historical fallback failed with status ${s.status}: ${e}`)}const r=await s.json(),o=null==(a=null==(t=r.data)?void 0:t.ticks)?void 0:a[e.toUpperCase()];if(!o||0===o.length)throw new Error(`No historical data available for ${e}`);return r}catch(l){throw l}},Le=({tradeId:l,imageType:c,currentImage:p,onImageUploaded:m,onImageDeleted:u,disabled:x=!1,compact:h=!1,suggestedUploadMethod:_,allowTemporary:j=!0})=>{const[w,y]=$.useState(!1),[g,f]=$.useState(0),[v,k]=$.useState(!1),[C,b]=$.useState(null),[D,U]=$.useState(null),[z,N]=$.useState(()=>_||"file"),[S,I]=$.useState(""),T=$.useRef(null),P="beforeEntry"===c?"Before Entry Chart":"After Exit Chart",M="beforeEntry"===c?"lucide:trending-up":"lucide:trending-down",E=$.useCallback(async e=>{if(e.dataUrl)return e;if(e.isTemporary)return console.warn(`⚠️ [ENSURE_DATAURL] Temporary chart missing dataUrl: ${e.filename}`),e;const t=await O.getChartImageDataUrl(e);return{...e,dataUrl:t||void 0}},[]);R.useEffect(()=>{_&&!p&&N(_)},[_,p,c]),R.useEffect(()=>{p?(console.log(`🔍 [PREVIEW] Processing currentImage for ${c}:`,{filename:p.filename,hasDataUrl:!!p.dataUrl,isTemporary:!!p.isTemporary,storage:p.storage}),p.dataUrl?(U(p.dataUrl),console.log(`📷 [PREVIEW] Using dataUrl for ${c}:`,p.filename)):p.isTemporary?(U(null),b("Temporary chart image missing preview data"),console.warn(`⚠️ [PREVIEW] Temporary image missing dataUrl for ${c}:`,p.filename)):(console.log(`🔍 [PREVIEW] Fetching from service for ${c}:`,p.filename),b(null),O.getChartImageDataUrl(p).then(e=>{e?setTimeout(()=>{U(e),console.log(`✅ [PREVIEW] Successfully loaded from service for ${c}`)},100):(U(null),b("Failed to load image from cloud storage"),console.error(`❌ [PREVIEW] Failed to load from service for ${c}`))}).catch(e=>{U(null),b("Failed to load image preview"),console.error(`❌ [PREVIEW] Error loading from service for ${c}:`,e)}))):U(null)},[p,c]),R.useEffect(()=>()=>{D&&D.startsWith("blob:")&&URL.revokeObjectURL(D)},[D]);const A=$.useCallback(e=>{try{const t=new URL(e);return t.hostname.includes("tradingview.com")||t.hostname.includes("chartimg.com")||e.includes("tradingview")||e.includes("chart")}catch{return!1}},[]),F=$.useCallback(e=>{if(e.includes("s3.tradingview.com/snapshots/"))return e;if(e.includes(".png")||e.includes(".jpg")||e.includes(".jpeg")||e.includes(".webp"))return e;let t=null;const a=e.match(/tradingview\.com\/x\/([a-zA-Z0-9]+)\/?/);if(a&&(t=a[1]),!t){const a=e.match(/tradingview\.com\/chart\/[^\/]+\/([a-zA-Z0-9]+)\/?/);a&&(t=a[1])}if(!t){const a=e.match(/[?&]snapshot[_-]?id=([a-zA-Z0-9]+)/i);a&&(t=a[1])}if(!t){const a=e.match(/[a-zA-Z0-9]{8,}/g);a&&(t=a[a.length-1])}if(t&&t.length>=8){return`https://s3.tradingview.com/snapshots/${t.charAt(0).toLowerCase()}/${t}.png`}if(e.includes("tradingview.com/widgetembed/")){const t=e.match(/symbol=([^&]+)/);if(t)return`https://www.tradingview.com/chart/?symbol=${t[1]}`}const s=e.includes("?")?"&":"?";return`${e}${s}format=image&width=1200&height=600`},[]),H=$.useCallback(async()=>{if(!x&&S.trim()){b(null),y(!0),f(0);try{if(!A(S))return void b("Please enter a valid TradingView chart URL");const e=F(S),t=setInterval(()=>{f(e=>Math.min(e+10,80))},100),a=await fetch(e,{mode:"cors",headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"}});if(!a.ok)throw new Error(`Failed to download image: ${a.status} ${a.statusText}`);const s=await a.blob(),r=`tradingview-${c}-${Date.now()}.png`,o=new File([s],r,{type:s.type||"image/png"});clearInterval(t),f(90),console.log("🔍 [URL_UPLOAD] Chart upload parameters:",{tradeId:l,imageType:c,fileName:o.name,allowTemporary:j,shouldCompress:!0});const n=await O.attachChartImage(l,c,o,!0,j);if(f(100),n.success&&n.chartImage){const e=await E(n.chartImage);n.isTemporary&&(e.isTemporary=!0),m(e,"url"),I("")}else b(n.error||"Upload failed")}catch(e){b(e instanceof Error?e.message:"Failed to download from URL"),console.error("❌ TradingView URL upload error:",{message:e instanceof Error?e.message:"Unknown error",name:e instanceof Error?e.name:"Error"})}finally{y(!1),f(0)}}},[l,c,m,x,P,S,A,F,E]),Y=$.useCallback(async e=>{if(!x){b(null),y(!0),f(0);try{const t=L(e);if(!t.isValid)return void b(t.error||"Invalid file");t.warnings&&t.warnings.length>0&&console.warn("File upload warnings:",t.warnings);const a=setInterval(()=>{f(e=>Math.min(e+10,90))},100);console.log("🔍 [UPLOAD] Chart upload parameters:",{tradeId:l,imageType:c,fileName:e.name,allowTemporary:j,shouldCompress:!0});const s=await O.attachChartImage(l,c,e,!0,j);if(clearInterval(a),f(100),s.success&&s.chartImage){const e=await E(s.chartImage);s.isTemporary&&(e.isTemporary=!0),m(e,"file"),console.log(`✅ ${P} uploaded successfully${s.isTemporary?" (temporary)":""}`)}else b(s.error||"Upload failed")}catch(t){b(t instanceof Error?t.message:"Upload failed"),console.error("❌ Chart image upload error:",{message:t instanceof Error?t.message:"Unknown error",name:t instanceof Error?t.name:"Error"})}finally{y(!1),f(0)}}},[l,c,m,x,P,E]),W=$.useCallback(e=>{var t;const a=null==(t=e.target.files)?void 0:t[0];a&&Y(a),e.target.value=""},[Y]),K=$.useCallback(e=>{e.preventDefault(),k(!1);const t=e.dataTransfer.files[0];t&&Y(t)},[Y]),G=$.useCallback(e=>{e.preventDefault(),k(!0)},[]),J=$.useCallback(e=>{e.preventDefault(),k(!1)},[]),Z=$.useCallback(async()=>{if(p&&!x)try{await O.deleteChartImage(l,c,p)?u():b("Failed to delete image")}catch(e){b(e instanceof Error?e.message:"Delete failed")}},[p,l,c,u,x,P]),X=$.useCallback(()=>{var e;x||null==(e=T.current)||e.click()},[x]);return h&&!p?e.jsx(t,{content:`Upload ${P}`,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:Tooltip:431:6",children:e.jsxs(a,{isIconOnly:!0,variant:"light",size:"sm",onPress:X,isDisabled:x,className:"text-gray-500 hover:text-primary-500","aria-label":`Upload ${P}`,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:Button:432:8",children:[e.jsx(Q,{icon:M,className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:Icon:441:10"}),e.jsx("input",{ref:T,type:"file",accept:q.ALLOWED_TYPES.join(","),onChange:W,className:"hidden","aria-label":`Upload ${P} chart image file`,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:input:442:10"})]})}):e.jsx(s,{className:"w-full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:Card:456:4",children:e.jsxs(r,{className:"p-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:CardBody:457:6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:div:458:8",children:[e.jsxs("div",{className:"flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:div:459:10",children:[e.jsx(Q,{icon:M,className:"w-4 h-4 text-primary-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:Icon:460:12"}),e.jsx("span",{className:"text-sm font-medium","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:span:461:12",children:P})]}),p&&e.jsxs("div",{className:"flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:div:464:12",children:[e.jsxs("div",{className:"text-right","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:div:465:14",children:[e.jsx("div",{className:"text-xs text-gray-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:div:466:16",children:V(p.size)}),(()=>{const t=B(p);return t.isCompressed&&t.compressionText?e.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400 flex items-center gap-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:div:473:22",children:[e.jsx(Q,{icon:"lucide:zap",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:Icon:474:24"}),t.compressionText]}):null})()]}),e.jsx(a,{isIconOnly:!0,variant:"light",size:"sm",onPress:Z,isDisabled:x,className:"text-danger-500 hover:text-danger-600","aria-label":`Delete ${P}`,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:Button:482:14",children:e.jsx(Q,{icon:"lucide:trash-2",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:Icon:491:16"})})]})]}),e.jsx(te,{mode:"wait","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:AnimatePresence:497:8",children:p&&D?e.jsxs(ae.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative group","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:div:499:12",children:[e.jsx("img",{src:D,alt:P,className:"w-full h-32 object-cover rounded-lg border border-gray-200 dark:border-gray-700",onError:()=>{b("Failed to load image preview")},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:img:506:14"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:div:514:14",children:e.jsx(a,{isIconOnly:!0,variant:"flat",size:"sm",onPress:()=>{N("file"),X()},isDisabled:x,className:"w-6 h-6 min-w-6 rounded-md bg-black/90 hover:bg-black text-white border-0 shadow-sm hover:shadow-md transition-all duration-200 disabled:opacity-50","aria-label":"Replace chart image","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:Button:515:16",children:e.jsx(Q,{icon:"lucide:upload",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:Icon:527:18"})})})]},"preview"):e.jsxs(ae.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"space-y-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:div:532:12",children:[_&&"afterExit"===c&&e.jsx("div",{className:"mb-2 p-2 bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:div:541:16",children:e.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400 flex items-center gap-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:p:542:18",children:[e.jsx(Q,{icon:"lucide:info",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:Icon:543:20"}),"Auto-selected ","url"===_?"TradingView URL":"file upload",' method to match your "Before Entry" chart']})}),e.jsxs(o,{selectedKey:z,onSelectionChange:e=>N(e),size:"sm",variant:"underlined",classNames:{tabList:"gap-6 w-full relative rounded-none p-0 border-b border-divider",cursor:"w-full bg-primary-500",tab:"max-w-fit px-0 h-12",tabContent:"group-data-[selected=true]:text-primary-500"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:Tabs:548:14",children:[e.jsx(n,{title:e.jsxs("div",{className:"flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:div:563:20",children:[e.jsx(Q,{icon:"lucide:upload",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:Icon:564:22"}),e.jsx("span",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:span:565:22",children:"Upload File"})]}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:Tab:560:16"},"file"),e.jsx(n,{title:e.jsxs("div",{className:"flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:div:572:20",children:[e.jsx(Q,{icon:"lucide:link",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:Icon:573:22"}),e.jsx("span",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:span:574:22",children:"TradingView URL"})]}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:Tab:569:16"},"url")]}),"file"===z?e.jsx("div",{className:`\n                    border-2 border-dashed rounded-lg p-6 text-center transition-colors cursor-pointer\n                    ${v?"border-primary-500 bg-primary-50 dark:bg-primary-950":"border-gray-300 dark:border-gray-600 hover:border-primary-400"}\n                    ${x?"opacity-50 cursor-not-allowed":""}\n                  `,onDrop:K,onDragOver:G,onDragLeave:J,onClick:X,role:"button",tabIndex:0,"aria-label":`Upload ${P} by dropping file or clicking`,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),X())},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:div:582:16",children:w?e.jsxs("div",{className:"space-y-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:div:606:20",children:[e.jsx(Q,{icon:"lucide:upload-cloud",className:"w-8 h-8 mx-auto text-primary-500 animate-pulse","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:Icon:607:22"}),e.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:div:608:22",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:p:609:24",children:"Uploading..."}),e.jsx(d,{value:g,className:"mt-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:Progress:610:24"})]})]}):e.jsxs("div",{className:"space-y-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:div:614:20",children:[e.jsx(Q,{icon:"lucide:image-plus",className:"w-8 h-8 mx-auto text-gray-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:Icon:615:22"}),e.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:div:616:22",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:p:617:24",children:"Drop image here or click to upload"}),e.jsxs("p",{className:"text-xs text-gray-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:p:620:24",children:["PNG, JPG, WebP up to ",V(q.MAX_FILE_SIZE)]})]})]})}):e.jsxs("div",{className:"space-y-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:div:628:16",children:[e.jsx("div",{className:"space-y-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:div:629:18",children:e.jsx(i,{label:"TradingView Chart URL",placeholder:"https://www.tradingview.com/chart/...",value:S,onValueChange:I,variant:"bordered",startContent:e.jsx(Q,{icon:"lucide:link",className:"w-4 h-4 text-gray-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:Icon:636:36"}),isDisabled:x||w,description:"Paste your TradingView chart link here","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:Input:630:20"})}),w?e.jsxs("div",{className:"space-y-3 text-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:div:643:20",children:[e.jsx(Q,{icon:"lucide:download",className:"w-8 h-8 mx-auto text-primary-500 animate-pulse","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:Icon:644:22"}),e.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:div:645:22",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:p:646:24",children:"Downloading from TradingView..."}),e.jsx(d,{value:g,className:"mt-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:Progress:647:24"})]})]}):e.jsx("div",{className:"flex justify-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:div:651:20",children:e.jsx(a,{isIconOnly:!0,variant:"flat",size:"sm",onPress:H,isDisabled:x||!S.trim(),className:"w-6 h-6 min-w-6 rounded-lg bg-black/90 hover:bg-black text-white border-0 shadow-md hover:shadow-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Upload chart from URL","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:Button:652:22",children:e.jsx(Q,{icon:"lucide:upload",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:Icon:661:24"})})})]})]},"upload")}),C&&e.jsx(ae.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-3 p-2 bg-danger-50 dark:bg-danger-950 border border-danger-200 dark:border-danger-800 rounded-lg","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:div:672:10",children:e.jsx("p",{className:"text-sm text-danger-600 dark:text-danger-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:p:677:12",children:C})}),e.jsx("input",{ref:T,type:"file",accept:q.ALLOWED_TYPES.join(","),onChange:W,className:"hidden","aria-label":`Upload ${P} chart image file`,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageUpload.tsx:input:683:8"})]})})},qe=({isOpen:s,onOpenChange:r,chartImage:o,title:n="Chart Image"})=>{const[d,i]=$.useState(null),[x,h]=$.useState(!1),[_,j]=$.useState(null),[w,y]=$.useState(1),[g,f]=$.useState({x:0,y:0}),[v,k]=$.useState(!1),[C,b]=$.useState({x:0,y:0});$.useEffect(()=>{s&&o?(h(!0),j(null),console.log("🔍 [CHART_VIEWER] Loading chart image:",{filename:o.filename,hasDataUrl:!!o.dataUrl,isTemporary:!!o.isTemporary,storage:o.storage}),o.dataUrl?(i(o.dataUrl),h(!1),console.log("📷 [CHART_VIEWER] Using existing dataUrl for:",o.filename)):o.isTemporary?(j("Temporary chart image missing preview data"),h(!1),console.warn("⚠️ [CHART_VIEWER] Temporary image missing dataUrl:",o.filename)):(console.log("🔍 [CHART_VIEWER] Fetching from service:",o.filename),O.getChartImageDataUrl(o).then(e=>{i(e),h(!1),console.log("✅ [CHART_VIEWER] Successfully loaded from service")}).catch(e=>{j("Failed to load image"),h(!1),console.error("❌ [CHART_VIEWER] Failed to load chart image:",e)}))):(i(null),y(1),f({x:0,y:0}))},[s,o]),$.useEffect(()=>()=>{d&&d.startsWith("blob:")&&URL.revokeObjectURL(d)},[d]);const D=()=>{y(e=>Math.min(1.5*e,5))},U=()=>{y(e=>Math.max(e/1.5,.5))},z=()=>{y(1),f({x:0,y:0})},N=e=>{w>1&&(k(!0),b({x:e.clientX-g.x,y:e.clientY-g.y}))},S=e=>{v&&w>1&&f({x:e.clientX-C.x,y:e.clientY-C.y})},I=()=>{k(!1)},T=R.useCallback(e=>{if(0!==e.deltaY){e.preventDefault();const t=e.deltaY>0?.9:1.1;y(e=>Math.max(.5,Math.min(5,e*t)))}},[]),P=R.useRef(null);R.useEffect(()=>{const e=P.current;if(e)return e.addEventListener("wheel",T,{passive:!1}),()=>{e.removeEventListener("wheel",T)}},[T]);const M=()=>{if(d&&o){const e=document.createElement("a");e.href=d,e.download=o.filename,document.body.appendChild(e),e.click(),document.body.removeChild(e)}};return e.jsx(l,{isOpen:s,onOpenChange:r,size:"5xl",backdrop:"blur",classNames:{base:"bg-white/95 dark:bg-gray-900/95",backdrop:"bg-black/50"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:Modal:154:4",children:e.jsx(c,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:ModalContent:164:6",children:s=>e.jsxs(e.Fragment,{children:[e.jsxs(p,{className:"flex justify-between items-center border-b border-gray-200 dark:border-gray-700","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:ModalHeader:167:12",children:[e.jsxs("div",{className:"flex items-center gap-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:div:168:14",children:[e.jsx(Q,{icon:"lucide:image",className:"w-5 h-5 text-primary-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:Icon:169:16"}),e.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:div:170:16",children:[e.jsx("h3",{className:"text-lg font-semibold","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:h3:171:18",children:n}),o&&e.jsxs("p",{className:"text-sm text-gray-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:p:173:20",children:[o.filename," • ",V(o.size),o.compressed&&" • Compressed"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:div:181:14",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-800 rounded-lg p-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:div:183:16",children:[e.jsx(t,{content:"Zoom Out","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:Tooltip:184:18",children:e.jsx(a,{isIconOnly:!0,variant:"light",size:"sm",onPress:U,isDisabled:w<=.5,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:Button:185:20",children:e.jsx(Q,{icon:"lucide:zoom-out",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:Icon:192:22"})})}),e.jsxs("span",{className:"text-sm font-mono px-2 min-w-[60px] text-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:span:196:18",children:[Math.round(100*w),"%"]}),e.jsx(t,{content:"Zoom In","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:Tooltip:200:18",children:e.jsx(a,{isIconOnly:!0,variant:"light",size:"sm",onPress:D,isDisabled:w>=5,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:Button:201:20",children:e.jsx(Q,{icon:"lucide:zoom-in",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:Icon:208:22"})})}),e.jsx(t,{content:"Reset Zoom","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:Tooltip:212:18",children:e.jsx(a,{isIconOnly:!0,variant:"light",size:"sm",onPress:z,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:Button:213:20",children:e.jsx(Q,{icon:"lucide:maximize",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:Icon:219:22"})})})]}),e.jsx(t,{content:"Download Image","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:Tooltip:225:16",children:e.jsx(a,{isIconOnly:!0,variant:"light",size:"sm",onPress:M,isDisabled:!d,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:Button:226:18",children:e.jsx(Q,{icon:"lucide:download",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:Icon:233:20"})})})]})]}),e.jsx(m,{className:"p-0 overflow-hidden","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:ModalBody:239:12",children:e.jsx("div",{ref:P,className:"relative w-full h-[70vh] bg-gray-50 dark:bg-gray-900 overflow-hidden","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:div:240:14",children:e.jsx(te,{mode:"wait","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:AnimatePresence:244:16",children:x?e.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:div:246:20",children:e.jsxs("div",{className:"text-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:div:253:22",children:[e.jsx(Q,{icon:"lucide:loader-2",className:"w-8 h-8 animate-spin text-primary-500 mx-auto mb-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:Icon:254:24"}),e.jsx("p",{className:"text-sm text-gray-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:p:255:24",children:"Loading image..."})]})},"loading"):_?e.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:div:259:20",children:e.jsxs("div",{className:"text-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:div:266:22",children:[e.jsx(Q,{icon:"lucide:image-off",className:"w-8 h-8 text-danger-500 mx-auto mb-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:Icon:267:24"}),e.jsx("p",{className:"text-sm text-danger-600","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:p:268:24",children:_})]})},"error"):d?e.jsx(ae.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"absolute inset-0 flex items-center justify-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:div:272:20",children:e.jsx("img",{src:d,alt:n,className:`max-w-none transition-transform ${w>1?"cursor-grab":"cursor-zoom-in"} ${v?"cursor-grabbing":""}`,style:{transform:`scale(${w}) translate(${g.x/w}px, ${g.y/w}px)`,maxHeight:1===w?"100%":"none",maxWidth:1===w?"100%":"none"},onMouseDown:N,onMouseMove:S,onMouseUp:I,onMouseLeave:I,onClick:1===w?D:void 0,draggable:!1,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:img:279:22"})},"image"):null})})}),e.jsx(u,{className:"border-t border-gray-200 dark:border-gray-700","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:ModalFooter:303:12",children:e.jsxs("div",{className:"flex justify-between items-center w-full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:div:304:14",children:[e.jsxs("div",{className:"text-sm text-gray-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:div:305:16",children:[w>1&&"Click and drag to pan • ","Scroll to zoom • Click image to zoom in"]}),e.jsx(a,{color:"primary",onPress:s,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ChartImageViewer.tsx:Button:309:16",children:"Close"})]})})]})})})},Ve=({isOpen:t,onOpenChange:s,initialChartImage:r,initialTradeId:o,refreshTrigger:n})=>{const[_,j]=$.useState([]),[w,y]=$.useState(0),[g,f]=$.useState(!1),[v,k]=$.useState(null),[C,b]=$.useState("all"),[D,U]=$.useState("all"),[z,N]=$.useState("all"),[S,I]=$.useState({start:null,end:null}),[T,P]=$.useState(!1),[M,E]=$.useState(!0),[A,F]=$.useState(!1),[R,L]=$.useState(1),[q,V]=$.useState({x:0,y:0}),[B,H]=$.useState(!1),[Y,W]=$.useState({x:0,y:0}),[K,G]=$.useState(new Map),[J,Z]=$.useState(0),[X,ee]=$.useState(""),[re,oe]=$.useState(!1),ne=$.useMemo(()=>{const e=new Set(_.map(e=>e.tradeName).filter(Boolean));return Array.from(e).sort()},[_]),de=$.useMemo(()=>Array.from(new Set(_.map(e=>e.setup).filter(Boolean))).sort(),[_]),ie=$.useMemo(()=>X?ne.filter(e=>e.toLowerCase().includes(X.toLowerCase())).slice(0,10):ne.slice(0,10),[ne,X]),le=(e,t)=>void 0===e||"Open"===t?"breakeven":e>0?"win":e<0?"loss":"breakeven",ce=$.useMemo(()=>"all"!==C||"all"!==D||"all"!==z||S.start||S.end||X.length>0,[C,D,z,S,X]),pe=$.useMemo(()=>{let e=_;return"all"!==C&&(e=e.filter(e=>e.imageType===C)),"all"!==D&&(e=e.filter(e=>le(e.plRs,e.positionStatus)===D)),"all"!==z&&(e=e.filter(e=>e.setup===z)),(S.start||S.end)&&(e=e.filter(e=>{if(!e.tradeDate)return!1;const t=new Date(e.tradeDate);if(S.start){if(t<new Date(S.start))return!1}if(S.end){if(t>new Date(S.end))return!1}return!0})),X&&(e=e.filter(e=>{var t;return null==(t=e.tradeName)?void 0:t.toLowerCase().includes(X.toLowerCase())})),e},[_,C,D,z,S,X,le]),me=pe[w];$.useEffect(()=>{t?ue():(K.forEach(e=>{e.startsWith("blob:")&&URL.revokeObjectURL(e)}),G(new Map),L(1),V({x:0,y:0}),y(0))},[t,n]),$.useEffect(()=>{if(r&&pe.length>0){const e=pe.findIndex(e=>e.id===r.id);e>=0&&y(e)}},[r,pe]),$.useEffect(()=>{y(0)},[C,X]),$.useEffect(()=>{const e=e=>{if(t)switch(e.key){case"ArrowLeft":e.preventDefault(),_e();break;case"ArrowRight":e.preventDefault(),he();break;case"Escape":s(!1);break;case"1":b("beforeEntry");break;case"2":b("afterExit");break;case"0":b("all");break;case"w":U("win");break;case"l":U("loss");break;case"b":U("breakeven");break;case"c":b("all"),U("all"),N("all"),I({start:null,end:null}),ee("");break;case"f":P(!T);break;case"F11":case"F":e.preventDefault(),ke();break;case"h":case"H":E(!M)}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t,w,pe.length]);const ue=async()=>{f(!0),k(null),Z(0);try{const t=await se.getAllTrades(),a=[];let s=0;const r=t.length;for(let d=0;d<t.length;d++){const o=t[d];Z(s/r*100);try{if(o.chartAttachments){if(o.chartAttachments.beforeEntry){const e=o.chartAttachments.beforeEntry;let t=e.dataUrl;if(t||"blob"!==e.storage||!e.blobId||e.isTemporary||(t=await O.getChartImageDataUrl(e)),t){const s={id:e.id,tradeId:o.id,imageType:"beforeEntry",filename:e.filename,mimeType:e.mimeType,size:e.size,data:new Blob,uploadedAt:new Date(e.uploadedAt),compressed:e.compressed||!1,originalSize:e.originalSize,tradeName:o.name,tradeDate:o.date,tradeNo:o.tradeNo?Number(o.tradeNo):0,dataUrl:t,plRs:o.plRs,setup:o.setup,positionStatus:o.positionStatus};a.push(s)}}if(o.chartAttachments.afterExit){const e=o.chartAttachments.afterExit;let t=e.dataUrl;if(t||"blob"!==e.storage||!e.blobId||e.isTemporary||(t=await O.getChartImageDataUrl(e)),t){const s={id:e.id,tradeId:o.id,imageType:"afterExit",filename:e.filename,mimeType:e.mimeType,size:e.size,data:new Blob,uploadedAt:new Date(e.uploadedAt),compressed:e.compressed||!1,originalSize:e.originalSize,tradeName:o.name,tradeDate:o.date,tradeNo:o.tradeNo?Number(o.tradeNo):0,dataUrl:t,plRs:o.plRs,setup:o.setup,positionStatus:o.positionStatus};a.push(s)}}}}catch(e){console.error(`Failed to process chart attachments for trade ${o.name}:`,e)}s++}const o=new Map;a.forEach(e=>{o.has(e.id)||o.set(e.id,e)});const n=Array.from(o.values()).sort((e,t)=>{const a={beforeEntry:0,afterExit:1},s=a[e.imageType]-a[t.imageType];if(0!==s)return s;const r=e.tradeDate?new Date(e.tradeDate).getTime():0;return(t.tradeDate?new Date(t.tradeDate).getTime():0)-r});j(n),Z(100),xe(0,a)}catch(e){const t=e instanceof Error?e.message:"Unknown error occurred";k(`Failed to load chart images: ${t}`)}finally{f(!1)}},xe=$.useCallback((e,t)=>{const a=new Map(K);for(let s=Math.max(0,e-2);s<=Math.min(t.length-1,e+2);s++){const e=t[s];e.dataUrl&&!a.has(e.id)&&a.set(e.id,e.dataUrl)}G(a)},[K]),he=$.useCallback(()=>{if(w<pe.length-1){const e=w+1;y(e),xe(e,pe),je()}},[w,pe,xe]),_e=$.useCallback(()=>{if(w>0){const e=w-1;y(e),xe(e,pe),je()}},[w,pe,xe]),je=()=>{L(1),V({x:0,y:0})},we=()=>{L(e=>Math.min(1.5*e,5))},ye=()=>{L(e=>Math.max(e/1.5,.5))},ge=e=>{R>1&&(H(!0),W({x:e.clientX-q.x,y:e.clientY-q.y}))},fe=e=>{B&&R>1&&V({x:e.clientX-Y.x,y:e.clientY-Y.y})},ve=()=>{H(!1)},ke=async()=>{try{A?(document.exitFullscreen&&await document.exitFullscreen(),F(!1)):(document.documentElement.requestFullscreen&&await document.documentElement.requestFullscreen(),F(!0))}catch(e){console.error("Fullscreen error:",e)}};$.useEffect(()=>{const e=()=>{F(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)},[]);const Ce=()=>{if(null==me?void 0:me.dataUrl){const e=document.createElement("a");e.href=me.dataUrl,e.download=me.filename,document.body.appendChild(e),e.click(),document.body.removeChild(e)}},be=e=>{ee(e),oe(!1);const t=pe.findIndex(t=>t.tradeName===e);t>=0&&y(t)};return t?e.jsx(l,{isOpen:t,onOpenChange:s,size:"full",backdrop:"blur",classNames:{base:"bg-white/95 dark:bg-gray-900/95",backdrop:"bg-black/60"},hideCloseButton:!0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Modal:543:4",children:e.jsx(c,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:ModalContent:554:6",children:t=>{return e.jsxs(e.Fragment,{children:[e.jsx(te,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:AnimatePresence:558:12",children:M&&e.jsx(ae.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:div:560:16",children:e.jsxs(p,{className:"border-b border-gray-200 dark:border-gray-700 px-6 py-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:ModalHeader:567:18",children:[e.jsxs("div",{className:"flex justify-between items-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:div:569:14",children:[e.jsx("div",{className:"flex items-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:div:570:16",children:me&&e.jsx("span",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:span:573:20",children:me.tradeName})}),e.jsxs("div",{className:"flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:div:579:16",children:[e.jsxs("div",{className:"relative","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:div:581:18",children:[e.jsx(i,{size:"sm",placeholder:"Search...",value:X,onChange:e=>{return t=e.target.value,ee(t),void oe(t.length>0);var t},onFocus:()=>oe(X.length>0),onBlur:()=>setTimeout(()=>oe(!1),200),className:"w-28",classNames:{input:"text-xs",inputWrapper:"h-7 min-h-7"},startContent:e.jsx(Q,{icon:"lucide:search",className:"w-3 h-3 text-gray-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Icon:594:36"}),"aria-label":"Search chart symbols","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Input:582:20"}),re&&ie.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-50 max-h-32 overflow-y-auto","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:div:600:22",children:ie.map(t=>e.jsx("div",{className:"px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer text-sm",onMouseDown:()=>be(t),role:"button",tabIndex:0,"aria-label":`Select symbol ${t}`,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),be(t))},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:div:602:26",children:t},t))})]}),e.jsxs(a,{isIconOnly:!0,variant:"light",onPress:()=>P(!T),className:"w-7 h-7 min-w-7 relative","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Button:623:18",children:[e.jsx(Q,{icon:"lucide:filter",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Icon:629:20"}),ce&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-3 h-3 flex items-center justify-center text-[10px]","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:span:631:22",children:["all"!==C,"all"!==D,"all"!==z,S.start,S.end,X].filter(Boolean).length})]}),e.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 px-2 py-1 bg-gray-100 dark:bg-gray-800 rounded text-center min-w-[2.5rem]","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:div:638:18",children:pe.length>0?`${w+1}/${pe.length}`:"0/0"}),e.jsx(a,{isIconOnly:!0,variant:"light",size:"sm",onPress:_e,isDisabled:w<=0,className:"w-7 h-7 min-w-7","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Button:643:18",children:e.jsx(Q,{icon:"lucide:chevron-left",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Icon:651:20"})}),e.jsx(a,{isIconOnly:!0,variant:"light",size:"sm",onPress:he,isDisabled:w>=pe.length-1,className:"w-7 h-7 min-w-7","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Button:653:18",children:e.jsx(Q,{icon:"lucide:chevron-right",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Icon:661:20"})}),e.jsx(a,{isIconOnly:!0,variant:"light",size:"sm",onPress:ye,isDisabled:R<=.5,className:"w-7 h-7 min-w-7","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Button:665:18",children:e.jsx(Q,{icon:"lucide:zoom-out",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Icon:673:20"})}),e.jsxs("div",{className:"text-sm font-mono px-1 min-w-[2rem] text-center text-gray-600 dark:text-gray-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:div:675:18",children:[Math.round(100*R),"%"]}),e.jsx(a,{isIconOnly:!0,variant:"light",size:"sm",onPress:we,isDisabled:R>=5,className:"w-7 h-7 min-w-7","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Button:678:18",children:e.jsx(Q,{icon:"lucide:zoom-in",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Icon:686:20"})}),e.jsx(a,{isIconOnly:!0,variant:"light",size:"sm",onPress:ke,className:"w-7 h-7 min-w-7","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Button:688:18",children:e.jsx(Q,{icon:A?"lucide:minimize":"lucide:maximize",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Icon:695:20"})}),e.jsx(a,{isIconOnly:!0,variant:"light",size:"sm",onPress:Ce,isDisabled:!(null==me?void 0:me.dataUrl),className:"w-7 h-7 min-w-7","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Button:699:18",children:e.jsx(Q,{icon:"lucide:download",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Icon:707:20"})}),e.jsx(a,{isIconOnly:!0,variant:"light",size:"sm",onPress:()=>E(!1),className:"w-7 h-7 min-w-7","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Button:710:18",children:e.jsx(Q,{icon:"lucide:chevron-up",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Icon:717:20"})}),e.jsx(a,{isIconOnly:!0,variant:"light",size:"sm",onPress:t,className:"w-7 h-7 min-w-7","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Button:720:18",children:e.jsx(Q,{icon:"lucide:x",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Icon:727:20"})})]})]}),e.jsx(te,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:AnimatePresence:733:14",children:T&&e.jsx(ae.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"border-t border-gray-200 dark:border-gray-700 pt-2 mt-2 overflow-hidden","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:div:735:18",children:e.jsxs("div",{className:"flex justify-end flex-wrap gap-2 mr-8","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:div:742:20",children:[e.jsxs(x,{size:"sm",value:C,onChange:e=>b(e.target.value),className:"w-24",classNames:{trigger:"h-7 min-h-7",value:"text-xs"},placeholder:"Type","aria-label":"Filter by chart type","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Select:744:22",children:[e.jsx(h,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:SelectItem:756:24",children:"All"},"all"),e.jsx(h,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:SelectItem:757:24",children:"Entry"},"beforeEntry"),e.jsx(h,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:SelectItem:758:24",children:"Exit"},"afterExit")]}),e.jsxs(x,{size:"sm",value:D,onChange:e=>U(e.target.value),className:"w-28",classNames:{trigger:"h-7 min-h-7",value:"text-xs"},placeholder:"Outcome","aria-label":"Filter by trade outcome","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Select:762:22",children:[e.jsx(h,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:SelectItem:774:24",children:"All"},"all"),e.jsx(h,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:SelectItem:775:24",children:"Win"},"win"),e.jsx(h,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:SelectItem:776:24",children:"Loss"},"loss"),e.jsx(h,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:SelectItem:777:24",children:"Breakeven"},"breakeven")]}),e.jsxs(x,{size:"sm",value:z,onChange:e=>N(e.target.value),className:"w-28",classNames:{trigger:"h-7 min-h-7",value:"text-xs"},placeholder:"Setup","aria-label":"Filter by trade setup","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Select:781:22",children:[e.jsx(h,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:SelectItem:793:24",children:"All"},"all"),de.map(t=>e.jsx(h,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:SelectItem:795:26",children:t},t))]}),e.jsx(i,{type:"date",size:"sm",value:S.start||"",onChange:e=>I(t=>({...t,start:e.target.value||null})),className:"w-32",classNames:{input:"text-xs",inputWrapper:"h-7 min-h-7"},placeholder:"From","aria-label":"Filter from date","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Input:800:22"}),e.jsx(i,{type:"date",size:"sm",value:S.end||"",onChange:e=>I(t=>({...t,end:e.target.value||null})),className:"w-32",classNames:{input:"text-xs",inputWrapper:"h-7 min-h-7"},placeholder:"To","aria-label":"Filter to date","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Input:815:22"}),e.jsx(a,{size:"sm",variant:"light",color:"danger",onPress:()=>{b("all"),U("all"),N("all"),I({start:null,end:null}),ee("")},className:"h-7 text-xs",startContent:e.jsx(Q,{icon:"lucide:x",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Icon:842:38"}),isDisabled:!ce,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Button:830:22",children:"Clear"})]})})})]})})}),!M&&e.jsx("div",{className:"absolute top-2 right-2 z-50","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:div:858:14",children:e.jsx(a,{isIconOnly:!0,variant:"flat",size:"sm",onPress:()=>E(!0),className:"w-8 h-8 bg-black/20 hover:bg-black/40 text-white backdrop-blur-sm","aria-label":"Show header","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Button:859:16",children:e.jsx(Q,{icon:"lucide:chevron-down",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Icon:867:18"})})}),e.jsx(m,{className:"p-0 overflow-hidden","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:ModalBody:872:12",children:g?e.jsxs("div",{className:"flex flex-col items-center justify-center h-[80vh]","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:div:874:16",children:[e.jsx(ae.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.4},className:"mb-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:div:875:18",children:e.jsx(Q,{icon:"lucide:loader-2",className:"w-12 h-12 animate-spin text-foreground mb-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Icon:881:20"})}),e.jsxs(ae.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},className:"text-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:div:883:18",children:[e.jsx("p",{className:"text-lg font-medium text-foreground mb-4 font-sans","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:p:889:20",children:"Loading chart images..."}),e.jsx(d,{value:J,className:"w-64 mb-2",color:"primary","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Progress:890:20"}),e.jsxs("p",{className:"text-sm text-foreground/70 font-sans","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:p:891:20",children:[Math.round(J),"%"]})]})]}):v?e.jsxs("div",{className:"flex flex-col items-center justify-center h-[80vh]","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:div:895:16",children:[e.jsx(Q,{icon:"lucide:image-off",className:"w-12 h-12 text-danger-500 mb-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Icon:896:18"}),e.jsx("p",{className:"text-lg text-danger-600","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:p:897:18",children:v}),e.jsx(a,{color:"primary",variant:"light",onPress:ue,className:"mt-4",startContent:e.jsx(Q,{icon:"lucide:refresh-cw",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Icon:903:34"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Button:898:18",children:"Retry"})]}):0===pe.length?e.jsxs("div",{className:"flex flex-col items-center justify-center h-[80vh]","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:div:909:16",children:[e.jsx(Q,{icon:"lucide:image-off",className:"w-12 h-12 text-gray-400 mb-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Icon:910:18"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:p:911:18",children:"No chart images found"}),e.jsx("p",{className:"text-sm text-gray-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:p:912:18",children:"Upload some chart images to get started"})]}):me?e.jsxs("div",{className:"relative w-full h-[80vh] bg-gray-50 dark:bg-gray-900 overflow-hidden","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:div:915:16",children:[e.jsx(te,{mode:"wait","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:AnimatePresence:916:18",children:e.jsx(ae.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"absolute inset-0 flex items-center justify-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:div:917:20",children:e.jsx("img",{src:me.dataUrl,alt:`${me.tradeName} - ${s=me.imageType,"beforeEntry"===s?"Before Entry":"After Exit"}`,className:`max-w-none transition-transform ${R>1?"cursor-grab":"cursor-zoom-in"} ${B?"cursor-grabbing":""}`,style:{transform:`scale(${R}) translate(${q.x/R}px, ${q.y/R}px)`,maxHeight:1===R?"100%":"none",maxWidth:1===R?"100%":"none"},onMouseDown:ge,onMouseMove:fe,onMouseUp:ve,onMouseLeave:ve,onClick:1===R?we:void 0,draggable:!1,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:img:925:22"})},me.id)}),e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:div:947:18",children:e.jsx(a,{isIconOnly:!0,variant:"flat",size:"lg",onPress:_e,isDisabled:w<=0,className:"ml-4 bg-black/20 hover:bg-black/40 text-white backdrop-blur-sm","aria-label":"Previous image","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Button:948:20",children:e.jsx(Q,{icon:"lucide:chevron-left",className:"w-6 h-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Icon:957:22"})})}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:div:961:18",children:e.jsx(a,{isIconOnly:!0,variant:"flat",size:"lg",onPress:he,isDisabled:w>=pe.length-1,className:"mr-4 bg-black/20 hover:bg-black/40 text-white backdrop-blur-sm","aria-label":"Next image","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Button:962:20",children:e.jsx(Q,{icon:"lucide:chevron-right",className:"w-6 h-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Icon:971:22"})})})]}):null}),e.jsx(u,{className:"border-t border-gray-200 dark:border-gray-700 px-4 py-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:ModalFooter:978:12",children:e.jsxs("div",{className:"flex justify-between items-center w-full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:div:979:14",children:[e.jsxs("div",{className:"text-xs text-gray-500 flex gap-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:div:980:16",children:[e.jsx("span",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:span:981:18",children:"← → navigate"}),e.jsx("span",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:span:982:18",children:"H header"}),e.jsx("span",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:span:983:18",children:"F filters"}),e.jsx("span",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:span:984:18",children:"F11 fullscreen"}),R>1&&e.jsx("span",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:span:985:31",children:"• Drag to pan"})]}),e.jsxs("div",{className:"flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:div:988:16",children:[me&&me.tradeDate&&e.jsx("span",{className:"text-xs text-gray-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:span:990:20",children:new Date(me.tradeDate).toLocaleDateString()}),e.jsx(a,{isIconOnly:!0,variant:"light",size:"sm",onPress:t,className:"w-7 h-7 min-w-7","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Button:994:18",children:e.jsx(Q,{icon:"lucide:x",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\UniversalChartViewer.tsx:Icon:1001:20"})})]})]})})]});var s}})}):null};function Be(e){const t=[],a=(e.initialQty||0)+(e.pyramid1Qty||0)+(e.pyramid2Qty||0),s=(e.exit1Qty||0)+(e.exit2Qty||0)+(e.exit3Qty||0);s>0&&s>a&&t.push({type:"error",message:`Exit quantity (${s}) cannot be greater than bought quantity (${a}). Please check your pyramid and exit quantities.`}),(e.pyramid1Qty||0)>0&&!((e.pyramid1Price||0)>0)&&t.push({type:"warning",message:"Pyramid 1 has quantity but no price specified"}),(e.pyramid2Qty||0)>0&&!((e.pyramid2Price||0)>0)&&t.push({type:"warning",message:"Pyramid 2 has quantity but no price specified"}),(e.exit1Qty||0)>0&&!((e.exit1Price||0)>0)&&t.push({type:"warning",message:"Exit 1 has quantity but no price specified"}),(e.exit2Qty||0)>0&&!((e.exit2Price||0)>0)&&t.push({type:"warning",message:"Exit 2 has quantity but no price specified"}),(e.exit3Qty||0)>0&&!((e.exit3Price||0)>0)&&t.push({type:"warning",message:"Exit 3 has quantity but no price specified"});const r=e.openQty>0,o=!e.exit1Qty&&!e.exit2Qty&&!e.exit3Qty;r&&o&&t.push({type:"warning",message:`Trade has open quantity (${e.openQty}) but no exit details entered`});const n=0===e.openQty&&s>0,d="Open"===e.positionStatus;n&&d&&t.push({type:"warning",message:'All quantity exited but status still marked as "Open"'});return s>0&&e.openQty>0&&"Open"===e.positionStatus&&t.push({type:"warning",message:'Trade has partial exits but status not marked as "Partial"'}),t}const He={id:"",tradeNo:"",date:(new Date).toISOString().split("T")[0],name:"",entry:0,avgEntry:0,sl:0,tsl:0,buySell:"Buy",cmp:0,setup:"",baseDuration:"",initialQty:0,pyramid1Price:0,pyramid1Qty:0,pyramid1Date:"",pyramid2Price:0,pyramid2Qty:0,pyramid2Date:"",positionSize:0,allocation:0,exit1Price:0,exit1Qty:0,exit1Date:"",exit2Price:0,exit2Qty:0,exit2Date:"",exit3Price:0,exit3Qty:0,exit3Date:"",openQty:0,exitedQty:0,avgExitPrice:0,stockMove:0,rewardRisk:0,holdingDays:0,positionStatus:"Open",realisedAmount:0,plRs:0,pfImpact:0,cummPf:0,planFollowed:!0,exitTrigger:"",proficiencyGrowthAreas:"",slPercent:0,openHeat:0},Ye=(e,t,a)=>{const s=[{price:Number(e.entry||0),qty:Number(e.initialQty||0)},{price:Number(e.pyramid1Price||0),qty:Number(e.pyramid1Qty||0)},{price:Number(e.pyramid2Price||0),qty:Number(e.pyramid2Qty||0)}].filter(e=>e.qty>0&&e.price>0),r=s.length>0?ne(s):Number(e.entry)||0,o=s.reduce((e,t)=>e+t.qty,0),n=o>0?je(r,o):0;let d=t;if(e.date&&a){const t=new Date(e.date),s=a(t.toLocaleString("default",{month:"short"}),t.getFullYear());void 0!==s&&(d=s)}const i=n>0&&d>0?_e(n,d):0,l=Number(e.exit1Qty||0),c=Number(e.exit2Qty||0),p=Number(e.exit3Qty||0),m=de(l,c,p),u=Math.max(0,o-m),x=[{price:Number(e.exit1Price||0),qty:l},{price:Number(e.exit2Price||0),qty:c},{price:Number(e.exit3Price||0),qty:p}].filter(e=>e.qty>0&&e.price>0),h=x.length>0?ie(x):0,_=r>0?le(r,h,Number(e.cmp||0),u,m,e.positionStatus||"Open",e.buySell||"Buy"):0,j=Number(e.entry)||0,w=Number(e.sl)||0,y=j>0&&w>0?he(w,j):0,g=Number(e.cmp)||0,f=j>0&&w>0?ce(g,j,w,e.positionStatus||"Open",h,u,m,e.buySell||"Buy"):0,v=e.date||"",k=e.exit1Date||"",C=v&&k?pe(v,k):0,b=m>0?xe(m,h):0,D=[{price:Number(e.entry||0),qty:Number(e.initialQty||0)},{price:Number(e.pyramid1Price||0),qty:Number(e.pyramid1Qty||0)},{price:Number(e.pyramid2Price||0),qty:Number(e.pyramid2Qty||0)}].filter(e=>e.qty>0&&e.price>0),U=[{price:Number(e.exit1Price||0),qty:l},{price:Number(e.exit2Price||0),qty:c},{price:Number(e.exit3Price||0),qty:p}].filter(e=>e.qty>0&&e.price>0),z=m>0?me(D,U,e.buySell):0,N=d>0?ue(z,d):0;return{...e,avgEntry:r,positionSize:n,allocation:i,exitedQty:m,openQty:u,avgExitPrice:h,stockMove:_,slPercent:y,rewardRisk:f,holdingDays:C,realisedAmount:b,plRs:z,pfImpact:N}},We=R.memo(({isOpen:t,onOpenChange:s,trade:r,onSave:d,mode:y,symbol:g="",isUploadOnlyMode:f=!1,isActionsEditMode:v=!1,onChartRefresh:k})=>{var C;const[b,D]=R.useState(!1),{trades:U}=re(),{portfolioSize:z,getPortfolioSize:N}=oe(U),S=R.useMemo(()=>"edit"===y&&(null==r?void 0:r.id)?`tradeModal_edit_${r.id}`:"add"===y?"tradeModal_add":"tradeModal",[y,r]),I=R.useMemo(()=>{if(!U||0===U.length)return"1";const e=U.map(e=>parseInt(e.tradeNo,10)).filter(e=>!isNaN(e));return e.length>0?String(Math.max(...e)+1):"1"},[U]),[T,P]=R.useState(()=>{if("undefined"!=typeof window){const t=sessionStorage.getItem(S+"_formData");if(t)try{return JSON.parse(t)}catch(e){}try{const e=Object.keys(localStorage).filter(e=>e.startsWith(`tradeBackup_${S}_`)).sort((e,t)=>{const a=parseInt(e.split("_").pop()||"0");return parseInt(t.split("_").pop()||"0")-a});if(e.length>0){const t=localStorage.getItem(e[0]);if(t){return JSON.parse(t).formData}}}catch(e){}}return r?{...He,...r,slPercent:r.slPercent||0}:"add"===y?{...He,tradeNo:I}:He}),{latestPrice:M}=(e=>{const[t,a]=$.useState([]),[s,r]=$.useState(!1),[o,n]=$.useState(null),[d,i]=$.useState(null),l=$.useRef(null),c=$.useRef(!0),p=$.useCallback(t=>{var a,s;return(null==(s=null==(a=null==t?void 0:t.data)?void 0:a.ticks)?void 0:s[e])?t.data.ticks[e].map(e=>({dateTime:e[0],timestamp:new Date(e[0]).getTime(),open:e[1],high:e[2],low:e[3],close:e[4],volume:e[5],dayVolume:e[6]})):[]},[e]),m=$.useCallback(async(t,s)=>{if(!e||!c.current)return[];r(!0),n(null);try{let r;try{r=await $e(e,t,s)}catch(o){r=await Re(e,t,s)}const d=p(r);return c.current&&(a(d),i(new Date),n(null)),d}catch(d){if(c.current){const e=d instanceof Error?d.message:"Failed to fetch price ticks";let t=e;e.includes("525")||e.includes("SSL")?t="SSL connection failed. The API server may be temporarily unavailable.":e.includes("CORS")?t="Cross-origin request blocked. Please check API configuration.":e.includes("timeout")?t="Request timed out. Please check your internet connection.":e.includes("404")&&(t="API endpoint not found. The service may be temporarily unavailable."),n(new Error(t))}return[]}finally{c.current&&r(!1)}},[e,p]),u=$.useCallback(()=>{l.current&&(clearInterval(l.current),l.current=null)},[]),x=$.useCallback(()=>{const e=new Date,t=e.getDay(),a=e.getHours(),s=e.getMinutes();return 0!==t&&6!==t&&(a<9||9===a&&s<15)},[]),h=$.useCallback(()=>{u();const e=J(new Date),t=Se(),a=x();let s;return s=e?18e5:a?6e5:t?6e4:6e5,m(),l.current=setInterval(()=>{J(new Date),Se(),x(),m()},s),()=>{u()}},[e,m,u,x]);$.useEffect(()=>(c.current=!0,e&&h(),()=>{c.current=!1,u()}),[e,h]);const _=$.useCallback((e,t)=>m(e,t),[m]),j=$.useMemo(()=>{var a;if(0===t.length)return null;const s=t[t.length-1];if(Array.isArray(null==(a=s.ticks)?void 0:a[e])&&s.ticks[e].length>0){const t=s.ticks[e],a=t[t.length-1];if(a&&"number"==typeof a[4])return{dateTime:a[0]||"",timestamp:new Date(a[0]||"").getTime(),open:a[1]||0,high:a[2]||0,low:a[3]||0,close:a[4]||0,volume:a[5]||0,dayVolume:a[6]||0,..."object"==typeof s&&null!==s?s:{}}}else if(s&&"number"==typeof s.close)return s;return null},[t,e]),w=$.useCallback(e=>{if(0===t.length)return null;const a=e.getTime();return t.reduce((e,t)=>Math.abs(e.timestamp-a)<Math.abs(t.timestamp-a)?e:t)},[t]),y=$.useMemo(()=>{if(t.length<2)return 0;const e=t[0].close;return(t[t.length-1].close-e)/e*100},[t]);return $.useCallback(()=>{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate());return t.setHours(9,8,0,0),t},[]),{priceTicks:t,latestPrice:j,loading:s,error:o,lastUpdated:d,refresh:_,getPriceAtTime:w,priceChange:y}})((null==T?void 0:T.name)||g),[E,A]=R.useState(!1),[F,O]=R.useState(!1),[L,q]=R.useState(null),[V,B]=R.useState(()=>{if(f)return"charts";if(v)return"basic";if("undefined"!=typeof window){const e=sessionStorage.getItem(S+"_activeTab");if(e)return e}return"basic"}),[Y,W]=R.useState(null),[G,Z]=R.useState(!1),[X,ee]=R.useState(!1),[se,ne]=R.useState(0);R.useEffect(()=>{f?(B("charts"),ne(e=>e+1)):v&&B("basic")},[f,v]);const[de,ie]=R.useState(()=>{const e=(null==r?void 0:r.chartAttachments)||{};return e.metadata?{...e,metadata:{...e.metadata,createdAt:e.metadata.createdAt?new Date(e.metadata.createdAt):new Date,updatedAt:e.metadata.updatedAt?new Date(e.metadata.updatedAt):new Date}}:e}),[le,ce]=R.useState({});R.useEffect(()=>{t&&(null==r?void 0:r.id)&&(async()=>{var e,t;if(null==r?void 0:r.id)try{const{SupabaseService:s}=await _(async()=>{const{SupabaseService:e}=await import("./index-CCg2rRgv.js").then(e=>e.N);return{SupabaseService:e}},__vite__mapDeps([0,1,2,3,4,5,6])),{ChartImageService:o}=await _(async()=>{const{ChartImageService:e}=await import("./chartImageService-D0un2IL8.js").then(e=>e.d);return{ChartImageService:e}},__vite__mapDeps([7,0,1,2,3,4,5,6]));if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(r.id))return console.log(`📦 [CHART_LOAD] Trade ID is not UUID format, skipping Supabase chart loading: ${r.id}`),void(r.chartAttachments&&ie(r.chartAttachments));const[n,d]=await Promise.all([s.getTradeChartImageBlobs(r.id),s.getTrade(r.id)]);let i={};if((null==d?void 0:d.chartAttachments)&&(i={...d.chartAttachments}),n.length>0)for(const e of n){const t={id:e.id,filename:e.filename,size:e.size_bytes,mimeType:e.mime_type,uploadedAt:new Date(e.uploaded_at),compressed:e.compressed||!1,originalSize:e.original_size,storage:"blob",blobId:e.id};try{const e=await o.getChartImageDataUrl(t);e&&(t.dataUrl=e)}catch(a){}i[e.image_type]=t}if(i.beforeEntry||i.afterExit){const a=[i.beforeEntry,i.afterExit].filter(Boolean),s=a.reduce((e,t)=>e+t.size,0),r=a.reduce((e,t)=>t.uploadedAt<e?t.uploadedAt:e,(null==(e=a[0])?void 0:e.uploadedAt)||new Date),o=a.reduce((e,t)=>t.uploadedAt>e?t.uploadedAt:e,(null==(t=a[0])?void 0:t.uploadedAt)||new Date);i.metadata={createdAt:r,updatedAt:o,totalSize:s}}ie(i)}catch(a){console.error("Failed to load chart image blobs:",a)}})()},[t,null==r?void 0:r.id,f]),R.useEffect(()=>{const e=setTimeout(async()=>{O(!0);try{const e={...T};e.chartAttachments&&delete e.chartAttachments,sessionStorage.setItem(S+"_formData",JSON.stringify(e));const t={...T};t.chartAttachments&&delete t.chartAttachments;const a=`tradeBackup_${S}_${Date.now()}`;localStorage.setItem(a,JSON.stringify({formData:t,timestamp:Date.now(),sessionKey:S}));const s=Object.keys(localStorage);s.filter(e=>e.startsWith(`tradeBackup_${S}_`)).sort((e,t)=>{const a=parseInt(e.split("_").pop()||"0");return parseInt(t.split("_").pop()||"0")-a}).slice(5).forEach(e=>localStorage.removeItem(e)),q(new Date),console.log("💾 Auto-saved form data and created backup")}catch(e){console.error("❌ Error auto-saving form data:",e)}finally{O(!1)}},1e3);return()=>clearTimeout(e)},[T,S]),R.useEffect(()=>{sessionStorage.setItem(S+"_activeTab",V)},[V,S]),R.useEffect(()=>{(null==M?void 0:M.close)&&M.close>0&&!b&&0===T.cmp&&(console.log("[TradeModal] Updating CMP with latest price:",M.close),P(e=>({...e,cmp:M.close,_cmpAutoFetched:!0})))},[M,b,T.cmp]);const[pe,me]=R.useState(!1);R.useEffect(()=>{!t&&pe&&(sessionStorage.removeItem(S+"_formData"),sessionStorage.removeItem(S+"_activeTab"),me(!1))},[t,S,pe]);const ue=R.useMemo(()=>["riskReward","riskPerShare","totalRisk","positionSize","totalQty","totalInvestment","exit1Amount","exit2Amount","exit3Amount","totalExitAmount","pnl","pnlPercent","roi","avgEntry","allocation","slPercent","exitedQty","openQty","avgExitPrice","stockMove","rewardRisk","holdingDays","realisedAmount","plRs","pfImpact","cummPf"],[]);((e,t)=>{const[a,s]=R.useState(e);R.useEffect(()=>{const a=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(a)}},[e,t])})(T,300);const xe=R.useRef(null);R.useEffect(()=>{P(r?{...He,...r,slPercent:r.slPercent||0}:"add"===y?{...He,tradeNo:I}:He)},[r,y,I]),R.useEffect(()=>{if(!E&&"edit"===y)return;const e=setTimeout(()=>{P(e=>{const t={...e},a=Ye(t,z,N);return Object.keys(a).some(e=>JSON.stringify(a[e])!==JSON.stringify(t[e]))?{...t,...a}:t})},100);return()=>clearTimeout(e)},[T.entry,T.initialQty,T.pyramid1Price,T.pyramid1Qty,T.pyramid2Price,T.pyramid2Qty,T.exit1Price,T.exit1Qty,T.exit2Price,T.exit2Qty,T.exit3Price,T.exit3Qty,T.sl,T.cmp,T.date,T.exit1Date,z,E,y]);const he=R.useCallback(async(e,t,a)=>{var s,o;const n={...de,[e]:t,metadata:{createdAt:(null==(s=de.metadata)?void 0:s.createdAt)||new Date,updatedAt:new Date,totalSize:((null==(o=de.metadata)?void 0:o.totalSize)||0)+t.size}};ie(n),A(!0),ne(e=>e+1),null==k||k(),console.log(`🔄 Chart uploaded${t.isTemporary?" (temporary)":""}, triggering Universal Chart Viewer refresh`),a&&ce(t=>({...t,[e]:a}));if(t.isTemporary)console.log(`📦 Chart image stored temporarily: ${t.filename}`);else if("edit"===y&&(null==r?void 0:r.id)&&!f)try{const e={...r,chartAttachments:n};d(e)}catch(i){console.error("❌ Failed to update trade with chart attachment:",i)}},[de,y,r,d,f]),_e=R.useCallback(async e=>{var t,a;const s=de[e],o={...de};delete o[e];const n=o.beforeEntry||o.afterExit,i=n?{...o,metadata:{createdAt:(null==(t=de.metadata)?void 0:t.createdAt)||new Date,updatedAt:new Date,totalSize:Math.max(0,((null==(a=de.metadata)?void 0:a.totalSize)||0)-((null==s?void 0:s.size)||0))}}:void 0;if(ie(i||{}),A(!0),ne(e=>e+1),null==k||k(),console.log("🔄 Chart deleted, triggering Universal Chart Viewer refresh"),(null==r?void 0:r.id)&&!f)try{const e={...r,chartAttachments:i};d(e)}catch(l){console.error("❌ Failed to update trade after chart deletion:",l)}else f&&console.log("📦 Chart deleted in upload-only mode, not auto-saving to prevent modal close");P(n?e=>({...e,chartAttachments:i}):e=>{const{chartAttachments:t,...a}=e;return a})},[de,r,d,f]);R.useCallback((e,t)=>{W(e),Z(!0)},[]);const je=R.useCallback(async(e,t)=>{var a,s;if(ue.includes(e))return void console.warn(`Attempted to modify read-only field: ${e}`);const r=["entry","sl","tsl","cmp","initialQty","pyramid1Price","pyramid1Qty","pyramid2Price","pyramid2Qty","exit1Price","exit1Qty","exit2Price","exit2Qty","exit3Price","exit3Qty"].includes(e)?Number(t)||0:t;"cmp"===e&&D(!0);let o={...T,[e]:r,..."cmp"===e?{_cmpAutoFetched:!1}:{}};if("name"===e&&r&&!b)try{console.log("[TradeModal] Fetching price for symbol:",r);const e=await Qe(r),t=null==(s=null==(a=null==e?void 0:e.data)?void 0:a.ticks)?void 0:s[r.toUpperCase()];if(t&&t.length>0){const e=t[t.length-1][4];(0===T.cmp||e>0)&&(o.cmp=e,o._cmpAutoFetched=!0,console.log("[TradeModal] Updated CMP with fetched price:",e))}else 0===T.cmp&&(o.cmp=0,o._cmpAutoFetched=!1)}catch(n){0===T.cmp&&(o.cmp=0,o._cmpAutoFetched=!1),console.warn(`Failed to fetch price for ${r}:`,n)}A(!0),P(o)},[ue,T,b]);R.useEffect(()=>{g&&"add"===y&&je("name",g)},[g,y,je]),R.useCallback(()=>{const e=Ye(T,z,N);return P(t=>({...t,...e})),e},[T,z,N]);const[we,ye]=R.useState([]);R.useEffect(()=>{const e=Be(T);ye(e)},[T]);const ge=R.useCallback(async()=>{var e,t,a,s,r;console.log("🔄 Starting trade save process..."),console.log("📊 Current formData:",T);const o=Be(T);if(ye(o),o.some(e=>"error"===e.type))return console.error("❌ Validation errors found:",o.filter(e=>"error"===e.type)),void alert(`Cannot save trade due to validation errors:\n${o.filter(e=>"error"===e.type).map(e=>e.message).join("\n")}`);o.some(e=>"warning"===e.type)&&console.warn("⚠️ Validation warnings found:",o.filter(e=>"warning"===e.type));try{const o={};let i=!1;if(de.beforeEntry){const e=de.beforeEntry;e.id&&e.filename&&("inline"===e.storage&&e.data||"blob"===e.storage&&e.blobId)?(o.beforeEntry=e,i=!0):console.warn("🧹 Removing invalid beforeEntry chart attachment during save")}if(de.afterExit){const e=de.afterExit;e.id&&e.filename&&("inline"===e.storage&&e.data||"blob"===e.storage&&e.blobId)?(o.afterExit=e,i=!0):console.warn("🧹 Removing invalid afterExit chart attachment during save")}i&&(o.metadata={createdAt:(null==(e=de.metadata)?void 0:e.createdAt)||new Date,updatedAt:new Date,totalSize:((null==(t=o.beforeEntry)?void 0:t.size)||0)+((null==(a=o.afterExit)?void 0:a.size)||0)});const l={...T,id:T.id||H(),chartAttachments:i?o:void 0};console.log("💾 Saving trade with data:",l);const c=Ye(l,z,N);console.log("🧮 Recalculated trade:",c);const p=i&&((null==(s=o.beforeEntry)?void 0:s.isTemporary)||(null==(r=o.afterExit)?void 0:r.isTemporary));if(p&&console.log("📦 Trade has temporary chart images, will save them after trade creation"),d(c),p&&c.id)try{console.log("💾 Saving temporary chart images to Supabase...");const{ChartImageService:e}=await _(async()=>{const{ChartImageService:e}=await import("./chartImageService-D0un2IL8.js").then(e=>e.d);return{ChartImageService:e}},__vite__mapDeps([7,0,1,2,3,4,5,6])),t=await e.saveTemporaryChartImages(c.id,o);t.success?console.log("✅ Temporary chart images saved successfully"):console.error("❌ Failed to save temporary chart images:",t.error)}catch(n){console.error("❌ Error saving temporary chart images:",n)}me(!0),console.log("✅ Trade saved successfully")}catch(n){console.error("💥 Error saving trade:",n),alert("Error saving trade. Please try again.")}},[T,de,d,z,N]),fe=R.useMemo(()=>({variants:{enter:{opacity:1,scale:1,y:0,transition:{duration:.2,ease:[.16,1,.3,1]}},exit:{opacity:0,scale:.98,y:10,transition:{duration:.15,ease:[.16,1,.3,1]}}},initial:{opacity:0,scale:.98,y:10}}),[]),ve=R.useMemo(()=>[{name:"tradeNo",label:"Trade No.",type:"text"},{name:"date",label:"Date",type:"date"},{name:"name",label:"Stock/Asset Name",type:"text"},{name:"entry",label:"Entry Price (₹)",type:"number",unit:"₹"},{name:"sl",label:"Stop Loss (SL) (₹)",type:"number",unit:"₹"},{name:"tsl",label:"Trailing SL (TSL) (₹)",type:"number",unit:"₹"},{name:"cmp",label:"Current Market Price (₹)",type:"number",unit:"₹"},{name:"buySell",label:"Buy/Sell",type:"select",options:["Buy","Sell"]},{name:"initialQty",label:"Initial Quantity (qty)",type:"number",unit:"qty"},{name:"setup",label:"Setup",type:"select",options:["ITB","Chop BO","IPO Base","3/5/8","21/50","Breakout","Pullback","Reversal","Continuation","Gap Fill","OTB","Stage 2","ONP BO","EP","Pivot Bo","Cheat","Flag","Other"]},{name:"baseDuration",label:"Base Duration",type:"text"},{name:"positionStatus",label:"Position Status",type:"select",options:["Open","Closed","Partial"]},{name:"planFollowed",label:"Plan Followed",type:"checkbox"},{name:"exitTrigger",label:"Exit Trigger",type:"select",options:["Breakeven exit","Market Pressure","R multiples","Random","SL","Target","Trailing SL"]},{name:"proficiencyGrowthAreas",label:"Proficiency Growth Areas",type:"select",options:["Biased Analysis","Booked Early","Didn't Book Loss","FOMO","Illiquid Stock","Illogical SL","Lack of Patience","Late Entry","Momentum-less stock","Overconfidence","Overtrading","Poor Exit","Poor Po Size","Poor Sector","Poor Stock","Shifted SL Quickly","Too Early Entry","Too Tight SL"]}],[]),ke=R.useMemo(()=>[{name:"pyramid1Price",label:"Pyramid-1 Price (₹)",type:"number",unit:"₹"},{name:"pyramid1Qty",label:"Pyramid-1 Quantity (qty)",type:"number",unit:"qty"},{name:"pyramid1Date",label:"Pyramid-1 Date",type:"date"},{name:"pyramid2Price",label:"Pyramid-2 Price (₹)",type:"number",unit:"₹"},{name:"pyramid2Qty",label:"Pyramid-2 Quantity (qty)",type:"number",unit:"qty"},{name:"pyramid2Date",label:"Pyramid-2 Date",type:"date"},{name:"exit1Price",label:"Exit-1 Price (₹)",type:"number",unit:"₹"},{name:"exit1Qty",label:"Exit-1 Quantity (qty)",type:"number",unit:"qty"},{name:"exit1Date",label:"Exit-1 Date",type:"date"},{name:"exit2Price",label:"Exit-2 Price (₹)",type:"number",unit:"₹"},{name:"exit2Qty",label:"Exit-2 Quantity (qty)",type:"number",unit:"qty"},{name:"exit2Date",label:"Exit-2 Date",type:"date"},{name:"exit3Price",label:"Exit-3 Price (₹)",type:"number",unit:"₹"},{name:"exit3Qty",label:"Exit-3 Quantity (qty)",type:"number",unit:"qty"},{name:"exit3Date",label:"Exit-3 Date",type:"date"}],[]),Ce=R.useMemo(()=>"basic"===V?ve:ke,[V]),be=K({count:Ce.length,getScrollElement:()=>xe.current,estimateSize:()=>80,overscan:5});R.useEffect(()=>{be&&xe.current&&be.scrollToOffset(0)},[V,be]);const De=R.useCallback(t=>{var a,s;if(ue.includes(t.name)){const a=T[t.name];let s=(null==a?void 0:a.toString())||"0";return"number"==typeof a&&(s=a.toFixed(2),"%"===t.unit||t.percentage?s=`${s}%`:"₹"===t.unit||t.currency?s=`₹${s}`:t.unit&&(s=`${s} ${t.unit}`)),e.jsxs("div",{className:"flex flex-col gap-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1172:8",children:[e.jsx("label",{className:"text-sm font-medium text-foreground-600","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:label:1173:10",children:t.label}),e.jsx("div",{className:"p-2 rounded-md bg-default-100 border-1 border-default-200 min-h-[40px] flex items-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1176:10",children:s})]},t.name)}if("cmp"===t.name)return e.jsxs("div",{className:"flex flex-col gap-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1186:8",children:[e.jsxs("label",{className:"text-sm font-medium text-foreground-600 flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:label:1187:10",children:[t.label,!1===T._cmpAutoFetched&&e.jsx(j,{size:"sm",color:"warning",variant:"flat",className:"text-xs","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:Chip:1190:14",children:"Manual"}),!0===T._cmpAutoFetched&&e.jsx(j,{size:"sm",color:"success",variant:"flat",className:"text-xs","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:Chip:1195:14",children:"Auto"})]}),e.jsx(i,{type:"number",value:(null==(a=T.cmp)?void 0:a.toString())??"0",onValueChange:e=>je("cmp",Number(e)),variant:"bordered",startContent:e.jsx("span",{className:"text-default-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:span:1205:26",children:"₹"}),placeholder:(null==M?void 0:M.close)?`Auto: ${M.close}`:"Enter manually",isDisabled:!0===T._cmpAutoFetched,description:!1===T._cmpAutoFetched?"Manually entered price":!0===T._cmpAutoFetched?"":(null==M?void 0:M.close)?"Price available - will auto-update":"",className:"transform-gpu","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:Input:1200:10"})]},t.name);switch(t.type){case"number":return e.jsx(i,{label:t.label,type:"number",value:(null==(s=T[t.name])?void 0:s.toString())??"0",onValueChange:e=>je(t.name,Number(e)),variant:"bordered",startContent:"₹"===t.unit&&e.jsx("span",{className:"text-default-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:span:1233:48",children:"₹"}),endContent:t.unit&&"₹"!==t.unit&&e.jsx("span",{className:"text-default-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:span:1234:60",children:t.unit}),className:"transform-gpu","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:Input:1226:10"},t.name);case"date":return e.jsx(i,{label:t.label,type:"date",value:T[t.name]||"",onValueChange:e=>je(t.name,e),variant:"bordered",className:"transform-gpu","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:Input:1240:10"},t.name);case"select":return e.jsx(x,{label:t.label,selectedKeys:[T[t.name]],onChange:e=>je(t.name,e.target.value),variant:"bordered",className:"transform-gpu","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:Select:1252:10",children:t.options.map(t=>e.jsx(h,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:SelectItem:1261:14",children:t},t))},t.name);case"text":return"name"===t.name?e.jsx(Ue,{value:T.name||"",onSave:e=>je("name",e),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:NameCell:1268:12"},t.name):e.jsx(i,{label:t.label,value:T[t.name]||"",onValueChange:e=>je(t.name,e),variant:"bordered",className:"transform-gpu","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:Input:1276:10"},t.name);default:return e.jsx(i,{label:t.label,value:T[t.name]||"",onValueChange:e=>je(t.name,e),variant:"bordered",className:"transform-gpu","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:Input:1287:10"},t.name)}},[T,je,ue]),Ue=R.memo(function({value:t,onSave:a}){const[s,r]=R.useState(!1),[o,n]=R.useState(t),[d,i]=R.useState(!1),[l,c]=R.useState([]),[p,m]=R.useState(-1),u=R.useRef(null),x=R.useRef(null),[h,j]=R.useState({top:0,left:0,width:0,height:0}),[w,y]=R.useState([]);R.useEffect(()=>{!async function(){const e=await fetch("/name_sector_industry.csv"),t=await e.text();(await _(async()=>{const{default:e}=await import("./formatters-jc31xfU0.js").then(e=>e.p);return{default:e}},__vite__mapDeps([8,1,9]))).default.parse(t,{header:!0,complete:e=>{const t=e.data.map(e=>e["Stock Name"]).filter(Boolean);y(t)}})}()},[]);R.useEffect(()=>{if(s&&o){const e=w.filter(e=>e.toLowerCase().includes(o.toLowerCase()));if(c(e.slice(0,10)),i(e.length>0),m(-1),u.current){const e=u.current.getBoundingClientRect();j({top:e.top,left:e.left,width:e.width,height:e.height})}}else i(!1)},[o,s,w]),R.useEffect(()=>{const e=()=>{if(s&&u.current){const e=u.current.getBoundingClientRect();j({top:e.top,left:e.left,width:e.width,height:e.height})}};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[s]);const g=e=>{const s=e??o;if(!s.trim())return a(""),r(!1),i(!1),void m(-1);const d=w.find(e=>e.toLowerCase()===s.toLowerCase());if(d)a(d);else{const e=(e=>{if(!e||!w.length)return null;const t=e.toLowerCase();let a=null,s=0;const r=w.find(e=>e.toLowerCase().startsWith(t));if(r)return r;const o=w.find(e=>e.toLowerCase().includes(t));if(o)return o;for(const n of w){const e=n.toLowerCase();let r=0,o=0;for(let a=0;a<e.length&&o<t.length;a++)e[a]===t[o]&&(r++,o++);r>s&&(s=r,a=n)}return s>t.length/2?a:null})(s);if(e){window.confirm(`"${s}" not found. Did you mean "${e}"?`)?a(e):n(t)}else{window.confirm(`"${s}" is not a valid stock name. Do you want to add it?`)?a(s.toUpperCase()):n(t)}}r(!1),i(!1),m(-1)};R.useEffect(()=>{if(p>=0&&x.current){const e=document.getElementById(`stock-suggestion-${p}`);e&&e.scrollIntoView({block:"nearest",behavior:"smooth"})}},[p]);const f=e=>{if(d)switch(e.key){case"ArrowDown":e.preventDefault(),m(e=>{const t=e+1;return t>=l.length?0:t});break;case"ArrowUp":e.preventDefault(),m(e=>{const t=e-1;return t<0?l.length-1:t});break;case"Enter":e.preventDefault(),p>=0?g(l[p]):1===l.length?g(l[0]):g();break;case"Escape":e.preventDefault(),i(!1),m(-1);break;case"Tab":p>=0&&(e.preventDefault(),g(l[p]))}};return s?e.jsxs("div",{className:"relative min-w-[220px]","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1562:8",children:[e.jsx("input",{ref:u,type:"text",className:"w-full min-w-[220px] px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-primary",value:o,onChange:e=>n(e.target.value),onBlur:()=>setTimeout(()=>g(),100),onKeyDown:f,autoFocus:!0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:input:1563:10"}),d&&e.jsx("div",{ref:x,style:{position:"fixed",top:h.top+h.height,left:h.left,width:h.width},className:"z-50 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded shadow max-h-48 overflow-y-auto overflow-x-auto",role:"listbox",tabIndex:-1,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1574:12",children:l.map((t,a)=>e.jsx("div",{id:`stock-suggestion-${a}`,role:"option","aria-selected":a===p,className:"px-3 py-1.5 text-sm cursor-pointer whitespace-nowrap "+(a===p?"bg-blue-100 dark:bg-blue-900":"hover:bg-blue-50 dark:hover:bg-blue-800"),onMouseDown:()=>g(t),onMouseEnter:()=>m(a),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1587:16",children:t},t))})]}):e.jsx("div",{className:"px-2 py-1 text-sm bg-gray-100 dark:bg-gray-700 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors cursor-text",onClick:()=>r(!0),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1610:6",children:t||e.jsx("span",{className:"text-gray-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:span:1614:18",children:"Stock name"})})});return e.jsxs(l,{isOpen:t,onOpenChange:s,size:"charts"===V?"3xl":"2xl",scrollBehavior:"inside",motionProps:fe,classNames:{base:"transform-gpu backdrop-blur-sm",wrapper:"transform-gpu",backdrop:"bg-black/40",closeButton:"text-foreground/60 hover:bg-white/10"},backdrop:"blur","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:Modal:1620:4",children:[e.jsx(c,{className:"bg-white/95 dark:bg-gray-900/95 backdrop-blur-2xl border border-gray-200 dark:border-gray-700 shadow-2xl max-h-[85vh] z-[9999] "+("charts"===V?"w-[90vw] max-w-4xl":"w-[95vw] max-w-md"),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:ModalContent:1634:6",children:t=>{var r,d,i,l,c,x,h,_,j,g,k;return e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"flex flex-col gap-1 border-b border-gray-200 dark:border-gray-700 bg-white/80 dark:bg-gray-900/80","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:ModalHeader:1641:12",children:e.jsx("div",{className:"flex justify-between items-center w-full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1642:14",children:e.jsxs(o,{selectedKey:V,onSelectionChange:e=>{f||v&&"charts"===e||B(e)},"aria-label":"Options",color:"primary",size:"sm",classNames:{tabList:"bg-transparent p-0.5 rounded-xl",cursor:"bg-gray-200 dark:bg-gray-600 rounded-lg shadow-sm",tab:"px-4 py-1.5 text-xs font-medium text-gray-700 dark:text-gray-200 data-[selected=true]:text-gray-900 dark:data-[selected=true]:text-white data-[hover=true]:bg-gray-100/80 dark:data-[hover=true]:bg-gray-700/50 rounded-lg transition-all duration-200"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:Tabs:1643:16",children:[e.jsx(n,{title:"Basic",isDisabled:f,className:f?"opacity-50 cursor-not-allowed":"","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:Tab:1667:18"},"basic"),e.jsx(n,{title:"Advanced",isDisabled:f,className:f?"opacity-50 cursor-not-allowed":"","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:Tab:1673:18"},"advanced"),e.jsx(n,{title:"Charts",isDisabled:v,className:f?"ring-2 ring-primary-500":v?"opacity-50 cursor-not-allowed":"","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:Tab:1679:18"},"charts")]})})}),e.jsx(w,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:Divider:1696:12"}),e.jsx(m,{className:"px-2 py-2 overflow-y-auto overflow-x-hidden overscroll-contain will-change-transform touch-auto","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:ModalBody:1697:12",children:e.jsx(te,{mode:"wait",initial:!1,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:AnimatePresence:1700:14",children:e.jsx(ae.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.15,ease:[.2,0,.2,1]},className:"transform-gpu","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1701:16",children:"charts"===V?e.jsxs("div",{className:"space-y-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1710:20",children:[f&&e.jsxs("div",{className:"bg-primary-50 dark:bg-primary-950 border border-primary-200 dark:border-primary-800 rounded-lg p-3 mb-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1712:24",children:[e.jsxs("div",{className:"flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1713:26",children:[e.jsx(Q,{icon:"lucide:upload",className:"w-4 h-4 text-primary-600 dark:text-primary-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:Icon:1714:28"}),e.jsx("span",{className:"text-sm font-medium text-primary-700 dark:text-primary-300","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:span:1715:28",children:"Chart Upload Mode"})]}),e.jsx("p",{className:"text-xs text-primary-600 dark:text-primary-400 mt-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:p:1719:26",children:"You can only upload charts in this mode. Other trade details are not editable."})]}),e.jsx("div",{className:"flex justify-end mb-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1724:22",children:e.jsx(a,{color:"primary",variant:"flat",size:"sm",onPress:()=>ee(!0),startContent:e.jsx(Q,{icon:"lucide:images",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:Icon:1730:40"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:Button:1725:24",children:"Browse All Charts"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1736:22",children:[e.jsx(Le,{tradeId:T.id||"new",imageType:"beforeEntry",currentImage:de.beforeEntry,onImageUploaded:(e,t)=>he("beforeEntry",e,t),onImageDeleted:()=>_e("beforeEntry"),disabled:!1,allowTemporary:!0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:ChartImageUpload:1737:24"}),e.jsx(Le,{tradeId:T.id||"new",imageType:"afterExit",currentImage:de.afterExit,onImageUploaded:(e,t)=>he("afterExit",e,t),onImageDeleted:()=>_e("afterExit"),disabled:!1,allowTemporary:!0,suggestedUploadMethod:le.beforeEntry,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:ChartImageUpload:1747:24"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 mb-4 transform-gpu","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1762:22",children:[e.jsxs("div",{className:"p-2 rounded-lg bg-white/5 backdrop-blur-md border border-white/10 hover:bg-white/5 transition-all duration-200 shadow-sm hover:shadow","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1763:24",children:[e.jsx("div",{className:"text-[10px] text-foreground-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1764:26",children:"Avg. Entry (₹)"}),e.jsx("div",{className:"font-medium text-sm","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1765:26",children:(null==(r=T.avgEntry)?void 0:r.toFixed(2))??"0.00"})]}),e.jsxs("div",{className:"p-3 rounded-md bg-default-100 border border-default-200","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1767:24",children:[e.jsx("div",{className:"text-[10px] text-foreground-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1768:26",children:"Position (₹)"}),e.jsxs("div",{className:"font-medium text-sm","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1769:26",children:[(null==(d=T.positionSize/1e3)?void 0:d.toFixed(1))??"0.0","K"]})]}),e.jsxs("div",{className:"p-3 rounded-md bg-default-100 border border-default-200","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1771:24",children:[e.jsx("div",{className:"text-[10px] text-foreground-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1772:26",children:"Alloc. (%)"}),e.jsxs("div",{className:"font-medium text-sm","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1773:26",children:[(null==(i=T.allocation)?void 0:i.toFixed(1))??"0.0","%"]})]}),e.jsxs("div",{className:"p-3 rounded-md bg-default-100 border border-default-200","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1775:24",children:[e.jsx("div",{className:"text-xs text-foreground-400 mb-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1776:26",children:"Open Qty (qty)"}),e.jsx("div",{className:"font-semibold","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1777:26",children:T.openQty??0})]}),e.jsxs("div",{className:"p-3 rounded-md bg-default-100 border border-default-200","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1779:24",children:[e.jsx("div",{className:"text-xs text-foreground-400 mb-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1780:26",children:"Exited Qty (qty)"}),e.jsx("div",{className:"font-semibold","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1781:26",children:T.exitedQty??0})]}),e.jsxs("div",{className:"p-3 rounded-md bg-default-100 border border-default-200","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1783:24",children:[e.jsx("div",{className:"text-xs text-foreground-400 mb-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1784:26",children:"Avg. Exit (₹)"}),e.jsx("div",{className:"font-semibold","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1785:26",children:(null==(l=T.avgExitPrice)?void 0:l.toFixed(2))??"0.00"})]}),e.jsxs("div",{className:"p-3 rounded-md bg-default-100 border border-default-200","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1787:24",children:[e.jsx("div",{className:"text-xs text-foreground-400 mb-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1788:26",children:"Stock Move (₹)"}),e.jsx("div",{className:"font-semibold","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1789:26",children:(null==(c=T.stockMove)?void 0:c.toFixed(2))??"0.00"})]}),e.jsxs("div",{className:"p-3 rounded-md bg-default-100 border border-default-200","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1791:24",children:[e.jsx("div",{className:"text-xs text-foreground-400 mb-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1792:26",children:"SL (%)"}),e.jsxs("div",{className:"font-semibold","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1793:26",children:[(null==(x=T.slPercent)?void 0:x.toFixed(2))??"0.00","%"]})]}),e.jsxs("div",{className:"p-3 rounded-md bg-default-100 border border-default-200","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1795:24",children:[e.jsx("div",{className:"text-xs text-foreground-400 mb-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1796:26",children:"Reward/Risk (x)"}),e.jsx("div",{className:"font-semibold","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1797:26",children:(null==(h=T.rewardRisk)?void 0:h.toFixed(2))??"0.00"})]}),e.jsxs("div",{className:"p-3 rounded-md bg-default-100 border border-default-200","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1799:24",children:[e.jsx("div",{className:"text-xs text-foreground-400 mb-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1800:26",children:"Holding Days"}),e.jsx("div",{className:"font-semibold","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1801:26",children:T.holdingDays??0})]}),e.jsxs("div",{className:"p-3 rounded-md bg-default-100 border border-default-200","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1803:24",children:[e.jsx("div",{className:"text-xs text-foreground-400 mb-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1804:26",children:"Realised (₹)"}),e.jsx("div",{className:"font-semibold","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1805:26",children:(null==(_=T.realisedAmount)?void 0:_.toFixed(2))??"0.00"})]}),e.jsxs("div",{className:"p-3 rounded-md bg-default-100 border border-default-200","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1807:24",children:[e.jsx("div",{className:"text-xs text-foreground-400 mb-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1808:26",children:"P/L (₹)"}),e.jsx("div",{className:"font-semibold","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1809:26",children:(null==(j=T.plRs)?void 0:j.toFixed(2))??"0.00"})]}),e.jsxs("div",{className:"p-3 rounded-md bg-default-100 border border-default-200","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1811:24",children:[e.jsx("div",{className:"text-xs text-foreground-400 mb-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1812:26",children:"PF Impact (%)"}),e.jsxs("div",{className:"font-semibold","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1813:26",children:[(null==(g=T.pfImpact)?void 0:g.toFixed(2))??"0.00","%"]})]}),e.jsxs("div",{className:"p-3 rounded-md bg-default-100 border border-default-200","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1815:24",children:[e.jsx("div",{className:"text-xs text-foreground-400 mb-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1816:26",children:"Cumulative PF (%)"}),e.jsxs("div",{className:"font-semibold","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1817:26",children:[(null==(k=T.cummPf)?void 0:k.toFixed(2))??"0.00","%"]})]})]}),we.length>0&&e.jsx("div",{className:"mb-4 backdrop-blur-lg bg-white/5 rounded-lg p-2 border border-white/10 text-sm transform-gpu","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1823:24",children:we.map((t,a)=>e.jsxs("div",{className:"p-2 text-sm rounded-lg mb-1.5 flex items-center gap-2 backdrop-blur-md "+("error"===t.type?"bg-danger-500/10 border border-danger-500/20 text-danger-200 backdrop-blur-md":"bg-warning-500/10 border border-warning-500/20 text-warning-200 backdrop-blur-md"),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1825:28",children:[e.jsx(Q,{icon:"error"===t.type?"lucide:alert-circle":"lucide:alert-triangle",className:"error"===t.type?"text-danger-500":"text-warning-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:Icon:1833:30"}),e.jsx("span",{className:"text-sm","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:span:1837:30",children:t.message})]},a))}),"charts"===V?null:e.jsx("div",{ref:xe,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-[60vh] overflow-auto",style:{height:`${be.getTotalSize()}px`,position:"relative"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1306:6",children:be.getVirtualItems().map(t=>e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:t.size,transform:`translateY(${t.start}px)`},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:div:1315:10",children:De(Ce[t.index])},t.index))})]})},V)})}),e.jsx(w,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:Divider:1849:12"}),e.jsxs(u,{className:"border-t border-gray-200 dark:border-gray-700 py-2 px-4 bg-white/80 dark:bg-transparent","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:ModalFooter:1850:12",children:[e.jsx(a,{variant:"flat",onPress:()=>s(!1),className:"bg-white hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 border border-gray-300 dark:border-gray-600 h-8 min-w-20 text-xs text-gray-800 dark:text-gray-200","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:Button:1851:14",children:"Cancel"}),e.jsx(a,{color:"primary",onPress:ge,isDisabled:we.some(e=>"error"===e.type),className:"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white shadow-md shadow-blue-500/20 h-8 min-w-24 text-sm min-w-8 w-8 h-8 p-0 flex items-center justify-center bg-gray-800 hover:bg-gray-900 text-white shadow-sm rounded-full",isIconOnly:!0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:Button:1858:16",children:e.jsx(Q,{icon:"add"===y?"lucide:plus":"lucide:check",className:"h-4 w-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:Icon:1865:18"})})]})]})}}),e.jsx(qe,{isOpen:G,onOpenChange:Z,chartImage:Y,title:Y?(null==(C=de.beforeEntry)?void 0:C.id)===Y.id?"Before Entry Chart":"After Exit Chart":"Chart Image","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:ChartImageViewer:1876:6"}),e.jsx(Ve,{isOpen:X,onOpenChange:ee,initialChartImage:Y,initialTradeId:T.id,refreshTrigger:se,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-modal.tsx:UniversalChartViewer:1887:6"})]})});We.displayName="TradeModal";const Ke=({isOpen:t,onOpenChange:s,onDelete:r,tradeName:o})=>e.jsx(l,{isOpen:t,onOpenChange:s,size:"sm",backdrop:"blur",className:"bg-background/95 backdrop-blur-sm",motionProps:{variants:{enter:{opacity:1,scale:1,y:0,transition:{duration:.3,ease:[.16,1,.3,1]}},exit:{opacity:0,scale:.98,y:10,transition:{duration:.2,ease:[.16,1,.3,1]}}},initial:{opacity:0,scale:.98,y:10}},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\delete-confirm-modal.tsx:Modal:28:4",children:e.jsx(c,{className:"shadow-elegant","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\delete-confirm-modal.tsx:ModalContent:58:6",children:t=>e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"flex flex-col gap-1 pb-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\delete-confirm-modal.tsx:ModalHeader:61:12",children:e.jsx("h2",{className:"text-xl font-semibold bg-gradient-to-r from-danger-500 to-danger-600 bg-clip-text text-transparent","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\delete-confirm-modal.tsx:h2:62:14",children:"Confirm Delete"})}),e.jsx(w,{className:"opacity-50","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\delete-confirm-modal.tsx:Divider:66:12"}),e.jsx(m,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\delete-confirm-modal.tsx:ModalBody:67:12",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 py-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\delete-confirm-modal.tsx:div:68:14",children:[e.jsx(ae.div,{className:"w-16 h-16 rounded-full bg-danger-100 dark:bg-danger-900/30 flex items-center justify-center shadow-soft-sm",initial:{scale:.8,rotate:-10},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:400,damping:15},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\delete-confirm-modal.tsx:div:69:16",children:e.jsx(Q,{icon:"lucide:trash",className:"text-danger-500 text-2xl","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\delete-confirm-modal.tsx:Icon:79:18"})}),e.jsxs("div",{className:"text-center space-y-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\delete-confirm-modal.tsx:div:81:16",children:[e.jsxs("p",{className:"text-lg leading-relaxed","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\delete-confirm-modal.tsx:p:82:18",children:["Are you sure you want to delete the trade for"," ",e.jsx("span",{className:"font-semibold text-danger-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\delete-confirm-modal.tsx:span:84:20",children:o}),"?"]}),e.jsx("p",{className:"text-sm text-foreground-500 leading-relaxed","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\delete-confirm-modal.tsx:p:86:18",children:"This action cannot be undone and all associated data will be permanently removed."})]})]})}),e.jsx(w,{className:"opacity-50","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\delete-confirm-modal.tsx:Divider:92:12"}),e.jsxs(u,{className:"pt-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\delete-confirm-modal.tsx:ModalFooter:93:12",children:[e.jsx(a,{variant:"flat",onPress:t,className:"hover:bg-foreground-100 transition-colors duration-200","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\delete-confirm-modal.tsx:Button:94:14",children:"Cancel"}),e.jsx(ae.div,{whileHover:{scale:1.02},whileTap:{scale:.98},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\delete-confirm-modal.tsx:div:101:14",children:e.jsx(a,{color:"danger",onPress:r,className:"bg-gradient-to-r from-danger-500 to-danger-600 shadow-soft-sm hover:shadow-soft-md transition-all duration-200",startContent:e.jsx(Q,{icon:"lucide:trash",className:"text-lg opacity-90","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\delete-confirm-modal.tsx:Icon:110:20"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\delete-confirm-modal.tsx:Button:105:16",children:"Delete Trade"})})]})]})})}),Ge=[{key:"tradeNo",label:"Trade No.",required:!1},{key:"date",label:"Date",required:!0},{key:"name",label:"Stock Name",required:!0},{key:"setup",label:"Setup",required:!1},{key:"buySell",label:"Buy/Sell",required:!1},{key:"entry",label:"Entry Price",required:!1},{key:"sl",label:"Stop Loss",required:!1},{key:"tsl",label:"Trailing SL",required:!1},{key:"initialQty",label:"Initial Quantity",required:!1},{key:"pyramid1Price",label:"Pyramid 1 Price",required:!1},{key:"pyramid1Qty",label:"Pyramid 1 Qty",required:!1},{key:"pyramid1Date",label:"Pyramid 1 Date",required:!1},{key:"pyramid2Price",label:"Pyramid 2 Price",required:!1},{key:"pyramid2Qty",label:"Pyramid 2 Qty",required:!1},{key:"pyramid2Date",label:"Pyramid 2 Date",required:!1},{key:"exit1Price",label:"Exit 1 Price",required:!1},{key:"exit1Qty",label:"Exit 1 Qty",required:!1},{key:"exit1Date",label:"Exit 1 Date",required:!1},{key:"exit2Price",label:"Exit 2 Price",required:!1},{key:"exit2Qty",label:"Exit 2 Qty",required:!1},{key:"exit2Date",label:"Exit 2 Date",required:!1},{key:"exit3Price",label:"Exit 3 Price",required:!1},{key:"exit3Qty",label:"Exit 3 Qty",required:!1},{key:"exit3Date",label:"Exit 3 Date",required:!1},{key:"planFollowed",label:"Plan Followed",required:!1},{key:"exitTrigger",label:"Exit Trigger",required:!1},{key:"proficiencyGrowthAreas",label:"Growth Areas",required:!1},{key:"notes",label:"Notes",required:!1}],Je=e=>{if(null==e||""===e)return 0;if("number"==typeof e)return e;let t=String(e).trim();if("#DIV/0!"===t||"#N/A"===t||"#ERROR!"===t||"#VALUE!"===t||"#REF!"===t||"#NAME?"===t)return 0;if(/^\d+\.?\d*$/.test(t))return parseFloat(t);t=t.replace(/[₹$€£¥,\s%]/g,"").replace(/["']/g,"").replace(/[^\d.-]/g,""),/\d+,\d{1,2}$/.test(t)&&(t=t.replace(",","."));const a=parseFloat(t);return isNaN(a)?0:a},Ze=({isOpen:t,onOpenChange:o,onImport:n,portfolioSize:i=1e5,getPortfolioSize:_})=>{const[U,z]=$.useState("upload"),[N,S]=$.useState(null),[I,T]=$.useState({}),[P,M]=$.useState({}),[E,A]=$.useState([]),[F,O]=$.useState(0),[L,q]=$.useState(!1),[V,B]=$.useState(null),[Y,W]=$.useState("auto"),K=[{value:"auto",label:"Auto-detect (Recommended)",example:"Various formats",description:"Let the system automatically detect your date format"},{value:"iso",label:"ISO Format",example:"2024-01-15",description:"Year-Month-Day with dashes"},{value:"dmy_slash",label:"DD/MM/YYYY",example:"15/01/2024",description:"Day/Month/Year with slashes"},{value:"mdy_slash",label:"MM/DD/YYYY",example:"01/15/2024",description:"Month/Day/Year with slashes (US format)"},{value:"dmy_dash",label:"DD-MM-YYYY",example:"15-01-2024",description:"Day-Month-Year with dashes"},{value:"dmy_dot",label:"DD.MM.YYYY",example:"15.01.2024",description:"Day.Month.Year with dots"},{value:"dmy_text_full",label:"DD MMM YYYY",example:"24 Jul 2024",description:"Day Month Year with text month"},{value:"dmy_text_short",label:"DD MMM YY",example:"24 Jul 24",description:"Day Month Year (2-digit year) with text month"},{value:"dmy_text_no_year",label:"DD MMM",example:"24 Jul",description:"Day Month only (current year assumed)"},{value:"mdy_text_full",label:"MMM DD, YYYY",example:"Jul 24, 2024",description:"Month Day, Year with text month (US format)"},{value:"mdy_text_short",label:"MMM DD YY",example:"Jul 24 24",description:"Month Day Year (2-digit year) with text month"}],G={jan:0,january:0,feb:1,february:1,mar:2,march:2,apr:3,april:3,may:4,jun:5,june:5,jul:6,july:6,aug:7,august:7,sep:8,september:8,sept:8,oct:9,october:9,nov:10,november:10,dec:11,december:11},J=$.useCallback((e,t)=>{if(!e||"string"!=typeof e)return null;const a=String(e).trim();if(!a)return null;const s=t||Y;if("auto"!==s)try{let e;switch(s){case"iso":{const t=a.split(/[\/\-\.]/);if(3===t.length){const[a,s,r]=t.map(e=>parseInt(e,10));e=new Date(a,s-1,r)}else e=new Date(a);break}case"dmy_slash":case"dmy_dash":case"dmy_dot":{const t=a.split(/[\/\-\.]/);if(3===t.length){const[a,s,r]=t.map(e=>parseInt(e,10));e=new Date(r,s-1,a)}else e=new Date(a);break}case"mdy_slash":{const t=a.split(/[\/\-\.]/);if(3===t.length){const[a,s,r]=t.map(e=>parseInt(e,10));e=new Date(r,a-1,s)}else e=new Date(a);break}case"dmy_text_full":{const t=a.split(/\s+/);if(3===t.length){const s=parseInt(t[0],10),r=t[1].toLowerCase(),o=parseInt(t[2],10),n=G[r];e=void 0!==n?new Date(o,n,s):new Date(a)}else e=new Date(a);break}case"dmy_text_short":{const t=a.split(/\s+/);if(3===t.length){const s=parseInt(t[0],10),r=t[1].toLowerCase();let o=parseInt(t[2],10);o<=30?o+=2e3:o<100&&(o+=1900);const n=G[r];e=void 0!==n?new Date(o,n,s):new Date(a)}else e=new Date(a);break}case"dmy_text_no_year":{const t=a.split(/\s+/);if(2===t.length){const s=parseInt(t[0],10),r=t[1].toLowerCase(),o=(new Date).getFullYear(),n=G[r];e=void 0!==n?new Date(o,n,s):new Date(a)}else e=new Date(a);break}case"mdy_text_full":{const t=a.replace(",","").split(/\s+/);if(3===t.length){const s=t[0].toLowerCase(),r=parseInt(t[1],10),o=parseInt(t[2],10),n=G[s];e=void 0!==n?new Date(o,n,r):new Date(a)}else e=new Date(a);break}case"mdy_text_short":{const t=a.split(/\s+/);if(3===t.length){const s=t[0].toLowerCase(),r=parseInt(t[1],10);let o=parseInt(t[2],10);o<=30?o+=2e3:o<100&&(o+=1900);const n=G[s];e=void 0!==n?new Date(o,n,r):new Date(a)}else e=new Date(a);break}default:e=new Date(a)}if(!isNaN(e.getTime()))return e.toISOString().split("T")[0]}catch(d){}let r=new Date(a);if(!isNaN(r.getTime()))return r.toISOString().split("T")[0];const o=a.split(/\s+/);if(o.length>=2){const e=o[0],t=o[1],a=t.toLowerCase();if(void 0!==G[a]){const t=G[a],s=parseInt(e,10);if(3===o.length){let e=parseInt(o[2],10);if(e<=30?e+=2e3:e<100&&(e+=1900),r=new Date(e,t,s),!isNaN(r.getTime()))return r.toISOString().split("T")[0]}else if(2===o.length){const e=(new Date).getFullYear();if(r=new Date(e,t,s),!isNaN(r.getTime()))return r.toISOString().split("T")[0]}}const s=e.toLowerCase();if(void 0!==G[s]){const e=G[s],a=parseInt(t.replace(",",""),10);if(3===o.length){let t=parseInt(o[2],10);if(t<=30?t+=2e3:t<100&&(t+=1900),r=new Date(t,e,a),!isNaN(r.getTime()))return r.toISOString().split("T")[0]}}}const n=a.split(/[\/\-\.]/);if(3===n.length){const[e,t,a]=n.map(e=>parseInt(e,10));if(a>1900){if(r=new Date(a,t-1,e),!isNaN(r.getTime())&&e<=31&&t<=12)return r.toISOString().split("T")[0];if(r=new Date(a,e-1,t),!isNaN(r.getTime())&&t<=31&&e<=12)return r.toISOString().split("T")[0]}else if(e>1900&&(r=new Date(e,t-1,a),!isNaN(r.getTime())&&a<=31&&t<=12))return r.toISOString().split("T")[0]}return null},[Y]),ee=$.useCallback(e=>{const t=new Date(e.date),a=t.toLocaleString("default",{month:"short"}),s=t.getFullYear(),r=_?_(a,s):i,o=[{price:e.entry,qty:e.initialQty},...e.pyramid1Price&&e.pyramid1Qty?[{price:e.pyramid1Price,qty:e.pyramid1Qty}]:[],...e.pyramid2Price&&e.pyramid2Qty?[{price:e.pyramid2Price,qty:e.pyramid2Qty}]:[]].filter(e=>e.price>0&&e.qty>0),n=[...e.exit1Price&&e.exit1Qty?[{price:e.exit1Price,qty:e.exit1Qty,date:e.exit1Date||e.date}]:[],...e.exit2Price&&e.exit2Qty?[{price:e.exit2Price,qty:e.exit2Qty,date:e.exit2Date||e.date}]:[],...e.exit3Price&&e.exit3Qty?[{price:e.exit3Price,qty:e.exit3Qty,date:e.exit3Date||e.date}]:[]].filter(e=>e.price>0&&e.qty>0),d=o.reduce((e,t)=>e+t.qty,0),l=ne(o),c=je(l,d),p=_e(c,r),m=he(e.sl,e.entry),u=n.reduce((e,t)=>e+t.qty,0),x=Math.max(0,d-u),h=ie(n);let j=e.positionStatus||"Open";j=0===u?"Open":u>=d?"Closed":"Partial";const w=le(l,h,e.cmp,x,u,j,e.buySell),y=ce(e.cmp||h||e.entry,e.entry,e.sl,j,h,x,u,e.buySell),g=pe(e.date,n.length>0?n[n.length-1].date:e.date),f=xe(u,h),v=o.map(e=>({price:e.price,qty:e.qty})),k=n.map(e=>({price:e.price,qty:e.qty})),C=u>0?me(v,k,e.buySell):0,b=ue(C,r);return{...e,avgEntry:l,positionSize:c,allocation:p,slPercent:m,openQty:x,exitedQty:u,avgExitPrice:h,stockMove:w,rewardRisk:y,holdingDays:g,positionStatus:j,realisedAmount:f,plRs:C,pfImpact:b,cummPf:0,openHeat:0}},[i,_]),se=$.useCallback(e=>{const t={},a={},s=t=>{if(!N||t>=e.length)return!1;const a=N.rows.slice(0,10);let s=0;for(const e of a){const a=e[t];null!=a&&""!==String(a).trim()&&"#DIV/0!"!==String(a).trim()&&"#N/A"!==String(a).trim()&&s++}return s>=Math.max(1,Math.ceil(.3*a.length))};(()=>{const s=[];e.forEach((e,t)=>{"date"===e.toLowerCase().trim()&&s.push({header:e,index:t})}),s.length>1&&s.forEach((s,r)=>{var o,n;const d=s.index,i=d>0?null==(o=e[d-1])?void 0:o.toLowerCase().trim():"",l=d>1?null==(n=e[d-2])?void 0:n.toLowerCase().trim():"";0===r&&d<10?t.date||(t.date=s.header,a.date=95):i.includes("qty")&&(l.includes("exit-1")||l.includes("e1")||i.includes("exit"))?t.exit1Date||(t.exit1Date=s.header,a.exit1Date=90):i.includes("qty")&&(l.includes("exit-2")||l.includes("e2"))?t.exit2Date||(t.exit2Date=s.header,a.exit2Date=90):i.includes("qty")&&(l.includes("exit-3")||l.includes("e3"))?t.exit3Date||(t.exit3Date=s.header,a.exit3Date=90):i.includes("qty")&&l.includes("p-1")?t.pyramid1Date||(t.pyramid1Date=s.header,a.pyramid1Date=90):i.includes("qty")&&l.includes("p-2")&&(t.pyramid2Date||(t.pyramid2Date=s.header,a.pyramid2Date=90))})})();return[{prefix:"e1",fields:["exit1Price","exit1Qty","exit1Date"]},{prefix:"e2",fields:["exit2Price","exit2Qty","exit2Date"]},{prefix:"e3",fields:["exit3Price","exit3Qty","exit3Date"]},{prefix:"p1",fields:["pyramid1Price","pyramid1Qty","pyramid1Date"]},{prefix:"p2",fields:["pyramid2Price","pyramid2Qty","pyramid2Date"]}].forEach(r=>{const o=[];e.forEach((e,t)=>{const a=e.toLowerCase().trim().replace(/\s+/g," ").replace(/\n/g," ").replace(/[₹()]/g,"").replace(/\./g,"");a.includes(r.prefix.toLowerCase())&&(a.includes("price")||a.includes("rate")?o.push({header:e,index:t,type:"price"}):a.includes("qty")||a.includes("quantity")?o.push({header:e,index:t,type:"qty"}):(a.includes("date")||a.includes("dt"))&&o.push({header:e,index:t,type:"date"}))}),o.forEach(e=>{let o="";"price"===e.type?o=r.fields[0]:"qty"===e.type?o=r.fields[1]:"date"===e.type&&(o=r.fields[2]),o&&!t[o]&&s(e.index)&&(t[o]=e.header,a[o]=95,console.log("Sequential pattern mapped:",o,"to",e.header))})}),Object.entries({tradeNo:["trade no","trade number","trade id","id","sr no","serial","trade #","#","trade no."],date:["date","entry date","trade date","timestamp","entry dt","dt"],name:["name","stock","symbol","stock name","company","scrip","ticker","instrument"],setup:["setup","strategy","pattern","setup type","trade setup","setup name"],buySell:["buy/sell","buysell","side","action","transaction type","buy sell","direction","buy/ sell"],entry:["entry","entry price","buy price","price","entry rate","buy rate","entry (₹)","entry (rs)","entry(₹)"],avgEntry:["avg entry","avg. entry","average entry","avg entry (₹)","avg. entry (₹)","average entry (₹)"],sl:["sl","stop loss","stoploss","stop","sl price","stop price","sl (₹)","sl(₹)"],slPercent:["sl %","sl percent","sl percentage","stop loss %","stop loss percent"],tsl:["tsl","trailing sl","trailing stop","trail sl","trailing stop loss","tsl (₹)","tsl(₹)"],cmp:["cmp","current price","market price","ltp","last traded price","cmp (₹)","cmp(₹)"],initialQty:["qty","quantity","initial qty","shares","units","volume","size","initial qty","base qty"],pyramid1Price:["p1 price","p1 price (₹)","p1 price(₹)","pyramid 1 price","p-1 price","pyramid1 price","pyr1 price"],pyramid1Qty:["p1 qty","pyramid 1 qty","p-1 qty","pyramid1 qty","pyr1 qty"],pyramid1Date:["p1 date","pyramid 1 date","p-1 date","pyramid1 date","pyr1 date"],pyramid2Price:["p2 price","p2 price (₹)","p2 price(₹)","pyramid 2 price","p-2 price","pyramid2 price","pyr2 price"],pyramid2Qty:["p2 qty","pyramid 2 qty","p-2 qty","pyramid2 qty","pyr2 qty"],pyramid2Date:["p2 date","pyramid 2 date","p-2 date","pyramid2 date","pyr2 date"],positionSize:["pos. size","position size","pos size","position value","pos. value"],allocation:["allocation","allocation (%)","allocation(%)","allocation %","alloc %","alloc (%)"],exit1Price:["e1 price","e1 price (₹)","e1 price(₹)","exit 1 price","exit1 price","sell 1 price","exit price"],exit1Qty:["e1 qty","exit 1 qty","exit1 qty","sell 1 qty","exit qty"],exit1Date:["e1 date","exit 1 date","exit1 date","sell 1 date","exit date"],exit2Price:["e2 price","e2 price (₹)","e2 price(₹)","exit 2 price","exit2 price","sell 2 price"],exit2Qty:["e2 qty","exit 2 qty","exit2 qty","sell 2 qty"],exit2Date:["e2 date","exit 2 date","exit2 date","sell 2 date"],exit3Price:["e3 price","e3 price (₹)","e3 price(₹)","exit 3 price","exit3 price","sell 3 price"],exit3Qty:["e3 qty","exit 3 qty","exit3 qty","sell 3 qty"],exit3Date:["e3 date","exit 3 date","exit3 date","sell 3 date"],openQty:["open qty","open quantity","remaining qty","balance qty"],exitedQty:["exited qty","exited quantity","sold qty","closed qty"],avgExitPrice:["avg exit","avg. exit","average exit","avg exit (₹)","avg. exit (₹)","average exit (₹)"],stockMove:["stock move","stock move (%)","stock move(%)","stock move %","price move %"],openHeat:["open heat","open heat (%)","open heat(%)","open heat %","heat %"],rewardRisk:["r:r","reward:risk","reward risk","rr","r/r"],holdingDays:["holding days","days","hold days","duration"],positionStatus:["status","position status","trade status"],realisedAmount:["realized amount","realised amount","realized amt","realised amt"],plRs:["realized p/l","realised p/l","realized p/l (₹)","realised p/l (₹)","p/l","pnl"],pfImpact:["pf impact","pf impact (%)","pf impact(%)","pf impact %","portfolio impact %"],cummPf:["cumm. pf","cumm pf","cumm. pf (%)","cumm pf (%)","cumulative pf %"],planFollowed:["plan followed","plan followed?","followed plan"],exitTrigger:["exit trigger","trigger","exit reason"],proficiencyGrowthAreas:["growth areas","proficiency","improvement areas"],notes:["notes","comments","remarks","description","memo","observation","note"]}).forEach(([r,o])=>{if(t[r])return;let n="",d=0;e.forEach((e,t)=>{o.forEach(a=>{const r=((e,t)=>{const a=e.toLowerCase().trim(),s=t.toLowerCase().trim();if(a===s)return 100;if(a.includes(s)||s.includes(a))return 80;const r=a.replace(/[-_\s\n\r\/\(\)\.\?:₹%]/g,""),o=s.replace(/[-_\s\n\r\/\(\)\.\?:₹%]/g,"");if(r===o)return 95;if(r.includes(o)||o.includes(r))return 85;const n=a.replace(/\s+/g," ").replace(/\n/g," "),d=s.replace(/\s+/g," ").replace(/\n/g," ");if(n===d)return 90;if(n.includes(d)||d.includes(n))return 75;const i=a.split(/[-_\s\n\r\/\(\)\.\?:₹%]+/).filter(e=>e.length>0),l=s.split(/[-_\s\n\r\/\(\)\.\?:₹%]+/).filter(e=>e.length>0),c=i.filter(e=>l.includes(e));return c.length>0?c.length/Math.max(i.length,l.length)*60:0})(e,a);r>d&&r>=70&&s(t)&&(d=r,n=e)})}),n&&!Object.values(t).includes(n)&&(t[r]=n,a[r]=d,console.log("Mapped field:",r,"to column:",n,"with confidence:",d))}),{mapping:t,confidence:a}},[N]),re=$.useCallback(e=>{var t;B(null);const a=null==(t=e.name.split(".").pop())?void 0:t.toLowerCase();if("csv"===a)Ce.parse(e,{complete:t=>{try{if(t.errors&&t.errors.length,t.data&&t.data.length>0){const a=t.data[0],s=t.data.slice(1),r=a.filter(e=>e&&""!==String(e).trim()).map(e=>String(e).replace(/\n/g," ").replace(/\r/g," ").replace(/\s+/g," ").trim()),o=s.filter(e=>e.some(e=>null!=e&&""!==String(e).trim()&&"stock name"!==String(e).toLowerCase()));if(0===r.length)return void B("No valid columns found in the CSV file. Please check your file format.");if(0===o.length)return void B("No valid data rows found in the CSV file. Please check your file content.");S({headers:r,rows:o,fileName:e.name});const n=se(r);T(n.mapping),M(n.confidence);const d=Object.keys(n.mapping).some(e=>e.includes("Date")||"date"===e);z(d?"dateFormat":"mapping")}else B("The CSV file appears to be empty or invalid. Please check your file.")}catch(a){B("Failed to process the CSV file. Please check the file format and try again.")}},header:!1,skipEmptyLines:!0,transform:e=>"string"==typeof e?e.trim().replace(/\r\n/g,"\n").replace(/\r/g,"\n"):e,dynamicTyping:!1,fastMode:!0,error:e=>{B("CSV parsing failed: "+e.message)}});else if("xlsx"===a||"xls"===a){const t=new FileReader;t.onload=t=>{var a;try{const s=new Uint8Array(null==(a=t.target)?void 0:a.result),r=Z(s,{type:"array"}),o=r.SheetNames[0],n=r.Sheets[o],d=X.sheet_to_json(n,{header:1});if(d.length>0){const t=d[0],a=d.slice(1),s=t.filter(e=>e&&""!==String(e).trim()).map(e=>String(e).replace(/\n/g," ").replace(/\r/g," ").replace(/\s+/g," ").trim()),r=a.filter(e=>e.some(e=>null!=e&&""!==String(e).trim()&&"stock name"!==String(e).toLowerCase()));S({headers:s,rows:r,fileName:e.name});const o=se(s);T(o.mapping),M(o.confidence);const n=Object.keys(o.mapping).some(e=>e.includes("Date")||"date"===e);z(n?"dateFormat":"mapping")}}catch(s){B("Excel parsing failed: "+(s instanceof Error?s.message:"Unknown error"))}},t.readAsArrayBuffer(e)}},[se]),oe=$.useCallback(e=>{e.preventDefault(),q(!1);const t=Array.from(e.dataTransfer.files)[0];t&&(t.name.endsWith(".csv")||t.name.endsWith(".xlsx")||t.name.endsWith(".xls"))&&re(t)},[re]),de=$.useCallback(e=>{var t;const a=null==(t=e.target.files)?void 0:t[0];a&&re(a)},[re]),we=$.useCallback(e=>["name","entry","initialQty","date"].every(t=>{const a=e[t];return"string"==typeof a?!a||""===a.trim()||"stock name"===a.toLowerCase():"number"==typeof a?0===a:!a}),[]),ye=$.useCallback(()=>{if(!N)return;const e=[];let t=0;const a=N.rows.slice(0,10);for(const s of a){if(e.length>=5)break;const a={id:H(),tradeNo:"",date:(new Date).toISOString(),name:"",setup:"",buySell:"Buy",entry:0,avgEntry:0,sl:0,tsl:0,cmp:0,initialQty:0,pyramid1Price:0,pyramid1Qty:0,pyramid1Date:"",pyramid2Price:0,pyramid2Qty:0,pyramid2Date:"",positionSize:0,allocation:0,exit1Price:0,exit1Qty:0,exit1Date:"",exit2Price:0,exit2Qty:0,exit2Date:"",exit3Price:0,exit3Qty:0,exit3Date:"",openQty:0,exitedQty:0,avgExitPrice:0,stockMove:0,openHeat:0,rewardRisk:0,holdingDays:0,positionStatus:"Open",realisedAmount:0,plRs:0,pfImpact:0,cummPf:0,planFollowed:!0,exitTrigger:"",proficiencyGrowthAreas:"",baseDuration:"",slPercent:0,notes:""};Object.entries(I).forEach(([e,t])=>{const r=N.headers.indexOf(t);if(-1!==r&&void 0!==s[r]){const t=s[r];if(["entry","sl","tsl","pyramid1Price","pyramid2Price","exit1Price","exit2Price","exit3Price"].includes(e)){const s=Je(t);a[e]=s}else if(["initialQty","pyramid1Qty","pyramid2Qty","exit1Qty","exit2Qty","exit3Qty"].includes(e)){const s=Je(t);a[e]=Math.round(s)}else if("buySell"===e){const s=String(t||"").toLowerCase().trim();a[e]="b"===s||"buy"===s||"long"===s?"Buy":"s"===s||"sell"===s||"short"===s?"Sell":"Buy"}else if("planFollowed"===e){const s=String(t||"").toLowerCase();a[e]="true"===s||"yes"===s||"1"===s}else if(e.includes("Date")&&t){const s=J(t);a[e]=s||(new Date).toISOString().split("T")[0]}else if("setup"===e){const s=String(t||"").trim();s&&!/^\d+\.?\d*$/.test(s)?a[e]=s:a[e]=""}else a[e]=String(t||"")}}),we(a)||(t++,a.tradeNo=String(t),e.push(ee(a)))}A(e),z("preview")},[N,I,ee,we]),ge=$.useCallback(async()=>{if(!N)return;z("importing"),O(0),B(null);const e=[],t=N.rows.length;let a=0,s=0,r=[];const d=[];for(let o=0;o<t;o+=50)d.push(N.rows.slice(o,o+50));for(let o=0;o<d.length;o++){const n=d[o];for(const t of n){const o={id:H(),tradeNo:"",date:(new Date).toISOString(),name:"",setup:"",buySell:"Buy",entry:0,avgEntry:0,sl:0,tsl:0,cmp:0,initialQty:0,pyramid1Price:0,pyramid1Qty:0,pyramid1Date:"",pyramid2Price:0,pyramid2Qty:0,pyramid2Date:"",positionSize:0,allocation:0,exit1Price:0,exit1Qty:0,exit1Date:"",exit2Price:0,exit2Qty:0,exit2Date:"",exit3Price:0,exit3Qty:0,exit3Date:"",openQty:0,exitedQty:0,avgExitPrice:0,stockMove:0,openHeat:0,rewardRisk:0,holdingDays:0,positionStatus:"Open",realisedAmount:0,plRs:0,pfImpact:0,cummPf:0,planFollowed:!0,exitTrigger:"",proficiencyGrowthAreas:"",baseDuration:"",slPercent:0,notes:""};if(Object.entries(I).forEach(([e,n])=>{const d=N.headers.indexOf(n);if(-1!==d&&void 0!==t[d]){const n=t[d];if(["entry","sl","tsl","pyramid1Price","pyramid2Price","exit1Price","exit2Price","exit3Price"].includes(e)){const t=Je(n);o[e]=t}else if(["initialQty","pyramid1Qty","pyramid2Qty","exit1Qty","exit2Qty","exit3Qty"].includes(e)){const t=Je(n);o[e]=Math.round(t)}else if("buySell"===e){const t=String(n||"").toLowerCase().trim();o[e]="b"===t||"buy"===t||"long"===t?"Buy":"s"===t||"sell"===t||"short"===t?"Sell":"Buy"}else if("planFollowed"===e){const t=String(n||"").toLowerCase();o[e]="true"===t||"yes"===t||"1"===t}else if(e.includes("Date")&&n){const t=J(n);!t&&n&&r.push("Row "+(a+s+1)+': Invalid date "'+n+'" in '+e),o[e]=t||(new Date).toISOString().split("T")[0]}else if("setup"===e){const t=String(n||"").trim();t&&!/^\d+\.?\d*$/.test(t)?o[e]=t:o[e]=""}else o[e]=String(n||"")}}),we(o))s++;else{a++,o.tradeNo=String(a);const t=ee(o);e.push(t)}}const i=50*(o+1),l=Math.min(i/t*100,100);O(l),o<d.length-1&&await new Promise(e=>{window.requestIdleCallback?window.requestIdleCallback(e):setTimeout(e,0)})}if(r.length>0){const e="Import completed with "+r.length+" date parsing warnings. Some dates may have been set to today's date. Check the imported trades and update dates as needed.";B(e),setTimeout(()=>B(null),5e3)}n(e),O(100),setTimeout(()=>{o(!1),z("upload"),S(null),T({}),M({}),A([]),O(0)},1e3)},[N,I,n,o,ee,we]),fe=$.useCallback(()=>{z("upload"),S(null),T({}),M({}),A([]),O(0),B(null),W("auto")},[]);return $.useCallback(()=>{const e=se(["Trade\nNo.","Date","Name","Entry","Avg\nEntry","SL","TSL","Buy/\nSell","CMP","Setup","Base\n Duration","Initial\nQTY","Pyramid-1\nPrice","P-1\nQTY","P-1\nDate","Pyramid-2\nPrice","P-2\nQTY","P-2\nDate","Position\nSize","Allocation","SL","Exit-1\nPrice","Exit-1\nQty","Date","Exit-2\nPrice","Exit-2\nQty","Date","Exit-3\nPrice","Exit-3\nQty","Date","Open \nQTY","Exited\nQty","Avg.\nExit\nPrice","Stock\nMove","Open Heat","Reward:\nRisk","Holding\n Days","Position\nStatus","Realised\nAmount","P/L\nRs","PF\nImpact","Cumm\npf ","Plan \nFollowed?","Exit Trigger","Proficiency","Growth Areas","Note"]);return console.log("Total mappings:",Object.keys(e.mapping).length),console.log("High confidence mappings:",Object.entries(e.confidence).filter(([e,t])=>t>90).length),console.log("Medium confidence mappings:",Object.entries(e.confidence).filter(([e,t])=>t>=70&&t<=90).length),e},[se]),e.jsx(l,{isOpen:t,onOpenChange:o,size:"5xl",scrollBehavior:"inside",onClose:fe,classNames:{base:"max-h-[90vh]",body:"p-0",header:"border-b border-divider",footer:"border-t border-divider"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Modal:1501:4",children:e.jsx(c,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:ModalContent:1514:6",children:t=>e.jsxs(e.Fragment,{children:[e.jsxs(p,{className:"flex flex-col gap-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:ModalHeader:1517:12",children:[e.jsxs("div",{className:"flex items-center gap-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1518:14",children:[e.jsx(Q,{icon:"lucide:upload",className:"text-xl text-primary","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Icon:1519:16"}),e.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1520:16",children:[e.jsx("h2",{className:"text-lg font-semibold","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:h2:1521:18",children:"Import Trade Journal"}),e.jsx("p",{className:"text-sm text-foreground-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:p:1522:18",children:"Upload your Excel/CSV file and map columns to import trades"})]})]}),e.jsx("div",{className:"flex items-center gap-2 mt-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1529:14",children:["upload","dateFormat","mapping","preview","importing"].map((t,a)=>e.jsxs(R.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 "+(U===t?"text-primary":["upload","dateFormat","mapping","preview","importing"].indexOf(U)>a?"text-success":"text-foreground-400"),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1532:20",children:[e.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium "+(U===t?"bg-primary text-white":["upload","dateFormat","mapping","preview","importing"].indexOf(U)>a?"bg-success text-white":"bg-default-200"),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1536:22",children:["upload","dateFormat","mapping","preview","importing"].indexOf(U)>a?e.jsx(Q,{icon:"lucide:check",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Icon:1541:26"}):a+1}),e.jsx("span",{className:"text-xs font-medium capitalize","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:span:1545:22",children:"dateFormat"===t?"Date Format":t})]}),a<4&&e.jsx("div",{className:"w-8 h-0.5 "+(["upload","dateFormat","mapping","preview","importing"].indexOf(U)>a?"bg-success":"bg-default-200"),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1550:22"})]},t))})]}),e.jsx(m,{className:"p-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:ModalBody:1559:12",children:e.jsxs(te,{mode:"wait","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:AnimatePresence:1560:14",children:["upload"===U&&e.jsxs(ae.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1562:18",children:[e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center transition-colors "+(L?"border-primary bg-primary/5":"border-default-300"),onDragEnter:e=>{e.preventDefault(),q(!0)},onDragLeave:e=>{e.preventDefault(),q(!1)},onDragOver:e=>e.preventDefault(),onDrop:oe,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1569:20",children:[e.jsx(Q,{icon:"lucide:upload-cloud",className:"text-4xl text-foreground-400 mx-auto mb-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Icon:1584:22"}),e.jsx("h3",{className:"text-lg font-medium mb-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:h3:1585:22",children:"Upload your trade journal"}),e.jsx("p",{className:"text-foreground-500 mb-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:p:1586:22",children:"Drag and drop your Excel (.xlsx, .xls) or CSV file here, or click to browse"}),e.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:de,className:"hidden",id:"file-upload","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:input:1589:22"}),e.jsx("label",{htmlFor:"file-upload","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:label:1596:22",children:e.jsxs(a,{as:"span",color:"primary",variant:"flat","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Button:1597:24",children:[e.jsx(Q,{icon:"lucide:folder-open",className:"mr-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Icon:1598:26"}),"Choose File"]})})]}),V&&e.jsx(s,{className:"border-danger","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Card:1605:22",children:e.jsxs(r,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:CardBody:1606:24",children:[e.jsxs("div",{className:"flex items-center gap-2 text-danger","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1607:26",children:[e.jsx(Q,{icon:"lucide:alert-circle","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Icon:1608:28"}),e.jsx("span",{className:"font-medium","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:span:1609:28",children:"Upload Error"})]}),e.jsx("p",{className:"text-sm text-danger mt-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:p:1611:26",children:V}),e.jsx(a,{size:"sm",variant:"flat",color:"danger",className:"mt-3",onPress:()=>B(null),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Button:1612:26",children:"Try Again"})]})}),e.jsxs(s,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Card:1625:20",children:[e.jsxs(y,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:CardHeader:1626:22",children:[e.jsx(Q,{icon:"lucide:info",className:"text-primary mr-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Icon:1627:24"}),e.jsx("span",{className:"font-medium","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:span:1628:24",children:"Supported Formats"})]}),e.jsxs(r,{className:"pt-0","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:CardBody:1630:22",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1631:24",children:[e.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1632:26",children:[e.jsx("h4",{className:"font-medium mb-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:h4:1633:28",children:"Excel Files (.xlsx, .xls)"}),e.jsx("p",{className:"text-sm text-foreground-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:p:1634:28",children:"Upload your Excel trade journal. We'll read the first sheet automatically."})]}),e.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1638:26",children:[e.jsx("h4",{className:"font-medium mb-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:h4:1639:28",children:"CSV Files (.csv)"}),e.jsx("p",{className:"text-sm text-foreground-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:p:1640:28",children:"Upload comma-separated values file with trade data. Supports standard CSV format with headers."})]})]}),e.jsx(w,{className:"my-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Divider:1646:24"}),e.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1648:24",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1649:26",children:[e.jsx("h4",{className:"font-medium","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:h4:1650:28",children:"Sample CSV Format"}),e.jsx(a,{size:"sm",variant:"flat",color:"primary",startContent:e.jsx(Q,{icon:"lucide:download","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Icon:1655:44"}),onPress:()=>{const e=new Blob(["Name,Date,Entry,Quantity,Buy/Sell,Status,Exit Price,Exit Quantity,Setup,Notes,Pyramid Date\nRELIANCE,2024-01-15,2500,10,Buy,Closed,2650,10,Breakout,Good momentum trade,\nTCS,15/01/2024,3200,5,Buy,Open,,,Support,Waiting for breakout,\nINFY,17-01-2024,1450,15,Buy,Partial,1520,5,Pullback,Partial exit taken,\nHDFC,15.01.2024,1800,8,Buy,Closed,1950,8,Reversal,Target achieved,\nWIPRO,24 Jul 24,1200,12,Buy,Open,,,Breakout,Text date format,25 Jul\nBHARTI,15 Aug 2024,850,20,Buy,Closed,920,20,Support,Full text date,\nMARUTI,12 Sep,2800,3,Buy,Open,,,Pullback,Current year assumed,"],{type:"text/csv"}),t=window.URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="trade_journal_template.csv",document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(t)},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Button:1651:28",children:"Download Template"})]}),e.jsxs("div",{className:"bg-default-100 p-3 rounded-lg text-xs font-mono","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1682:26",children:[e.jsx("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1683:28",children:"Name,Date,Entry,Quantity,Buy/Sell,Status"}),e.jsx("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1684:28",children:"RELIANCE,2024-01-15,2500,10,Buy,Closed"}),e.jsx("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1685:28",children:"TCS,15/01/2024,3200,5,Buy,Open"}),e.jsx("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1686:28",children:"INFY,17-01-2024,1450,15,Buy,Partial"})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-800","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1689:26",children:[e.jsxs("h5",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2 flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:h5:1690:28",children:[e.jsx(Q,{icon:"lucide:calendar",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Icon:1691:30"}),"Supported Date Formats"]}),e.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1694:28",children:[e.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1695:30",children:["• ",e.jsx("strong",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:strong:1695:37",children:"Numeric:"})," 2024-01-15, 15/01/2024, 15-01-2024, 15.01.2024"]}),e.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1696:30",children:["• ",e.jsx("strong",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:strong:1696:37",children:"Text Month:"})," 24 Jul 2024, 24 Jul 24, 24 Jul"]}),e.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1697:30",children:["• ",e.jsx("strong",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:strong:1697:37",children:"US Format:"})," Jul 24, 2024, Jul 24 24"]}),e.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1698:30",children:["• ",e.jsx("strong",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:strong:1698:37",children:"Mixed:"})," Any combination of the above"]}),e.jsxs("div",{className:"text-blue-600 dark:text-blue-400 mt-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1699:30",children:[e.jsx(Q,{icon:"lucide:info",className:"w-3 h-3 inline mr-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Icon:1700:32"}),"The system will automatically detect and convert your date format"]})]})]})]})]})]})]},"upload"),"dateFormat"===U&&N&&e.jsx(ae.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1712:18",children:e.jsxs(s,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Card:1719:20",children:[e.jsx(y,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:CardHeader:1720:22",children:e.jsxs("div",{className:"flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1721:24",children:[e.jsx(Q,{icon:"lucide:calendar",className:"text-primary","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Icon:1722:26"}),e.jsx("span",{className:"font-medium","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:span:1723:26",children:"Select Date Format"})]})}),e.jsx(r,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:CardBody:1726:22",children:e.jsxs("div",{className:"space-y-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1727:24",children:[e.jsx("p",{className:"text-sm text-foreground-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:p:1728:26",children:"We detected date columns in your file. Please select the format your dates are in to ensure accurate parsing."}),N.rows.length>0&&e.jsxs("div",{className:"p-3 bg-default-50 rounded-lg","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1734:28",children:[e.jsx("h4",{className:"font-medium text-sm mb-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:h4:1735:30",children:"Sample dates from your file:"}),e.jsx("div",{className:"text-xs text-foreground-600 space-y-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1736:30",children:N.rows.slice(0,3).map((t,a)=>Object.entries(I).filter(([e])=>e.includes("Date")||"date"===e).map(([s,r])=>{const o=N.headers.indexOf(r),n=-1!==o?t[o]:"";return n?e.jsxs("div",{className:"font-mono","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1744:38",children:[s,": ",e.jsx("span",{className:"text-primary","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:span:1745:49",children:n})]},a+"-"+s):null})).flat().filter(Boolean).slice(0,5)})]}),e.jsx("div",{className:"space-y-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1755:26",children:K.map(t=>e.jsx("div",{className:"p-4 border-2 rounded-lg cursor-pointer transition-all "+(Y===t.value?"border-primary bg-primary/5":"border-default-200 hover:border-default-300"),onClick:()=>W(t.value),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1757:30",children:e.jsxs("div",{className:"flex items-center gap-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1766:32",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border-2 flex items-center justify-center "+(Y===t.value?"border-primary bg-primary":"border-default-300"),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1767:34",children:Y===t.value&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-white","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1773:38"})}),e.jsxs("div",{className:"flex-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1776:34",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1777:36",children:[e.jsx("span",{className:"font-medium","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:span:1778:38",children:t.label}),e.jsx("code",{className:"text-xs bg-default-100 px-2 py-1 rounded","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:code:1779:38",children:t.example})]}),e.jsx("p",{className:"text-xs text-foreground-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:p:1783:36",children:t.description})]})]})},t.value))}),e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-800","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1790:26",children:e.jsxs("div",{className:"flex items-start gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1791:28",children:[e.jsx(Q,{icon:"lucide:lightbulb",className:"w-4 h-4 text-blue-600 mt-0.5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Icon:1792:30"}),e.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1793:30",children:[e.jsx("strong",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:strong:1794:32",children:"Tip:"})," If you're unsure, choose \"Auto-detect\" and we'll try to figure out your date format automatically. You can always re-import if needed."]})]})})]})})]})},"dateFormat"),"mapping"===U&&N&&e.jsx(ae.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1805:18",children:e.jsxs(s,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Card:1812:20",children:[e.jsx(y,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:CardHeader:1813:22",children:e.jsxs("div",{className:"flex items-center justify-between w-full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1814:24",children:[e.jsxs("div",{className:"flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1815:26",children:[e.jsx(Q,{icon:"lucide:file-text",className:"text-primary","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Icon:1816:28"}),e.jsxs("span",{className:"font-medium","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:span:1817:28",children:["File: ",N.fileName]})]}),e.jsxs(j,{size:"sm",variant:"flat",color:"success","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Chip:1819:26",children:[N.rows.length," rows detected"]})]})}),e.jsxs(r,{className:"pt-0","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:CardBody:1824:22",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1825:24",children:[e.jsx("p",{className:"text-sm text-foreground-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:p:1826:26",children:"Map your file columns to our trade journal fields. We've made smart suggestions based on column names."}),e.jsx(a,{size:"sm",variant:"flat",color:"primary",startContent:e.jsx(Q,{icon:"lucide:zap","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Icon:1833:42"}),onPress:()=>{if(N){const e=se(N.headers);T(e.mapping),M(e.confidence)}},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Button:1829:26",children:"Smart Re-map"})]}),e.jsxs("div",{className:"mb-4 p-3 bg-default-50 rounded-lg","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1847:24",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1848:26",children:[e.jsx("span",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:span:1849:28",children:"Mapping Progress:"}),e.jsxs("div",{className:"flex gap-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1850:28",children:[e.jsxs("span",{className:"text-success","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:span:1851:30",children:[Object.keys(I).length," mapped"]}),e.jsxs("span",{className:"text-warning","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:span:1854:30",children:[Ge.filter(e=>e.required&&!I[e.key]).length," required missing"]}),e.jsxs("span",{className:"text-default-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:span:1857:30",children:[Ge.length-Object.keys(I).length," unmapped"]})]})]}),N&&e.jsxs("details",{className:"text-xs","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:details:1865:28",children:[e.jsxs("summary",{className:"cursor-pointer text-default-600 hover:text-default-800","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:summary:1866:30",children:["Debug: Show detected columns (",N.headers.length," total)"]}),e.jsx("div",{className:"mt-2 p-2 bg-default-100 rounded text-xs font-mono max-h-32 overflow-y-auto","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1869:30",children:e.jsx("div",{className:"grid grid-cols-2 gap-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1870:32",children:N.headers.map((t,a)=>e.jsxs("div",{className:"truncate","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1872:36",children:[e.jsxs("span",{className:"text-default-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:span:1873:38",children:[a,":"]})," ",t]},a))})})]})]}),e.jsx(g,{className:"max-h-96","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:ScrollShadow:1882:24",children:e.jsx("div",{className:"space-y-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1883:26",children:Ge.map(t=>e.jsxs("div",{className:"flex items-center gap-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1885:30",children:[e.jsx("div",{className:"min-w-[200px]","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1886:32",children:e.jsxs("div",{className:"flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1887:34",children:[e.jsx("span",{className:"text-sm font-medium","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:span:1888:36",children:t.label}),t.required&&e.jsx(j,{size:"sm",color:"danger",variant:"flat","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Chip:1890:38",children:"Required"}),P[t.key]&&e.jsxs(j,{size:"sm",variant:"flat",color:P[t.key]>=90?"success":P[t.key]>=70?"warning":"default","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Chip:1893:38",children:[P[t.key].toFixed(0),"% match"]})]})}),e.jsx("div",{className:"flex-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1906:32",children:e.jsx(x,{placeholder:"Select column or skip",size:"sm",selectedKeys:I[t.key]?[I[t.key]]:[],onSelectionChange:e=>{const a=Array.from(e)[0];a?(T(e=>({...e,[t.key]:a})),M(e=>{const a={...e};return delete a[t.key],a})):(T(e=>{const a={...e};return delete a[t.key],a}),M(e=>{const a={...e};return delete a[t.key],a}))},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Select:1907:34",children:N.headers.map(t=>e.jsx(h,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:SelectItem:1939:38",children:t},t))})})]},t.key))})})]})]})},"mapping"),"preview"===U&&E.length>0&&e.jsx(ae.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1955:18",children:e.jsxs(s,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Card:1962:20",children:[e.jsx(y,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:CardHeader:1963:22",children:e.jsxs("div",{className:"flex items-center justify-between w-full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1964:24",children:[e.jsxs("div",{className:"flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1965:26",children:[e.jsx(Q,{icon:"lucide:eye",className:"text-primary","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Icon:1966:28"}),e.jsx("span",{className:"font-medium","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:span:1967:28",children:"Preview Import"})]}),e.jsx(j,{size:"sm",variant:"flat",color:"primary","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Chip:1969:26",children:"Showing first 5 rows"})]})}),e.jsxs(r,{className:"pt-0","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:CardBody:1974:22",children:[e.jsxs("div",{className:"mb-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1975:24",children:[e.jsx("p",{className:"text-sm text-foreground-500 mb-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:p:1976:26",children:"Review the mapped data before importing. Check if the values look correct."}),e.jsx("div",{className:"mb-3 p-3 bg-default-50 rounded-lg","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1981:26",children:e.jsxs("details",{className:"text-sm","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:details:1982:28",children:[e.jsxs("summary",{className:"cursor-pointer font-medium text-default-700 hover:text-default-900 mb-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:summary:1983:30",children:["📋 Column Mapping Summary (",Object.keys(I).length," fields mapped)"]}),e.jsx("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-2 text-xs max-h-32 overflow-y-auto","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1986:30",children:Object.entries(I).map(([t,a])=>e.jsxs("div",{className:"flex justify-between p-2 bg-white rounded border","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1988:34",children:[e.jsxs("span",{className:"font-medium text-primary","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:span:1989:36",children:[t,":"]}),e.jsx("span",{className:"text-default-600 truncate ml-2",title:a,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:span:1990:36",children:a})]},t))})]})}),e.jsxs("div",{className:"space-y-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1997:26",children:[e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-primary/10 rounded-lg","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:1998:28",children:[e.jsx(Q,{icon:"lucide:calculator",className:"text-primary","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Icon:1999:30"}),e.jsx("span",{className:"text-sm text-primary font-medium","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:span:2000:30",children:"Auto-calculated fields (Avg Entry, Position Size, Allocation %, P/L, etc.) are highlighted in blue"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-warning/10 rounded-lg","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:2004:28",children:[e.jsx(Q,{icon:"lucide:info",className:"text-warning","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Icon:2005:30"}),e.jsx("span",{className:"text-sm text-warning font-medium","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:span:2006:30",children:"CMP values from CSV will be imported as-is (no auto-fetching)"})]})]})]}),e.jsx(g,{className:"max-h-96","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:ScrollShadow:2013:24",children:e.jsxs(f,{"aria-label":"Preview table",className:"min-w-full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Table:2014:26",children:[e.jsxs(v,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:TableHeader:2015:28",children:[e.jsx(k,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:TableColumn:2016:30",children:"Name"}),e.jsx(k,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:TableColumn:2017:30",children:"Date"}),e.jsx(k,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:TableColumn:2018:30",children:"Entry"}),e.jsx(k,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:TableColumn:2019:30",children:"Avg Entry"}),e.jsx(k,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:TableColumn:2020:30",children:"Qty"}),e.jsx(k,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:TableColumn:2021:30",children:"Position Size"}),e.jsx(k,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:TableColumn:2022:30",children:"Allocation %"}),e.jsx(k,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:TableColumn:2023:30",children:"Status"}),e.jsx(k,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:TableColumn:2024:30",children:"P/L"})]}),e.jsx(C,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:TableBody:2026:28",children:E.map((t,a)=>{var s,r,o,n,d;return e.jsxs(b,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:TableRow:2028:32",children:[e.jsx(D,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:TableCell:2029:34",children:t.name||"-"}),e.jsx(D,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:TableCell:2030:34",children:t.date?new Date(t.date).toLocaleDateString():"-"}),e.jsxs(D,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:TableCell:2033:34",children:["₹",(null==(s=t.entry)?void 0:s.toFixed(2))||"0.00"]}),e.jsx(D,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:TableCell:2034:34",children:e.jsxs("span",{className:"text-primary font-medium","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:span:2035:36",children:["₹",(null==(r=t.avgEntry)?void 0:r.toFixed(2))||"0.00"]})}),e.jsx(D,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:TableCell:2039:34",children:t.initialQty||0}),e.jsx(D,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:TableCell:2040:34",children:e.jsxs("span",{className:"text-primary font-medium","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:span:2041:36",children:["₹",(null==(o=t.positionSize)?void 0:o.toLocaleString())||"0"]})}),e.jsx(D,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:TableCell:2045:34",children:e.jsxs("span",{className:"text-primary font-medium","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:span:2046:36",children:[(null==(n=t.allocation)?void 0:n.toFixed(2))||"0.00","%"]})}),e.jsx(D,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:TableCell:2050:34",children:e.jsx(j,{size:"sm",variant:"flat",color:"Open"===t.positionStatus?"warning":"Closed"===t.positionStatus?"success":"primary","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Chip:2051:36",children:t.positionStatus})}),e.jsx(D,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:TableCell:2058:34",children:e.jsxs("span",{className:t.plRs>=0?"text-success":"text-danger","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:span:2059:36",children:["₹",(null==(d=t.plRs)?void 0:d.toFixed(2))||"0.00"]})})]},a)})})]})})]})]})},"preview"),"importing"===U&&e.jsx(ae.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:2074:18",children:e.jsx(s,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Card:2081:20",children:e.jsxs(r,{className:"text-center py-12","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:CardBody:2082:22",children:[e.jsx(Q,{icon:"lucide:loader-2",className:"text-4xl text-primary mx-auto mb-4 animate-spin","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Icon:2083:24"}),e.jsx("h3",{className:"text-lg font-medium mb-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:h3:2084:24",children:"Importing Trades"}),e.jsx("p",{className:"text-foreground-500 mb-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:p:2087:24",children:F<100?"Processing trades... "+Math.round(F)+"%":"Finalizing import..."}),e.jsx("div",{className:"space-y-3 mb-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:2093:24",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-primary/10 rounded-lg","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:2094:26",children:[e.jsx(Q,{icon:"lucide:zap",className:"text-primary","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Icon:2095:28"}),e.jsx("span",{className:"text-sm text-primary font-medium","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:span:2096:28",children:"Using optimized import - calculations will complete in background"})]})}),e.jsx(d,{value:F,className:"max-w-md mx-auto",color:"primary",showValueLabel:!0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Progress:2101:24"})]})})},"importing")]})}),e.jsx(u,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:ModalFooter:2114:12",children:e.jsxs("div",{className:"flex justify-between w-full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:2115:14",children:[e.jsx("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:2116:16",children:"upload"!==U&&"importing"!==U&&e.jsx(a,{variant:"light",onPress:()=>{"dateFormat"===U?z("upload"):"mapping"===U?z("dateFormat"):"preview"===U&&z("mapping")},startContent:e.jsx(Q,{icon:"lucide:arrow-left","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Icon:2125:36"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Button:2118:20",children:"Back"})}),e.jsxs("div",{className:"flex gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:div:2132:16",children:[e.jsx(a,{variant:"light",onPress:t,isDisabled:"importing"===U,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Button:2133:18",children:"Cancel"}),"dateFormat"===U&&e.jsx(a,{color:"primary",onPress:()=>z("mapping"),endContent:e.jsx(Q,{icon:"lucide:arrow-right","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Icon:2141:34"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Button:2138:20",children:"Continue to Mapping"}),"mapping"===U&&e.jsx(a,{color:"primary",onPress:ye,isDisabled:Ge.filter(e=>e.required).some(e=>!I[e.key]),endContent:e.jsx(Q,{icon:"lucide:arrow-right","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Icon:2152:34"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Button:2148:20",children:"Preview"}),"preview"===U&&e.jsxs(a,{color:"success",onPress:ge,endContent:e.jsx(Q,{icon:"lucide:upload","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Icon:2162:34"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TradeUploadModal.tsx:Button:2159:20",children:["Import ",null==N?void 0:N.rows.length," Trades"]})]})]})})]})})})};async function Xe(e){try{return await se.getMiscData(`misc_${e}`)}catch(t){return null}}async function et(e,t){try{return await se.saveMiscData(`misc_${e}`,t)}catch(a){return!1}}const tt=be,at=e=>De(e).replace("₹",""),st=R.memo(function({title:o="Trade Journal",statsTitle:n={totalTrades:"Total Trades",openPositions:"Open Positions",winRate:"Win Rate",totalPL:"Total P/L"},toggleFullscreen:d,isFullscreen:l}){const{trades:c,originalTrades:p,addTrade:m,updateTrade:u,deleteTrade:x,bulkImportTrades:h,isLoading:_,isRecalculating:j,searchQuery:w,setSearchQuery:y,statusFilter:g,setStatusFilter:P,sortDescriptor:M,setSortDescriptor:E,visibleColumns:A,setVisibleColumns:F,getAccountingAwareValues:O}=re(),{portfolioSize:L,getPortfolioSize:q}=oe(c),{accountingMethod:V}=we(),B="cash"===V,[H,K]=R.useState(null),[G,J]=R.useState(new Map),Z=R.useMemo(()=>0===G.size?c:c.map(e=>{const t=G.get(e.id);return t?{...e,...t}:e}),[c,G]),se=Ue(Z);$.useMemo(()=>{let e=Z;if(B){const t=new Set;e=Z.filter(e=>{const a=e.id.split("_exit_")[0];return!t.has(a)&&(t.add(a),!0)})}const t=e.filter(e=>"Open"===e.positionStatus||"Partial"===e.positionStatus);e.filter(e=>"Closed"===e.positionStatus);const a=se.tradesWithAccountingPL,s=a.filter(e=>e.accountingPL>0);return{totalTrades:e.length,openPositionsCount:t.length,winRate:a.length>0?s.length/a.length*100:0,totalPL:a.reduce((e,t)=>e+(t.accountingPL||0),0)}},[Z,B,se]);const ne=R.useCallback((e,t)=>{Oe(e),Ye(t),Be(!0)},[]),de=$.useCallback(()=>{const e=c.length>0?Math.max(...c.map(e=>Number(e.tradeNo)).filter(e=>!isNaN(e))):0,t={id:`trade_${(new Date).getTime()}_${Math.random()}`,tradeNo:String(e+1),date:(new Date).toISOString(),name:"",setup:"",buySell:"Buy",entry:0,avgEntry:0,sl:0,tsl:0,cmp:0,initialQty:0,pyramid1Price:0,pyramid1Qty:0,pyramid1Date:"",pyramid2Price:0,pyramid2Qty:0,pyramid2Date:"",positionSize:0,allocation:0,exit1Price:0,exit1Qty:0,exit1Date:"",exit2Price:0,exit2Qty:0,exit2Date:"",exit3Price:0,exit3Qty:0,exit3Date:"",openQty:0,exitedQty:0,avgExitPrice:0,stockMove:0,openHeat:0,rewardRisk:0,holdingDays:0,positionStatus:"Open",realisedAmount:0,plRs:0,pfImpact:0,cummPf:0,planFollowed:!0,exitTrigger:"",proficiencyGrowthAreas:"",baseDuration:"",slPercent:0,notes:"",_cmpAutoFetched:!1,chartAttachments:void 0};m(t)},[m,c]),{isOpen:ie,onOpen:le,onOpenChange:ce}=U(),{isOpen:pe,onOpen:ue,onOpenChange:xe}=U(),{isOpen:_e,onOpen:je,onOpenChange:be}=U(),{isOpen:De,onOpen:Ne,onOpenChange:Se}=U(),[Ie,Te]=R.useState(null),[Pe,Me]=R.useState(1),[Ee,Ae]=R.useState(new Map),[Fe,$e]=R.useState(!1),[Re,Oe]=R.useState(null),[Le,Be]=R.useState(!1),[He,Ye]=R.useState(""),[Ge,Je]=R.useState(!1),[Xe,et]=R.useState(0),[st,lt]=R.useState(!1),ct=R.useMemo(()=>{const e=c.length;return e<500?[10,25,50]:e<2e3?[25,50,100]:[50,100,200]},[c.length]),[ut,xt]=R.useState(10),[_t,jt]=R.useState(!1);R.useEffect(()=>{(async()=>{try{const e=await W("tradeJournal_rowsPerPage",10,e=>parseInt(e,10)),t=c.length<500?[10,25,50]:c.length<2e3?[25,50,100]:[50,100,200];xt(t.includes(e)?e:10)}catch(e){xt(10)}finally{jt(!0)}})()},[c.length]),R.useEffect(()=>{_t&&Y("tradeJournal_rowsPerPage",ut.toString())},[ut,_t]),R.useEffect(()=>{if(!ct.includes(ut)){const e=ct.reduce((e,t)=>Math.abs(t-ut)<Math.abs(e-ut)?t:e);xt(e)}},[ct,ut]);const[vt,kt]=R.useState(()=>c.length<100?c.length:Math.min(100,c.length)),[Ct,bt]=R.useState(!1);R.useEffect(()=>{c.length<=vt&&kt(c.length)},[c.length,vt]);const Dt=$.useCallback(()=>{bt(!0),setTimeout(()=>{kt(e=>Math.min(e+50,c.length)),bt(!1)},300)},[c.length]),Ut=Z.length>500,zt=Ut?1:Math.ceil(Z.length/ut),Nt=R.useMemo(()=>{let e;if(Ut)e=Z.slice(0,vt);else{const t=(Pe-1)*ut,a=t+ut;e=Z.slice(t,a)}return e.map(e=>{const t=Ee.get(e.id);return t?{...e,...t}:e})},[Pe,Z,ut,Ut,vt,Ee]),St=R.useMemo(()=>Nt.map(e=>({id:e.id,data:e,key:`${e.id}-${e.tradeNo}-${e.positionStatus}`})),[Nt]),It=R.useCallback(e=>{R.startTransition(()=>{Me(e)})},[Me]),[Tt,Pt]=R.useState(!1);R.useEffect(()=>{if(!_&&c.length>0&&!Tt){(()=>{"requestIdleCallback"in window?requestIdleCallback(()=>{Pt(!0)},{timeout:1e3}):setTimeout(()=>{Pt(!0)},100)})()}},[_,c.length,Tt]);const Mt=R.useMemo(()=>[{key:"tradeNo",label:"Trade No.",sortable:!0},{key:"date",label:"Date",sortable:!0},{key:"name",label:"Name"},{key:"setup",label:"Setup"},{key:"buySell",label:"Buy/Sell",sortable:!0},{key:"entry",label:"Entry (₹)",sortable:!0},{key:"avgEntry",label:"Avg. Entry (₹)",sortable:!0},{key:"sl",label:"SL (₹)",sortable:!0},{key:"slPercent",label:"SL %",sortable:!0},{key:"tsl",label:"TSL (₹)",sortable:!0},{key:"cmp",label:"CMP (₹)",sortable:!0},{key:"initialQty",label:"Initial Qty",sortable:!0},{key:"pyramid1Price",label:"P1 Price (₹)",sortable:!0},{key:"pyramid1Qty",label:"P1 Qty",sortable:!0},{key:"pyramid1Date",label:"P1 Date",sortable:!0},{key:"pyramid2Price",label:"P2 Price (₹)",sortable:!0},{key:"pyramid2Qty",label:"P2 Qty",sortable:!0},{key:"pyramid2Date",label:"P2 Date",sortable:!0},{key:"positionSize",label:"Pos. Size",sortable:!0},{key:"allocation",label:"Allocation (%)",sortable:!0},{key:"exit1Price",label:"E1 Price (₹)",sortable:!0},{key:"exit1Qty",label:"E1 Qty",sortable:!0},{key:"exit1Date",label:"E1 Date",sortable:!0},{key:"exit2Price",label:"E2 Price (₹)",sortable:!0},{key:"exit2Qty",label:"E2 Qty",sortable:!0},{key:"exit2Date",label:"E2 Date",sortable:!0},{key:"exit3Price",label:"E3 Price (₹)",sortable:!0},{key:"exit3Qty",label:"E3 Qty",sortable:!0},{key:"exit3Date",label:"E3 Date",sortable:!0},{key:"openQty",label:"Open Qty",sortable:!0},{key:"exitedQty",label:"Exited Qty",sortable:!0},{key:"avgExitPrice",label:"Avg. Exit (₹)",sortable:!0},{key:"stockMove",label:"Stock Move (%)",sortable:!0},{key:"openHeat",label:"Open Heat (%)",sortable:!0},{key:"rewardRisk",label:"R:R",sortable:!0},{key:"holdingDays",label:"Holding Days",sortable:!0},{key:"positionStatus",label:"Status",sortable:!0},{key:"realisedAmount",label:"Realized Amount",sortable:!0},{key:"plRs",label:"Realized P/L (₹)",sortable:!0},{key:"pfImpact",label:"PF Impact (%)",sortable:!0},{key:"cummPf",label:"Cumm. PF (%)",sortable:!0},{key:"planFollowed",label:"Plan Followed",sortable:!0},{key:"exitTrigger",label:"Exit Trigger"},{key:"proficiencyGrowthAreas",label:"Growth Areas"},{key:"chartAttachments",label:"Charts",sortable:!1},{key:"actions",label:"Actions",sortable:!1},{key:"unrealizedPL",label:"Unrealized P/L",sortable:!1},{key:"notes",label:"Notes",sortable:!1}],[]),Et=R.useMemo(()=>Mt.filter(e=>A.includes(e.key)),[Mt,A]),At=$.useCallback(e=>{h(e)},[h]),Ft=["avgEntry","positionSize","allocation","openQty","exitedQty","avgExitPrice","stockMove","slPercent","openHeat","rewardRisk","holdingDays","realisedAmount","plRs","pfImpact","cummPf"],$t=e=>!Ft.includes(e),Rt=R.useCallback((e,t=0)=>{if(!q)return L;let a=e.date;if("cash"===V&&t>0){const t=[e.exit1Date,e.exit2Date,e.exit3Date].filter(e=>e&&""!==e.trim()).sort();t.length>0&&(a=t[t.length-1])}const s=new Date(a),r=s.toLocaleString("default",{month:"short"}),o=s.getFullYear();return q(r,o)},[q,L,V]);$.useRef(null),$.useRef(new Map);const Qt=R.useCallback(async(e,t,a)=>{var s,r,o;try{if(!$t(t))return;const d=c.find(t=>t.id===e);if(!d)return;let i=a;"number"==typeof d[t]?(i=Number(a)||0,"positionSize"===t&&(i=Math.round(i))):t.endsWith("Date")&&a?i=new Date(a).toISOString():"planFollowed"===t&&(i=Boolean(a));const l={...d,[t]:i};if(l._userEditedFields||(l._userEditedFields=[]),l._userEditedFields.includes(t)||l._userEditedFields.push(t),"name"===t&&i)try{let e;e=await Qe(i);const t=null==(r=null==(s=null==e?void 0:e.data)?void 0:s.ticks)?void 0:r[i.toUpperCase()];if(t&&t.length>0){const e=t[t.length-1][4];(0===d.cmp||e>0)&&(l.cmp=e,l._cmpAutoFetched=!0)}else 0===d.cmp&&(l.cmp=0,l._cmpAutoFetched=!1)}catch(n){0===d.cmp&&(l.cmp=0,l._cmpAutoFetched=!1)}if("cmp"===t&&(l._cmpAutoFetched=!1),["entry","sl","tsl","initialQty","pyramid1Qty","pyramid2Qty","exit1Price","exit2Price","exit3Price","exit1Qty","exit2Qty","exit3Qty","exit1Date","exit2Date","exit3Date","cmp","buySell","positionStatus"].includes(t)){const e=[{price:l.entry,qty:l.initialQty},{price:l.pyramid1Price,qty:l.pyramid1Qty},{price:l.pyramid2Price,qty:l.pyramid2Qty}].filter(e=>e.price>0&&e.qty>0),a=e.reduce((e,t)=>e+t.qty,0),s=e.reduce((e,t)=>e+t.price*t.qty,0);l.avgEntry=a>0?s/a:l.entry;const r=[{price:l.exit1Price,qty:l.exit1Qty,date:l.exit1Date},{price:l.exit2Price,qty:l.exit2Qty,date:l.exit2Date},{price:l.exit3Price,qty:l.exit3Qty,date:l.exit3Date}].filter(e=>e.price>0&&e.qty>0&&e.date),n=r.reduce((e,t)=>e+t.qty,0),i=r.reduce((e,t)=>e+t.price*t.qty,0),c=n>0?i/n:0;l.exitedQty=n,l.avgExitPrice=c,l.openQty=a-n,l.positionSize=s;const p=q?(()=>{const e=new Date(l.date),t=e.toLocaleString("default",{month:"short"}),a=e.getFullYear();return q(t,a)})():L;if(l.allocation=p>0?s/p*100:0,n>0){const t=e.map(e=>({price:e.price,qty:e.qty})),a=r.map(e=>({price:e.price,qty:e.qty}));l.plRs=me(t,a,l.buySell),l.realisedAmount=i}else l.plRs=0,l.realisedAmount=0;const m=Rt(l,n);l.pfImpact=m>0?l.plRs/m*100:0;const u=null==(o=d._userEditedFields)?void 0:o.includes("positionStatus");if("positionStatus"!==t&&!u){const e=l.openQty<=0&&n>0?"Closed":n>0&&l.openQty>0?"Partial":"Open";e!==l.positionStatus&&(l.positionStatus=e)}l.openHeat=ye(l,p,q),l.sl>0&&l.avgEntry>0&&(l.slPercent=Math.abs((l.sl-l.avgEntry)/l.avgEntry*100)),l.cmp>0&&l.avgEntry>0&&(l.stockMove="Buy"===l.buySell?(l.cmp-l.avgEntry)/l.avgEntry*100:(l.avgEntry-l.cmp)/l.avgEntry*100)}Ae(a=>{const s=new Map(a),r={...s.get(e)||{},[t]:i,...void 0!==l._userEditedFields?{_userEditedFields:l._userEditedFields}:{},...void 0!==l.avgEntry?{avgEntry:l.avgEntry}:{},...void 0!==l.exitedQty?{exitedQty:l.exitedQty}:{},...void 0!==l.avgExitPrice?{avgExitPrice:l.avgExitPrice}:{},...void 0!==l.openQty?{openQty:l.openQty}:{},...void 0!==l.positionSize?{positionSize:l.positionSize}:{},...void 0!==l.allocation?{allocation:l.allocation}:{},...void 0!==l.plRs?{plRs:l.plRs}:{},...void 0!==l.realisedAmount?{realisedAmount:l.realisedAmount}:{},...void 0!==l.pfImpact?{pfImpact:l.pfImpact}:{},...void 0!==l.positionStatus?{positionStatus:l.positionStatus}:{},...void 0!==l.openHeat?{openHeat:l.openHeat}:{},...void 0!==l.slPercent?{slPercent:l.slPercent}:{},...void 0!==l.stockMove?{stockMove:l.stockMove}:{},...void 0!==l._cmpAutoFetched?{_cmpAutoFetched:l._cmpAutoFetched}:{}};return s.set(e,r),s}),u(l,()=>{Ae(t=>{const a=new Map(t);return a.delete(e),a})})}catch(d){Ae(t=>{const a=new Map(t);return a.delete(e),a})}},[c,$t,L,q,u,Rt]),Ot=R.useCallback(()=>Mt.filter(e=>"actions"!==e.key&&A.includes(e.key)&&$t(e.key)).map(e=>e.key),[A,$t,Mt]),[Lt,qt]=R.useState(null),Vt=R.useCallback(()=>{const e=Ot(),t=[];return Z.forEach((a,s)=>{e.forEach((e,r)=>{t.push({tradeId:a.id,field:e,rowIndex:s,colIndex:r})})}),t},[Z,Ot]),Bt=R.useCallback(e=>{const t=Vt();if(0===t.length)return;let a=0;if(Lt){const s=t.findIndex(e=>e.rowIndex===Lt.row&&e.colIndex===Lt.col);"next"===e?a=(s+1)%t.length:(a=s-1,a<0&&(a=t.length-1))}const s=t[a];qt({row:s.rowIndex,col:s.colIndex}),setTimeout(()=>{const e=document.querySelector(`[data-trade-id="${s.tradeId}"][data-field="${s.field}"]`);if(e){e.focus(),e.scrollIntoView({behavior:"smooth",block:"nearest"});const t=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});e.dispatchEvent(t);const a=new KeyboardEvent("keydown",{key:"Enter",bubbles:!0,cancelable:!0});e.dispatchEvent(a)}},0)},[Lt,Vt]);R.useEffect(()=>{const e=e=>{"Tab"===e.key&&(e.preventDefault(),Bt(e.shiftKey?"prev":"next"))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[Bt]);const Ht=R.useCallback(e=>{if("Tab"!==e.key)return;const t=document.activeElement;if(!t)return;const a=t.closest("[data-editable-cell]");if(!a)return;e.preventDefault();const s=a.getAttribute("data-trade-id"),r=a.getAttribute("data-field");if(!s||!r)return;const o=Ot(),n=o.indexOf(r);if(-1===n)return;let d,i;const l=Nt.findIndex(e=>e.id===s);if(e.shiftKey)if(n>0)d=n-1,i=l;else{if(!(l>0))return;d=o.length-1,i=l-1}else if(n<o.length-1)d=n+1,i=l;else{if(!(l<Nt.length-1))return;d=0,i=l+1}const c=Nt[i],p=o[d];setTimeout(()=>{const e=document.querySelector(`[data-editable-cell][data-trade-id="${c.id}"][data-field="${p}"]`);if(e){e.focus();const t=e.querySelector("input");t&&t.select()}},0)},[Ot,Nt]);R.useEffect(()=>(document.addEventListener("keydown",Ht),()=>{document.removeEventListener("keydown",Ht)}),[Ht]);const Yt=(e,t)=>{if(null==e||""===e)return"-";if(t.endsWith("Date"))return tt(e);if(["entry","avgEntry","sl","tsl","cmp","pyramid1Price","pyramid2Price","exit1Price","exit2Price","exit3Price","avgExitPrice","realisedAmount","plRs"].includes(t))return"₹"+at(Number(e));if(["slPercent","openHeat","allocation","pfImpact","cummPf","stockMove"].includes(t))return`${Number(e).toFixed(2)}%`;if("positionSize"===t)return String(Math.round(Number(e)));if("rewardRisk"===t){const t=Number(e);if(t>0){return`${t%1==0?t.toFixed(0):t.toFixed(2)}R`}return"-"}return"planFollowed"===t?e?"Yes":"No":String(e)},Wt=(e,t)=>{if("plRs"!==t)return"";const a=Number(e);return a<0?"text-danger":a>0?"text-success":""},Kt=R.useMemo(()=>{const e=new Map;return Nt.forEach(t=>{const a={},s="Open"===t.positionStatus,r="Partial"===t.positionStatus,o=[{label:"Initial Entry",date:t.date,qty:Number(t.initialQty)},{label:"Pyramid 1",date:t.pyramid1Date,qty:Number(t.pyramid1Qty)},{label:"Pyramid 2",date:t.pyramid2Date,qty:Number(t.pyramid2Qty)}].filter(e=>e.date&&e.qty>0);let n=[{date:t.exit1Date,qty:Number(t.exit1Qty)},{date:t.exit2Date,qty:Number(t.exit2Qty)},{date:t.exit3Date,qty:Number(t.exit3Qty)}].filter(e=>e.date&&e.qty>0).map(e=>({...e}));const d=new Date;d.setHours(0,0,0,0);const i=[];for(const e of o){let t=e.qty,a=new Date(e.date);for(a.setHours(0,0,0,0);t>0&&n.length>0;){const s=n[0],r=new Date(s.date);r.setHours(0,0,0,0);const o=Math.min(t,s.qty),d=Math.max(1,Math.ceil((r.getTime()-a.getTime())/864e5));i.push({label:e.label,qty:o,days:d,exited:!0,exitDate:s.date}),t-=o,s.qty-=o,0===s.qty&&n.shift()}if(t>0){const s=Math.max(1,Math.ceil((d.getTime()-a.getTime())/864e5));i.push({label:e.label,qty:t,days:s,exited:!1})}}let l=0;if(s){const e=i.filter(e=>!e.exited),t=e.reduce((e,t)=>e+t.qty,0);l=t>0?Math.round(e.reduce((e,t)=>e+t.days*t.qty,0)/t):0}else if(r){const e=i.filter(e=>!e.exited),t=i.filter(e=>e.exited),a=e.reduce((e,t)=>e+t.qty,0),s=t.reduce((e,t)=>e+t.qty,0);a>0?l=Math.round(e.reduce((e,t)=>e+t.days*t.qty,0)/a):s>0&&(l=Math.round(t.reduce((e,t)=>e+t.days*t.qty,0)/s))}else{const e=i.filter(e=>e.exited),t=e.reduce((e,t)=>e+t.qty,0);l=t>0?Math.round(e.reduce((e,t)=>e+t.days*t.qty,0)/t):0}a.holdingDays={displayDays:l,lotBreakdown:i,isOpenPosition:s,isPartialPosition:r};const c=[{label:"Initial Entry",price:Number(t.entry),qty:Number(t.initialQty)},{label:"Pyramid 1",price:Number(t.pyramid1Price),qty:Number(t.pyramid1Qty)},{label:"Pyramid 2",price:Number(t.pyramid2Price),qty:Number(t.pyramid2Qty)}].filter(e=>e.price>0&&e.qty>0),p=c.reduce((e,t)=>e+(t.qty||0),0),m=Number(t.tsl),u=Number(t.sl),x=Number(t.cmp),h=Number(t.avgExitPrice),_=t.buySell,j=t.positionStatus;Number(t.exitedQty),Number(t.openQty);let w=[{date:t.exit1Date,qty:Number(t.exit1Qty),price:Number(t.exit1Price)},{date:t.exit2Date,qty:Number(t.exit2Qty),price:Number(t.exit2Price)},{date:t.exit3Date,qty:Number(t.exit3Qty),price:Number(t.exit3Price)}].filter(e=>e.date&&e.qty>0&&e.price>0).map(e=>({...e}));const y=c.map(e=>{let t=e.qty,a=0,s=0;for(;t>0&&w.length>0;){const e=w[0],r=Math.min(t,e.qty);a+=r*e.price,s+=r,t-=r,e.qty-=r,0===e.qty&&w.shift()}const r=s>0?a/s:0,o=s,n=t;return{...e,exitedQtyForEntry:o,openQtyForEntry:n,avgExitPriceForEntry:r}}).map(e=>{let t;t="Initial Entry"===e.label?u:m>0?m:u;const a="Buy"===_?e.price-t:t-e.price,s=Math.abs(a);let r=0,o="";if("Open"===j)r="Buy"===_?x-e.price:e.price-x,o="Buy"===_?`CMP - Entry = ${x} - ${e.price} = ${(x-e.price).toFixed(2)} (Unrealized)`:`Entry - CMP = ${e.price} - ${x} = ${(e.price-x).toFixed(2)} (Unrealized)`;else if("Closed"===j)r="Buy"===_?h-e.price:e.price-h,o="Buy"===_?`Avg. Exit - Entry = ${h} - ${e.price} = ${(h-e.price).toFixed(2)} (Realized)`:`Entry - Avg. Exit = ${e.price} - ${h} = ${(e.price-h).toFixed(2)} (Realized)`;else if("Partial"===j){const t=e.exitedQtyForEntry,a=e.openQtyForEntry,s=e.avgExitPriceForEntry,n=t+a;if(t>0&&a>0){const d="Buy"===_?s-e.price:e.price-s,i="Buy"===_?x-e.price:e.price-x;r=(d*t+i*a)/n,o=`Weighted: ((Realized: ${d.toFixed(2)} × ${t}) + (Unrealized: ${i.toFixed(2)} × ${a})) / ${n} = ${r.toFixed(2)}`}else t>0?(r="Buy"===_?s-e.price:e.price-s,o="Buy"===_?`Avg. Exit - Entry = ${s.toFixed(2)} - ${e.price} = ${r.toFixed(2)} (Realized)`:`Entry - Avg. Exit = ${e.price} - ${s.toFixed(2)} = ${r.toFixed(2)} (Realized)`):(r="Buy"===_?x-e.price:e.price-x,o="Buy"===_?`CMP - Entry = ${x} - ${e.price} = ${r.toFixed(2)} (Unrealized)`:`Entry - CMP = ${e.price} - ${x} = ${r.toFixed(2)} (Unrealized)`)}const n=0!==s?Math.abs(r/s):1/0,d=0===s;return{label:e.label,price:e.price,risk:s,rawRisk:a,reward:r,rewardFormula:o,rrValue:n,qty:e.qty,stop:t,exitedQtyForEntry:e.exitedQtyForEntry||0,openQtyForEntry:e.openQtyForEntry||0,isRiskFree:d}}),g=y.filter(e=>!e.isRiskFree),f=g.reduce((e,t)=>e+(t.qty||0),0),v=f>0?g.reduce((e,t)=>e+t.rrValue*(t.qty||0),0)/f:0,k=g.reduce((e,t)=>e+t.risk*(t.qty||0),0),C=y.reduce((e,t)=>e+t.reward*(t.qty||0),0),b=k>0?Math.abs(C/k):1/0,D=y.some(e=>e.isRiskFree),U=v;a.rewardRisk={entryBreakdown:y,weightedRR:U,totalQtyAll:p,tsl:m,traditionalWeightedRR:v,effectiveRR:b,hasRiskFreePositions:D,totalRiskAmount:k,totalRewardAmount:C};const z=Mt.slice(Mt.findIndex(e=>"initialQty"===e.key)).filter(e=>"openHeat"!==e.key).map(e=>{if("actions"===e.key)return null;let a=t[e.key];const s=a;if(r=e.key,null==(o=s)||""===o||"-"===o||0===o&&["pyramid1Price","pyramid2Price","pyramid1Qty","pyramid2Qty","exit1Price","exit2Price","exit3Price","exit1Qty","exit2Qty","exit3Qty","tsl","rewardRisk","stockMove","pfImpact","cummPf","openHeat","unrealizedPL","realisedAmount","plRs"].includes(r)||r.includes("Date")&&("-"===o||""===o))return null;var r,o;if("unrealizedPL"===e.key)a="Open"===t.positionStatus||"Partial"===t.positionStatus?ge(t.avgEntry,t.cmp,t.openQty,t.buySell):"-";else if("plRs"===e.key){a=O(t).plRs}else if("realisedAmount"===e.key){a=O(t).realisedAmount}else if("pfImpact"===e.key){a=O(t).pfImpact}else"cummPf"===e.key&&(a=`${Number(t.cummPf??0).toFixed(2)}%`);if(["pyramid1Date","pyramid2Date","exit1Date","exit2Date","exit3Date"].includes(e.key))a=a?tt(a):"-";else if(["entry","avgEntry","sl","tsl","cmp","pyramid1Price","pyramid2Price","exit1Price","exit2Price","exit3Price","avgExitPrice","realisedAmount","plRs","unrealizedPL"].includes(e.key))a="number"==typeof a?at(a):a;else if(["pfImpact","rewardRisk","stockMove","openHeat","allocation","slPercent"].includes(e.key))if("pfImpact"!==e.key&&"cummPf"!==e.key){let t=Number(a);if("rewardRisk"===e.key){const e=t%1==0?t.toFixed(0):t.toFixed(2);a=t>0?`${e}R`:"-"}else a=`${t.toFixed(2)}`,e.key.includes("Price")||e.key.includes("Amount")||e.key.includes("Rs")||(a+="%")}else"pfImpact"===e.key&&(a=`${Number(a).toFixed(2)}%`);else"planFollowed"===e.key?a=t.planFollowed?"Yes":"No":"positionSize"===e.key?a="number"==typeof a?Math.round(a).toString():a:"holdingDays"===e.key?a="number"==typeof a?`${a} day${1!==a?"s":""}`:a:null!=a&&""!==a||(a="-");return{key:e.key,label:e.label,value:String(a)}}).filter(Boolean);a.tradeDetails={fields:z,tradeName:t.name,accountingMethod:B?"Cash Basis":"Accrual Basis"};const N=[{price:t.entry,qty:t.initialQty,description:"Initial Entry"},{price:t.pyramid1Price,qty:t.pyramid1Qty,description:"Pyramid 1"},{price:t.pyramid2Price,qty:t.pyramid2Qty,description:"Pyramid 2"}].filter(e=>e.price>0&&e.qty>0),S=fe(N,t.cmp,t.avgExitPrice,t.positionStatus,t.buySell);a.stockMove={individualMoves:S,positionStatus:t.positionStatus},e.set(t.id,a)}),e},[Nt]),Gt=R.useCallback((s,r)=>{var o,n,d,i,l;const c=s[r];if("name"===r){const a=null==(o=Kt.get(s.id))?void 0:o.tradeDetails;if(!a)return e.jsx("div",{className:"cursor-help","data-trade-id":s.id,"data-field":"name",tabIndex:0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1540:10",children:e.jsx(mt,{value:s.name,onSave:e=>Qt(s.id,"name",e),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:NameCell:1541:12"},`${s.id}-name`)});const{fields:r,tradeName:n,accountingMethod:d}=a,i=e.jsxs("div",{className:"p-3 text-xs max-w-2xl break-words","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1552:8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1553:10",children:[e.jsxs("h4",{className:"font-semibold text-sm","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:h4:1554:12",children:["Trade Details: ",n]}),e.jsx("div",{className:"text-xs px-2 py-1 rounded bg-primary/20 text-primary","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1555:12",children:d})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1559:10",children:r.map(t=>e.jsxs("div",{className:"bg-content2/40 dark:bg-content2/30 p-1.5 rounded shadow-sm overflow-hidden text-ellipsis whitespace-nowrap","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1561:14",children:[e.jsxs("span",{className:"font-medium text-default-700 dark:text-default-300","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:1562:16",children:[t.label,": "]}),e.jsx("span",{className:"text-default-600 dark:text-default-400 whitespace-nowrap","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:1563:16",children:t.value})]},t.key))})]});return e.jsx(t,{content:i,placement:"right-start",delay:0,closeDelay:0,radius:"sm",shadow:"md",classNames:{content:"bg-content1 border border-divider"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Tooltip:1571:8",children:e.jsx("div",{className:"cursor-help","data-trade-id":s.id,"data-field":"name",tabIndex:0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1580:10",children:e.jsx(mt,{value:s.name,onSave:e=>Qt(s.id,"name",e),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:NameCell:1581:12"},`${s.id}-name`)})})}if("holdingDays"===r)return(a=>{var s;const r=null==(s=Kt.get(a.id))?void 0:s.holdingDays;if(!r)return e.jsx("div",{className:"py-1 px-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1458:29",children:"-"});const{displayDays:o,lotBreakdown:n,isOpenPosition:d,isPartialPosition:i}=r;let l;return l=d?e.jsxs("div",{className:"flex flex-col gap-1 text-xs max-w-xs min-w-[120px]","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1465:8",children:[e.jsx("div",{className:"font-semibold","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1466:10",children:"Holding Days"}),n.filter(e=>!e.exited).map((t,a)=>e.jsxs("div",{className:"flex justify-between","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1468:12",children:[e.jsx("span",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:1469:14",children:t.label}),e.jsxs("span",{className:"font-mono","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:1470:14",children:[t.days," day",1!==t.days?"s":""]})]},a)),e.jsx("div",{className:"text-foreground-500 mt-1 text-[10px]","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1473:10",children:"Days since entry for each open lot."})]}):i?e.jsxs("div",{className:"flex flex-col gap-1 text-xs max-w-xs min-w-[120px]","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1480:8",children:[e.jsx("div",{className:"font-semibold","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1481:10",children:"Holding Days"}),n.map((t,a)=>e.jsxs("div",{className:"flex justify-between","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1483:12",children:[e.jsxs("span",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:1484:14",children:[t.label," ",t.exited?"(sold)":"(open)"]}),e.jsxs("span",{className:"font-mono","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:1485:14",children:[t.days," day",1!==t.days?"s":""]})]},a)),e.jsx("div",{className:"text-foreground-500 mt-1 text-[10px]","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1488:10",children:"Days since entry for open lots, entry to exit for sold lots (FIFO)."})]}):e.jsxs("div",{className:"flex flex-col gap-1 text-xs max-w-xs min-w-[120px]","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1495:8",children:[e.jsx("div",{className:"font-semibold","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1496:10",children:"Holding Days"}),n.map((t,a)=>e.jsxs("div",{className:"flex justify-between","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1498:12",children:[e.jsx("span",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:1499:14",children:t.label}),e.jsxs("span",{className:"font-mono","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:1500:14",children:[t.days," day",1!==t.days?"s":""]})]},a)),e.jsx("div",{className:"text-foreground-500 mt-1 text-[10px]","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1503:10",children:"Entry to exit for each lot (FIFO)."})]}),e.jsx(t,{content:l,placement:"top",delay:100,closeDelay:50,radius:"sm",shadow:"md",classNames:{content:"bg-content1 border border-divider z-50 max-w-xs"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Tooltip:1511:6",children:e.jsxs("div",{className:"py-1 px-2 flex items-center gap-0.5 relative","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1520:8",children:[o,e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-alert-circle text-warning cursor-help",style:{marginLeft:2},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:svg:1522:10",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:circle:1523:12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:line:1524:12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:line:1525:12"})]})]})})})(s);if("rewardRisk"===r){const a=null==(n=Kt.get(s.id))?void 0:n.rewardRisk;if(!a)return e.jsx("div",{className:"py-1 px-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1600:15",children:"-"});const{entryBreakdown:r,weightedRR:o,totalQtyAll:d,tsl:i,traditionalWeightedRR:l,effectiveRR:c,hasRiskFreePositions:p,totalRiskAmount:m,totalRewardAmount:u}=a;!(d>0)||o.toFixed(2);const x=e.jsxs("div",{className:"flex flex-col gap-1 text-xs max-w-xs min-w-[180px]","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1617:8",children:[e.jsx("div",{className:"font-semibold","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1618:10",children:"Reward:Risk Breakdown"}),r.map((t,a)=>e.jsxs("div",{className:"flex flex-col gap-0.5 border-b border-divider pb-1 mb-1 last:border-0 last:pb-0 last:mb-0","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1620:12",children:[e.jsxs("div",{className:"font-medium","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1621:14",children:[t.label," (Entry: ",t.price,")"]}),"Partial"===s.positionStatus&&(t.exitedQtyForEntry>0||t.openQtyForEntry>0)&&e.jsxs("div",{className:"text-[10px] text-foreground-600","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1623:16",children:[t.exitedQtyForEntry>0&&`Exited: ${t.exitedQtyForEntry} qty`,t.exitedQtyForEntry>0&&t.openQtyForEntry>0&&" | ",t.openQtyForEntry>0&&`Open: ${t.openQtyForEntry} qty`]}),e.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1629:14",children:[e.jsx("b",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:b:1629:19",children:"Risk:"})," |","Buy"===s.buySell?"Entry - ":"","Initial Entry"===t.label?"SL":t.stop===i&&i>0?"TSL":"SL","Sell"===s.buySell?" - Entry":"","| = ","Buy"===s.buySell?`${t.price} - ${t.stop}`:`${t.stop} - ${t.price}`," = ",t.rawRisk.toFixed(2)]}),t.rawRisk<0&&"Initial Entry"!==t.label&&e.jsx("div",{className:"text-warning-600 text-[10px]","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1631:16",children:"Negative risk: This pyramid is financed from the cushion of earlier profits."}),e.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1635:14",children:[e.jsx("b",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:b:1635:19",children:"Reward:"})," ",t.rewardFormula]}),e.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1636:14",children:[e.jsx("b",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:b:1636:19",children:"R:R:"})," |",t.reward.toFixed(2)," / ",t.risk.toFixed(2),"| = ",e.jsx("span",{className:""+(t.isRiskFree?"text-success font-bold":"text-primary"),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:1636:79",children:t.isRiskFree?"∞ (Risk-Free)":`${t.rrValue%1==0?t.rrValue.toFixed(0):t.rrValue.toFixed(2)}R`})]})]},a)),e.jsx("div",{className:"font-semibold mt-1 border-t border-divider pt-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1641:10",children:"Overall R:R Analysis"}),p&&e.jsxs("div",{className:"bg-success-50 dark:bg-success-900/20 p-2 rounded text-[10px] mb-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1644:12",children:[e.jsx("div",{className:"font-semibold text-success-700 dark:text-success-300","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1645:14",children:"🎯 Position Contains Risk-Free Components!"}),e.jsx("div",{className:"text-success-600 dark:text-success-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1646:14",children:"Some entries have zero risk (TSL at entry price)"})]}),e.jsxs("div",{className:"space-y-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1650:10",children:[e.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1651:12",children:[e.jsx("b",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:b:1652:14",children:"Traditional Weighted R:R:"})," ",e.jsxs("span",{className:"text-primary","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:1652:47",children:[l%1==0?l.toFixed(0):l.toFixed(2),"R"]}),e.jsx("div",{className:"text-[10px] text-foreground-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1653:14",children:"(Excludes risk-free positions from calculation)"})]}),e.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1658:12",children:[e.jsx("b",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:b:1659:14",children:"Effective Position R:R:"})," ",e.jsx("span",{className:""+(c===1/0?"text-success font-bold":"text-primary"),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:1659:45",children:c===1/0?"∞ (Risk-Free Position)":`${c%1==0?c.toFixed(0):c.toFixed(2)}R`}),e.jsxs("div",{className:"text-[10px] text-foreground-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1662:14",children:["Total Reward (₹",Math.abs(u).toFixed(2),") ÷ Total Risk (₹",m.toFixed(2),")"]})]}),p&&e.jsx("div",{className:"text-[10px] text-warning-600 dark:text-warning-400 mt-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1668:14",children:"💡 Risk-free positions provide unlimited upside with zero additional downside risk"})]}),a&&e.jsxs("div",{className:"text-foreground-500 mt-1 text-[10px] border-t border-divider pt-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1674:12",children:["Open"===s.positionStatus&&"* All rewards are unrealized (based on current CMP)","Closed"===s.positionStatus&&"* All rewards are realized (based on actual exit prices)","Partial"===s.positionStatus&&"* FIFO-based: Realized rewards for exited qty per entry, unrealized for remaining qty"]})]});return e.jsx(t,{content:x,placement:"top",delay:100,closeDelay:50,radius:"sm",shadow:"md",classNames:{content:"bg-content1 border border-divider z-50 max-w-xs"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Tooltip:1684:8",children:e.jsxs("div",{className:"py-1 px-2 flex items-center gap-1 relative","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1693:10",children:[p&&c===1/0?e.jsx("span",{className:"text-success font-bold","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:1695:14",children:"∞ (Risk-Free)"}):o>0?`${o%1==0?o.toFixed(0):o.toFixed(2)}R`:"-",e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-alert-circle text-warning cursor-help",style:{marginLeft:2},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:svg:1699:12",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:circle:1700:14"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:line:1701:14"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:line:1702:14"})]})]})})}if("stockMove"===r){const a=null==(d=Kt.get(s.id))?void 0:d.stockMove;if(!a)return e.jsx("div",{className:"py-1 px-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1713:15",children:"-"});const{individualMoves:r,positionStatus:o}=a,n=e=>null==e?"-":`${e.toFixed(2)}%`,i=e.jsxs("div",{className:"flex flex-col gap-1 text-xs max-w-xs min-w-[180px]","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1723:8",children:[e.jsx("div",{className:"font-semibold","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1724:10",children:"Individual Stock Moves:"}),r.map((t,a)=>e.jsxs("div",{className:"flex justify-between","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1726:12",children:[e.jsxs("span",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:1727:14",children:[t.description," ",e.jsxs("span",{className:"text-foreground-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:1727:39",children:["(",t.qty," qty)"]})]}),e.jsx("span",{className:"font-mono","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:1728:14",children:n(t.movePercent)})]},a)),e.jsx("div",{className:"text-foreground-500 mt-1 text-[10px]","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1731:10",children:"Open"===o?"* Unrealized moves based on CMP vs. entry prices.":"Partial"===o?"* Mixed moves: Realized (Avg. Exit) for exited qty, Unrealized (CMP) for open qty.":"* Realized moves based on Avg. Exit vs. entry prices."})]});return e.jsx(t,{content:i,placement:"top",delay:100,closeDelay:50,radius:"sm",shadow:"md",classNames:{content:"bg-content1 border border-divider z-50 max-w-xs"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Tooltip:1742:8",children:e.jsxs("div",{className:"py-1 px-2 flex items-center gap-1 relative","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1751:10",children:[void 0!==s.stockMove&&null!==s.stockMove?`${Number(s.stockMove).toFixed(2)}%`:"-",e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-alert-circle text-warning cursor-help",style:{marginLeft:2},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:svg:1753:12",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:circle:1754:14"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:line:1755:14"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:line:1756:14"})]})]})})}if("plRs"===r||"realisedAmount"===r){const t=O(s),a="realisedAmount"===r?t.realisedAmount:t.plRs;return e.jsx("div",{className:`py-1 px-2 text-right whitespace-nowrap ${Wt(a,r)}`,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1770:8",children:Yt(a,r)})}if("openHeat"===r){if("Open"===s.positionStatus||"Partial"===s.positionStatus){const t=ye(s,L,q);return e.jsxs("div",{className:"py-1 px-2 text-right whitespace-nowrap","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1782:10",children:[t.toFixed(2),"%"]})}return e.jsx("div",{className:"py-1 px-2 text-right whitespace-nowrap","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1787:15",children:"-"})}if(!$t(r))return e.jsx("div",{className:`py-1 px-2 ${Wt(c,r)}`,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1794:8",children:Yt(c,r)});if("buySell"===r)return e.jsx("div",{"data-trade-id":s.id,"data-field":"buySell",tabIndex:0,className:"focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-1 rounded","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1803:8",children:e.jsx(dt,{value:s.buySell,onSave:e=>Qt(s.id,"buySell",e),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:BuySellCell:1809:10"},`${s.id}-buySell`)});if("positionStatus"===r)return e.jsx("div",{"data-trade-id":s.id,"data-field":"positionStatus",tabIndex:0,className:"focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-1 rounded","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1820:8",children:e.jsx(it,{value:s.positionStatus,onSave:e=>Qt(s.id,"positionStatus",e),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:PositionStatusCell:1826:10"},`${s.id}-positionStatus`)});if("setup"===r)return e.jsx("div",{"data-trade-id":s.id,"data-field":"setup",tabIndex:0,className:"focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-1 rounded","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1837:8",children:e.jsx(ht,{value:s.setup||"",onSave:e=>Qt(s.id,"setup",e),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:SetupCell:1843:10"},`${s.id}-setup`)});if("exitTrigger"===r)return e.jsx("div",{"data-trade-id":s.id,"data-field":"exitTrigger",tabIndex:0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1854:8",children:e.jsx(wt,{value:s.exitTrigger||"",onSave:e=>Qt(s.id,"exitTrigger",e),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:ExitTriggerCell:1855:10"},`${s.id}-exitTrigger`)});if("proficiencyGrowthAreas"===r)return e.jsx("div",{"data-trade-id":s.id,"data-field":"proficiencyGrowthAreas",tabIndex:0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1866:8",children:e.jsx(pt,{value:s.proficiencyGrowthAreas||"",onSave:e=>Qt(s.id,"proficiencyGrowthAreas",e),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:ProficiencyGrowthAreasCell:1867:10"},`${s.id}-proficiencyGrowthAreas`)});if("planFollowed"===r)return e.jsx("div",{"data-trade-id":s.id,"data-field":"planFollowed",tabIndex:0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1878:8",children:e.jsx(yt,{value:s.planFollowed,onSave:e=>Qt(s.id,"planFollowed",e),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:PlanFollowedCell:1879:10"},`${s.id}-planFollowed`)});if("notes"===r)return e.jsx("div",{"data-trade-id":s.id,"data-field":"notes",tabIndex:0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1890:8",children:e.jsx(gt,{value:s.notes||"",onSave:e=>Qt(s.id,"notes",e),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:NotesCell:1891:10"},`${s.id}-notes`)});switch(r){case"tradeNo":return e.jsxs("div",{className:"flex items-center gap-0.5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1904:10",children:[e.jsx(nt,{value:c,onSave:e=>Qt(s.id,r,e),tradeId:s.id,field:r,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:EditableCell:1905:12"},`${s.id}-${r}`),e.jsx(t,{content:"Upload Charts","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Tooltip:1912:12",children:e.jsx(a,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>(e=>{Te(e),lt(!0),ue()})(s),className:"w-3 h-3 min-w-3 rounded p-0 hover:bg-primary/10 transition opacity-60 hover:opacity-90","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:1913:14",children:e.jsx(Q,{icon:"lucide:upload",className:"w-2.5 h-2.5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:1920:16"})})})]});case"date":case"pyramid1Date":case"pyramid2Date":case"exit1Date":case"exit2Date":case"exit3Date":return e.jsx(nt,{value:c,type:"date",onSave:e=>Qt(s.id,r,e),tradeId:s.id,field:r,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:EditableCell:1933:15"},`${s.id}-${r}`);case"entry":case"sl":case"tsl":case"pyramid1Price":case"pyramid2Price":case"exit1Price":case"exit2Price":case"exit3Price":return e.jsx(nt,{value:c,type:"price",onSave:e=>Qt(s.id,r,e),tradeId:s.id,field:r,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:EditableCell:1944:15"},`${s.id}-${r}`);case"cmp":return e.jsx(ft,{value:s.cmp,isAutoFetched:s._cmpAutoFetched,onSave:e=>Qt(s.id,"cmp",e),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:CMPCell:1949:10"},`${s.id}-cmp`);case"avgEntry":case"avgExitPrice":return e.jsx("div",{className:"py-1 px-2 text-right whitespace-nowrap","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1961:10",children:Yt(c,r)});case"realisedAmount":case"plRs":const o=O(s),n="realisedAmount"===r?o.realisedAmount:o.plRs;return e.jsx("div",{className:`py-1 px-2 text-right whitespace-nowrap ${Wt(n,r)}`,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1972:10",children:Yt(n,r)});case"initialQty":case"pyramid1Qty":case"pyramid2Qty":case"exit1Qty":case"exit2Qty":case"exit3Qty":return e.jsx(nt,{value:c,type:"number",onSave:e=>Qt(s.id,r,e),tradeId:s.id,field:r,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:EditableCell:1984:15"},`${s.id}-${r}`);case"positionSize":case"openQty":case"exitedQty":case"holdingDays":return e.jsx("div",{className:"py-1 px-2 text-right whitespace-nowrap","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:1992:10",children:Yt(c,r)});case"allocation":case"stockMove":return e.jsx("div",{className:"py-1 px-2 text-right whitespace-nowrap","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2001:10",children:Yt(c,r)});case"pfImpact":const d=O(s);return e.jsx("div",{className:"py-1 px-2 text-right whitespace-nowrap","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2008:10",children:Yt(d.pfImpact,r)});case"cummPf":return e.jsx("div",{className:"py-1 px-2 text-right whitespace-nowrap","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2014:10",children:Yt(c,r)});case"rewardRisk":return e.jsx("div",{className:"py-1 px-2 text-right whitespace-nowrap","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2021:10",children:Yt(c,r)});case"buySell":return e.jsx(dt,{value:s.buySell,onSave:e=>Qt(s.id,"buySell",e),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:BuySellCell:2026:15"},`${s.id}-buySell`);case"positionStatus":return e.jsx(it,{value:s.positionStatus,onSave:e=>Qt(s.id,"positionStatus",e),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:PositionStatusCell:2028:15"},`${s.id}-positionStatus`);case"planFollowed":return e.jsx(yt,{value:s.planFollowed,onSave:e=>Qt(s.id,"planFollowed",e),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:PlanFollowedCell:2030:15"},`${s.id}-planFollowed`);case"slPercent":const p=he(s.sl,s.entry);return e.jsx("div",{className:"text-right font-medium text-small whitespace-nowrap","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2034:10",children:p>0?`${p.toFixed(2)}%`:"-"});case"chartAttachments":const m=null==(i=s.chartAttachments)?void 0:i.beforeEntry,u=null==(l=s.chartAttachments)?void 0:l.afterExit,x=`${s.id}-${(null==m?void 0:m.id)||"no-before"}-${(null==u?void 0:u.id)||"no-after"}`;return"ASIANHOTNR"===s.name||s.name,m||u?e.jsxs("div",{className:"flex items-center justify-center gap-1 py-1 px-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2058:10",children:[m&&e.jsx(t,{content:"View Before Entry Chart","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Tooltip:2060:14",children:e.jsx(a,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>ne(m,`${s.name} - Before Entry Chart`),className:"text-blue-500 hover:text-blue-600","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:2061:16",children:e.jsx(Q,{icon:"lucide:trending-up",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:2071:18"})})}),u&&e.jsx(t,{content:"View After Exit Chart","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Tooltip:2076:14",children:e.jsx(a,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>ne(u,`${s.name} - After Exit Chart`),className:"text-green-500 hover:text-green-600","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:2077:16",children:e.jsx(Q,{icon:"lucide:trending-down",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:2087:18"})})}),(m||u)&&e.jsx("div",{className:"text-xs text-gray-500 ml-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2092:14",children:m&&u?"2":"1"})]},x):e.jsx("div",{className:"flex items-center justify-center gap-1 py-1 px-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2051:12",children:e.jsx("span",{className:"text-gray-400 text-xs","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:2052:14",children:"No charts"})},x);case"actions":return e.jsxs("div",{className:"flex items-center justify-end gap-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2100:10",children:[e.jsx(t,{content:"Edit trade (modal)","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Tooltip:2101:12",children:e.jsx(a,{isIconOnly:!0,variant:"light",onPress:()=>(e=>{Te(e),$e(!0),ue()})(s),className:"w-5 h-5 min-w-5 rounded p-0.5 hover:bg-primary/10 transition","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:2102:14",children:e.jsx(Q,{icon:"lucide:edit-3",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:2108:16"})})}),e.jsx(t,{content:"Delete trade","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Tooltip:2111:12",children:e.jsx(a,{isIconOnly:!0,variant:"light",color:"danger",onPress:()=>(e=>{Te(e),je()})(s),className:"w-5 h-5 min-w-5 rounded p-0.5 hover:bg-danger/10 transition","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:2112:14",children:e.jsx(Q,{icon:"lucide:trash-2",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:2119:16"})})})]});case"unrealizedPL":return"Open"===s.positionStatus||"Partial"===s.positionStatus?e.jsx("div",{className:"py-1 px-2 text-right whitespace-nowrap","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2127:12",children:Yt(ge(s.avgEntry,s.cmp,s.openQty,s.buySell),"plRs")}):e.jsx("div",{className:"py-1 px-2 text-right whitespace-nowrap","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2132:17",children:"-"});case"notes":return e.jsx(gt,{value:s.notes||"",onSave:e=>Qt(s.id,"notes",e),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:NotesCell:2137:10"},`${s.id}-notes`);default:const h=s[r];return null!=h?String(h):"-"}},[H,Qt,$t,L,q]),[Jt,Zt]=R.useState(!0),[Xt,ea]=R.useState({totalUnrealizedPL:0,openPfImpact:0,totalRealizedPL:0,realizedPfImpact:0,openHeat:0,winRate:0}),ta=R.useMemo(()=>{if(0===p.length)return{totalUnrealizedPL:0,openPfImpact:0,totalRealizedPL:0,realizedPfImpact:0,openHeat:0,winRate:0};const e=Z;let t=0;if(B){const a=new Set;e.filter(e=>"Open"===e.positionStatus||"Partial"===e.positionStatus).forEach(e=>{const s=e.id.split("_exit_")[0];a.has(s)||(a.add(s),t+=ge(e.avgEntry,e.cmp,e.openQty,e.buySell))})}else t=e.filter(e=>"Open"===e.positionStatus||"Partial"===e.positionStatus).reduce((e,t)=>e+ge(t.avgEntry,t.cmp,t.openQty,t.buySell),0);const a=L>0?t/L*100:0;let s;s=B?Z.flatMap(e=>Array.isArray(e._expandedTrades)?e._expandedTrades.filter(e=>e._cashBasisExit):e._cashBasisExit?[e]:[]):Z.filter(e=>"Open"!==e.positionStatus);const r=s.reduce((e,t,a)=>e+ve(t,B),0),o=s.reduce((e,t)=>e+(B?t._cashPfImpact??0:t._accrualPfImpact??t.pfImpact??0),0);let n=e;if(B){const t=new Set;n=e.filter(e=>{const a=e.id.split("_exit_")[0];return!t.has(a)&&(t.add(a),!0)})}const d=ke(n,L,q);let i;if(B){const t=new Map;e.filter(e=>e._cashBasisExit||"Open"!==e.positionStatus).forEach(e=>{const a=e.id.split("_exit_")[0];t.has(a)||t.set(a,[]),t.get(a).push(e)}),i=Array.from(t.entries()).map(([e,t])=>{const a=t.reduce((e,t)=>e+ve(t,B),0);return{...t[0],id:e,accountingPL:a}})}else i=e.filter(e=>"Open"!==e.positionStatus).map(e=>({...e,accountingPL:ve(e,B)}));const l=i.filter(e=>e.accountingPL>0),c=i.length>0?l.length/i.length*100:0;return{totalUnrealizedPL:t,openPfImpact:a,totalRealizedPL:r,realizedPfImpact:o,openHeat:d,winRate:c}},[c,p,L,B,q]);R.useEffect(()=>{ea(ta)},[ta]);const aa=R.useMemo(()=>{let e=Z.filter(e=>"Open"===e.positionStatus||"Partial"===e.positionStatus);if(B){const t=new Set;e=e.filter(e=>{const a=e.id.split("_exit_")[0];return!t.has(a)&&(t.add(a),!0)})}return e},[Z,B]),sa=R.useRef(new Map),ra=R.useCallback(async()=>{if(0===aa.length)return;const e=new Map,t=[];for(const a of aa)if(a.name){const s=a.name.toUpperCase(),r=sa.current.get(s);if(r&&Date.now()-r.timestamp<6e4){a.cmp!==r.price&&u({...a,cmp:r.price,_cmpAutoFetched:!0});continue}e.has(s)||(e.set(s,[]),t.push(s)),e.get(s).push(a)}for(let a=0;a<t.length;a+=5){const s=t.slice(a,a+5);await Promise.allSettled(s.map(async t=>{var a,s;try{const r=await Qe(t),o=null==(s=null==(a=null==r?void 0:r.data)?void 0:a.ticks)?void 0:s[t];if(o&&o.length>0){const a=o[o.length-1][4];sa.current.set(t,{price:a,timestamp:Date.now()});const s=e.get(t)||[];for(const e of s)e.cmp!==a&&u({...e,cmp:a,_cmpAutoFetched:!0})}}catch(r){}}))}},[aa,u]);return $.useEffect(()=>{ra();const e=setInterval(ra,15e3);return()=>clearInterval(e)},[ra]),e.jsxs("div",{className:"space-y-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2407:4",children:[e.jsx("style",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:style:2411:6",children:"\n        .sticky-name-header {\n          position: sticky !important;\n          left: 0 !important;\n          z-index: 30 !important;\n          background: rgb(244 244 245) !important; /* bg-default-100 */\n          min-width: 200px !important;\n          max-width: 200px !important;\n        }\n        .sticky-name-cell {\n          position: sticky !important;\n          left: 0 !important;\n          z-index: 20 !important;\n          background: white !important;\n          min-width: 200px !important;\n          max-width: 200px !important;\n        }\n        .dark .sticky-name-header {\n          background: rgb(17 24 39) !important; /* dark:bg-gray-950 */\n        }\n        .dark .sticky-name-cell {\n          background: rgb(17 24 39) !important; /* dark:bg-gray-900 */\n        }\n      "}),e.jsx("div",{className:"flex flex-col gap-4 mb-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2436:6",children:e.jsx(te,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:AnimatePresence:2437:8",children:e.jsxs("div",{className:"flex flex-row justify-between items-center gap-4 w-full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2441:10",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2442:12",children:[e.jsx(i,{classNames:{base:"max-w-[300px]",inputWrapper:"h-9 bg-content2 dark:bg-gray-900",input:"text-foreground dark:text-white"},placeholder:"Search trades...",startContent:e.jsx(Q,{icon:"lucide:search",className:"text-default-400 dark:text-default-300","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:2450:30"}),value:w,onValueChange:y,size:"sm","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Input:2443:14"}),e.jsxs(z,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Dropdown:2455:14",children:[e.jsx(N,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownTrigger:2456:16",children:e.jsxs(a,{variant:"flat",size:"sm",className:"bg-default-100 dark:bg-gray-900 text-foreground dark:text-white min-w-[120px] h-9",endContent:e.jsx(Q,{icon:"lucide:chevron-down",className:"text-sm dark:text-gray-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:2461:32"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:2457:18",children:["Status: ",g||"All"]})}),e.jsxs(S,{"aria-label":"Status filter",className:"dark:bg-gray-900",selectionMode:"single",selectedKeys:g?[g]:[],onSelectionChange:e=>{const t=Array.from(e)[0];P("All"===t?"":t)},classNames:{base:"dark:bg-gray-900"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownMenu:2466:16",children:[e.jsx(I,{className:"dark:text-white dark:hover:bg-gray-800","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownItem:2479:18",children:"All"},"All"),e.jsx(I,{className:"dark:text-white dark:hover:bg-gray-800","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownItem:2480:18",children:"Open"},"Open"),e.jsx(I,{className:"dark:text-white dark:hover:bg-gray-800","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownItem:2481:18",children:"Closed"},"Closed"),e.jsx(I,{className:"dark:text-white dark:hover:bg-gray-800","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownItem:2482:18",children:"Partial"},"Partial")]})]}),(w||g)&&e.jsx(a,{size:"sm",variant:"flat",color:"warning",onPress:()=>{y(""),P("")},startContent:e.jsx(Q,{icon:"lucide:x","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:2497:32"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:2488:16",children:"Clear Filters"}),e.jsxs(z,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Dropdown:2503:14",children:[e.jsx(N,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownTrigger:2504:16",children:e.jsx(a,{variant:"flat",size:"sm",className:"bg-default-100 dark:bg-gray-900 text-foreground dark:text-white min-w-[120px] h-9",endContent:e.jsx(Q,{icon:"lucide:chevron-down",className:"text-sm dark:text-gray-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:2509:32"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:2505:18",children:"Columns"})}),e.jsxs(S,{"aria-label":"Columns selection",className:"dark:bg-gray-900 max-h-60 overflow-y-auto",closeOnSelect:!1,selectionMode:"multiple",selectedKeys:new Set(A),onSelectionChange:e=>F(Array.from(e)),classNames:{base:"dark:bg-gray-900"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownMenu:2514:16",children:[e.jsx(I,{className:"dark:text-white transition-all duration-150 hover:scale-[1.02] active:scale-[0.98] hover:bg-primary/10 dark:hover:bg-primary/20",startContent:e.jsx(Q,{icon:A.length===Mt.length?"lucide:check-square-2":"lucide:square",className:"text-sm transition-all duration-200 group-hover:scale-110 "+(A.length===Mt.length?"text-primary":"text-default-400"),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:2530:22"}),onPress:()=>{navigator.vibrate&&navigator.vibrate(15);const e=Mt.map(e=>e.key);F(e);const t=document.querySelector('[data-key="select-all"]');t&&(t.classList.add("animate-pulse"),setTimeout(()=>t.classList.remove("animate-pulse"),200))},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownItem:2526:18",children:"Select All"},"select-all"),e.jsx(I,{className:"dark:text-white border-b border-divider mb-1 pb-2 transition-all duration-150 hover:scale-[1.02] active:scale-[0.98] hover:bg-default/10 dark:hover:bg-default/20",startContent:e.jsx(Q,{icon:A.length<=6?"lucide:square":"lucide:minus-square",className:"text-sm transition-all duration-200 group-hover:scale-110 "+(A.length<=6?"text-default-400":"text-default-500"),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:2560:22"}),onPress:()=>{navigator.vibrate&&navigator.vibrate(15);F(["tradeNo","date","name","buySell","positionStatus","actions"]);const e=document.querySelector('[data-key="deselect-all"]');e&&(e.classList.add("animate-pulse"),setTimeout(()=>e.classList.remove("animate-pulse"),200))},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownItem:2556:18",children:"Deselect All"},"deselect-all"),e.jsx(R.Fragment,{children:Mt.map(t=>e.jsx(I,{className:"capitalize dark:text-white dark:hover:bg-gray-800","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownItem:2591:22",children:t.label},t.key))})]})]})]}),e.jsxs(ae.div,{className:"flex items-center gap-0.5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2600:12",children:[e.jsx(t,{content:"Browse All Chart Images","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Tooltip:2603:14",children:e.jsx(a,{isIconOnly:!0,variant:"light",onPress:()=>Je(!0),className:"w-6 h-6 min-w-6 rounded p-0.5 hover:bg-primary/10 transition","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:2604:16",children:e.jsx(Q,{icon:"lucide:images",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:2610:18"})})}),e.jsx(a,{isIconOnly:!0,color:"primary",variant:"light",onPress:le,className:"w-6 h-6 min-w-6 rounded p-0.5 hover:bg-primary/10 transition","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:2613:14",children:e.jsx(Q,{icon:"lucide:plus",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:2620:16"})})]}),e.jsx(ze,{content:"Import CSV/Excel",placement:"top","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:MobileTooltip:2623:12",children:e.jsx(a,{isIconOnly:!0,variant:"light",className:"w-6 h-6 min-w-6 rounded p-0.5 hover:bg-primary/10 transition",onPress:Ne,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:2624:14",children:e.jsx(Q,{icon:"lucide:upload",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:2630:16"})})}),e.jsxs(z,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Dropdown:2633:12",children:[e.jsx(N,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownTrigger:2634:14",children:e.jsx(a,{isIconOnly:!0,variant:"light",className:"w-6 h-6 min-w-6 rounded p-0.5 hover:bg-primary/10 transition","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:2635:16",children:e.jsx(Q,{icon:"lucide:download",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:2640:18"})})}),e.jsxs(S,{"aria-label":"Export options",onAction:e=>(e=>{const t=c,a=Mt.filter(e=>"actions"!==e.key&&"unrealizedPL"!==e.key).map(e=>({label:e.label,key:e.key})),s=t.map(e=>{const t={},s=O(e);return a.forEach(a=>{let r=e[a.key];"plRs"===a.key?r=s.plRs:"realisedAmount"===a.key?r=s.realisedAmount:"pfImpact"===a.key&&(r=s.pfImpact),t[a.label]=r}),t}),r=B?"_cash_basis":"_accrual_basis",o=(new Date).toISOString().split("T")[0];if("csv"===e){const e=Ce.unparse(s),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),n=URL.createObjectURL(t);a.setAttribute("href",n),a.setAttribute("download",`trade_journal_${o}${r}.csv`),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)}else if("xlsx"===e){const e=X.json_to_sheet(s),t=X.book_new();X.book_append_sheet(t,e,"Trades"),ee(t,`trade_journal_${o}${r}.xlsx`)}})(e),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownMenu:2643:14",children:[e.jsx(I,{textValue:"Export as CSV",startContent:e.jsx(Q,{icon:"lucide:file-text","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:2647:80"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownItem:2647:16",children:"Export as CSV"},"csv"),e.jsx(I,{textValue:"Export as Excel",startContent:e.jsx(Q,{icon:"lucide:file-spreadsheet","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:2650:83"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownItem:2650:16",children:"Export as Excel"},"xlsx")]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 items-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2659:6",children:[[{title:n.totalTrades,value:c.length.toString(),icon:"lucide:list",color:"primary",tooltip:`Total number of trades ${B?"(expanded for individual exits)":"you have recorded"} matching current search/filter.`},{title:n.openPositions,value:(()=>{if(B){const e=new Set;return c.filter(t=>{if("Open"!==t.positionStatus)return!1;const a=t.id.split("_exit_")[0];return!e.has(a)&&(e.add(a),!0)}).length.toString()}return c.filter(e=>"Open"===e.positionStatus).length.toString()})(),icon:"lucide:activity",color:"warning",tooltip:"Number of trades that are currently open (filtered by search)."},{title:n.winRate,value:`${Xt.winRate.toFixed(2)}%`,icon:"lucide:target",color:"success",tooltip:`Percentage of trades that are profitable (${B?"Cash Basis":"Accrual Basis"}) matching current search/filter.`}].map((t,a)=>e.jsxs("div",{className:"flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2694:10",children:[e.jsx(ot,{title:t.title,value:t.value,icon:t.icon,color:0===a?"primary":1===a?"warning":"success","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:StatsCard:2695:12"}),e.jsx("div",{className:"block sm:hidden","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2702:12",children:e.jsx(ze,{placement:"top",className:"max-w-xs text-xs p-1 bg-content1 border border-divider",content:e.jsx("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2706:25",children:t.tooltip}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:MobileTooltip:2703:14",children:e.jsx(Q,{icon:"lucide:info",className:"text-base text-foreground-400 cursor-pointer inline-block align-middle ml-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:2708:16"})})})]},t.title)),e.jsxs("div",{className:"flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2714:8",children:[e.jsx(ot,{title:"Realized P/L",value:at(Xt.totalRealizedPL),icon:"lucide:indian-rupee",color:Xt.totalRealizedPL>=0?"success":"danger","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:StatsCard:2715:10"}),e.jsx(ze,{placement:"top",className:"max-w-xs text-xs p-1 bg-content1 border border-divider",content:(()=>{let t;if(B){const e=Z.flatMap(e=>Array.isArray(e._expandedTrades)?e._expandedTrades.filter(e=>e._cashBasisExit):e._cashBasisExit?[e]:[]),a=new Map;e.forEach(e=>{const t=e.id.split("_exit_")[0];a.has(t)||a.set(t,[]),a.get(t).push(e)}),t=Array.from(a.entries()).map(([e,t])=>{const a=t.reduce((e,t)=>e+ve(t,B),0);return{...t[0],id:e,realizedPL:a,pfImpact:t.reduce((e,t)=>e+(t._cashPfImpact??0),0)}})}else t=Z.filter(e=>"Closed"===e.positionStatus||"Partial"===e.positionStatus).map(e=>({...e,realizedPL:ve(e,B),pfImpact:e._accrualPfImpact??e.pfImpact??0}));const a=t.map(e=>({name:e.name||"N/A",realizedPL:e.realizedPL,pfImpact:e.pfImpact})).filter(e=>Math.abs(e.realizedPL)>.01).sort((e,t)=>Math.abs(t.realizedPL)-Math.abs(e.realizedPL));return e.jsxs("div",{className:"max-w-sm","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2788:16",children:[e.jsxs("div",{className:"mb-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2789:18",children:[e.jsxs("div",{className:"font-medium text-foreground-700","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2790:20",children:[e.jsx("strong",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:strong:2791:22",children:"PF Impact:"})," ",Xt.realizedPfImpact.toFixed(2),"%"]}),e.jsx("div",{className:"text-foreground-400 text-xs","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2793:20",children:"This is the % of your portfolio that is realized as profit/loss."})]}),a.length>0?e.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2800:20",children:[e.jsx("div",{className:"text-xs font-medium text-foreground-600 mb-2 border-b border-divider pb-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2801:22",children:"Top Realized Trades:"}),e.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2804:22",children:a.slice(0,10).map((t,a)=>e.jsxs("div",{className:"flex justify-between items-center text-xs","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2806:26",children:[e.jsx("span",{className:"truncate max-w-[100px]",title:t.name,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:2807:28",children:t.name}),e.jsxs("div",{className:"flex flex-col items-end ml-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2810:28",children:[e.jsxs("span",{className:"font-mono font-medium whitespace-nowrap "+(t.realizedPL>=0?"text-success":"text-danger"),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:2811:30",children:["₹",at(t.realizedPL)]}),e.jsxs("span",{className:"font-mono text-xs "+(t.pfImpact>=0?"text-success":"text-danger"),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:2816:30",children:["(",t.pfImpact>=0?"+":"",t.pfImpact.toFixed(2),"%)"]})]})]},`${t.name}-${a}`))}),a.length>10&&e.jsxs("div",{className:"text-xs text-foreground-400 mt-2 pt-1 border-t border-divider","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2827:24",children:["Showing top 10 of ",a.length," realized trades"]})]}):e.jsx("div",{className:"text-foreground-400 text-xs","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2833:20",children:"No realized trades"})]})})(),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:MobileTooltip:2721:10",children:e.jsx(Q,{icon:"lucide:info",className:"text-base text-foreground-400 cursor-pointer inline-block align-middle ml-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:2839:12"})},`realized-tooltip-${B}-${Z.length}-${Xt.totalRealizedPL}`)]}),e.jsxs("div",{className:"flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2842:8",children:[e.jsx(ot,{title:"Unrealized P/L",value:at(Xt.totalUnrealizedPL),icon:"lucide:indian-rupee",color:Xt.totalUnrealizedPL>=0?"success":"danger","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:StatsCard:2843:10"}),e.jsx(ze,{placement:"top",className:"max-w-xs text-xs p-1 bg-content1 border border-divider",content:(()=>{let t=c.filter(e=>"Open"===e.positionStatus||"Partial"===e.positionStatus);if(B){const e=new Set;t=t.filter(t=>{const a=t.id.split("_exit_")[0];return!e.has(a)&&(e.add(a),!0)})}const a=t.map(e=>{const t=ge(e.avgEntry,e.cmp,e.openQty,e.buySell),a=L>0?t/L*100:0;return{name:e.name||"N/A",unrealizedPL:t,pfImpact:a}}).filter(e=>Math.abs(e.unrealizedPL)>.01).sort((e,t)=>t.unrealizedPL-e.unrealizedPL);return e.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2881:16",children:[e.jsx("div",{className:"mb-2 font-medium text-foreground-700","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2882:18",children:"This is the % of your portfolio that is currently (unrealized)."}),a.length>0?e.jsx("ul",{className:"space-y-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:ul:2884:20",children:a.map((t,a)=>e.jsxs("li",{className:"flex justify-between items-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:li:2886:24",children:[e.jsx("span",{className:"truncate max-w-[100px]",title:t.name,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:2887:26",children:t.name}),e.jsxs("div",{className:"flex flex-col items-end ml-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2888:26",children:[e.jsxs("span",{className:"font-mono font-medium whitespace-nowrap "+(t.unrealizedPL>=0?"text-success":"text-danger"),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:2889:28",children:["₹",at(t.unrealizedPL)]}),e.jsxs("span",{className:"font-mono text-xs "+(t.pfImpact>=0?"text-success":"text-danger"),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:2892:28",children:["(",t.pfImpact>=0?"+":"",t.pfImpact.toFixed(2),"%)"]})]})]},`${t.name}-unrealized-${a}`))}):e.jsx("div",{className:"text-foreground-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2900:20",children:"No unrealized positions"})]})})(),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:MobileTooltip:2849:10",children:e.jsx(Q,{icon:"lucide:info",className:"text-base text-foreground-400 cursor-pointer inline-block align-middle ml-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:2906:12"})})]}),e.jsxs("div",{className:"flex items-center gap-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2909:8",children:[e.jsx(ot,{title:"Open Heat",value:`${Xt.openHeat.toFixed(2)}%`,icon:"lucide:flame",color:"warning","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:StatsCard:2910:10"}),e.jsx(ze,{placement:"top",className:"max-w-xs text-xs p-1 bg-content1 border border-divider",content:(()=>{let t=c.filter(e=>"Open"===e.positionStatus||"Partial"===e.positionStatus);if(B){const e=new Set;t=t.filter(t=>{const a=t.id.split("_exit_")[0];return!e.has(a)&&(e.add(a),!0)})}const a=t.map(e=>({name:e.name||"N/A",risk:ye(e,L,q)})).filter(e=>e.risk>0).sort((e,t)=>t.risk-e.risk);return e.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2941:16",children:[e.jsx("div",{className:"mb-2 font-medium text-foreground-700","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2942:18",children:"This is the % of your portfolio you will lose if all initial stops/TSLs are hit on your open/partial positions."}),a.length>0?e.jsx("ul",{className:"space-y-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:ul:2944:20",children:a.map((t,a)=>e.jsxs("li",{className:"flex justify-between","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:li:2946:24",children:[e.jsx("span",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:2947:26",children:t.name}),e.jsxs("span",{className:"font-mono","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:2948:26",children:[t.risk.toFixed(2),"%"]})]},`${t.name}-risk-${a}`))}):e.jsx("div",{className:"text-foreground-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2953:20",children:"No open risk"})]})})(),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:MobileTooltip:2916:10",children:e.jsx(Q,{icon:"lucide:info",className:"text-base text-foreground-400 cursor-pointer inline-block align-middle","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:2959:12"})})]})]}),e.jsx(te,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:AnimatePresence:2965:6",children:(j||!Jt)&&e.jsxs(ae.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center justify-center gap-3 p-3 bg-primary/10 border border-primary/20 rounded-lg","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2967:10",children:[e.jsx(Q,{icon:"lucide:calculator",className:"text-primary animate-pulse","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:2974:12"}),e.jsx("span",{className:"text-sm text-primary font-medium","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:2975:12",children:j?"Recalculating trade metrics in background...":"Loading statistics..."}),e.jsx(rt,{size:16,color:"text-primary","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:CircularLoader:2981:12"})]},"loading-indicator")}),e.jsx(s,{className:"border border-divider","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Card:2986:6",children:e.jsx(r,{className:"p-0","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:CardBody:2987:8",children:_||j||0!==Nt.length||0!==c.length?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative overflow-auto max-h-[70vh]\r [&::-webkit-scrollbar]:w-0 [&::-webkit-scrollbar]:h-2\r [&::-webkit-scrollbar-track]:bg-gray-100 dark:[&::-webkit-scrollbar-track]:bg-gray-800\r [&::-webkit-scrollbar-thumb]:bg-gray-300 [&::-webkit-scrollbar-thumb]:rounded-full\r [&::-webkit-scrollbar-thumb:hover]:bg-gray-400\r dark:[&::-webkit-scrollbar-thumb]:bg-gray-600 dark:[&::-webkit-scrollbar-thumb:hover]:bg-gray-500",style:{scrollbarWidth:"thin",scrollbarColor:"rgb(156 163 175) transparent"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:3035:14",children:[e.jsxs(f,{"aria-label":"Trade journal table",className:"trade-table gpu-accelerated",bottomContent:Ut?e.jsx("div",{className:"flex w-full justify-center items-center gap-4 py-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:3053:16",children:vt<c.length?e.jsx(a,{color:"primary",variant:"flat",size:"sm",onPress:Dt,isLoading:Ct,startContent:!Ct&&e.jsx(Q,{icon:"lucide:chevron-down","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:3061:54"}),className:"min-w-[120px] optimized-button","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:3055:20",children:Ct?"Loading...":`Load More (${c.length-vt} remaining)`}):e.jsxs("div",{className:"text-sm text-default-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:3067:20",children:["All ",c.length," trades loaded"]})}):zt>0?e.jsxs("div",{className:"flex w-full justify-between items-center gap-4 py-2 px-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:3074:16",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-default-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:3076:18",children:[e.jsx("span",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:3077:20",children:"Rows per page:"}),e.jsxs(z,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Dropdown:3078:20",children:[e.jsx(N,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownTrigger:3079:22",children:e.jsx(a,{size:"sm",variant:"bordered",className:"min-w-[60px] h-7",endContent:e.jsx(Q,{icon:"lucide:chevron-down",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:3084:38"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:3080:24",children:ut})}),e.jsx(S,{"aria-label":"Rows per page",selectionMode:"single",selectedKeys:[String(ut)],onSelectionChange:e=>{const t=Array.from(e)[0],a=Number(t);xt(a),Me(1)},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownMenu:3089:22",children:ct.map(t=>e.jsx(I,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownItem:3102:26",children:t},String(t)))})]})]}),e.jsx("div",{tabIndex:-1,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:3109:18",children:e.jsx(T,{isCompact:!0,showControls:!0,showShadow:!1,color:"primary",size:"sm",variant:"light",page:Pe,total:zt,onChange:It,classNames:{item:"rounded-full w-5 h-5 text-xs flex items-center justify-center",cursor:"rounded-full w-5 h-5 text-xs flex items-center justify-center",prev:"rounded-full w-5 h-5 text-xs flex items-center justify-center",next:"rounded-full w-5 h-5 text-xs flex items-center justify-center",ellipsis:"px-0.5 text-xs"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Pagination:3110:20"})}),e.jsx("div",{className:"text-sm text-default-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:3131:18",children:`${(Pe-1)*ut+1}-${Math.min(Pe*ut,c.length)} of ${c.length}`})]}):null,classNames:{base:"min-w-full",wrapper:"shadow-none p-0 rounded-none",table:"table-auto min-w-max",thead:"[&>tr]:first:shadow-none",th:"bg-default-100 dark:bg-gray-950 text-foreground-600 dark:text-white text-xs font-medium uppercase border-b border-default-200 dark:border-gray-800 sticky top-0 z-20 backdrop-blur-sm",td:"py-2.5 text-sm border-b border-default-200 dark:border-gray-800 text-foreground-800 dark:text-gray-200"},removeWrapper:!0,sortDescriptor:M,onSortChange:E,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Table:3047:12",children:[e.jsx(v,{columns:Et,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:TableHeader:3149:12",children:t=>e.jsx(k,{align:"actions"===t.key?"end":"start",allowsSorting:t.sortable,className:"name"===t.key?"sticky-name-header":"","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:TableColumn:3151:16",children:t.label},t.key)}),e.jsx(C,{items:St,isLoading:_,emptyContent:_?" ":"","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:TableBody:3161:12",children:t=>e.jsx(b,{className:"trade-table-row hover:bg-default-50 dark:hover:bg-gray-800 dark:bg-gray-900 group gpu-accelerated","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:TableRow:3167:16",children:Et.map(a=>e.jsx(D,{className:"trade-table-cell "+("name"===a.key?"sticky-name-cell sticky-header":""),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:TableCell:3172:20",children:Gt(t.data,a.key)},`${t.id}-${a.key}`))},t.key)})]}),Nt.length>0&&e.jsx("div",{className:"p-2 border-t border-divider bg-white dark:bg-gray-900","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:3185:14",children:e.jsx(ze,{content:"Add new trade (inline)",placement:"top","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:MobileTooltip:3186:16",children:e.jsx(a,{isIconOnly:!0,color:"primary",variant:"light",onPress:de,size:"sm",className:"mx-auto block","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:3187:18",children:e.jsx(Q,{icon:"lucide:list-plus",className:"text-lg","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:3195:20"})})})})]})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4 text-center min-h-[400px]","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2990:12",children:[e.jsx("div",{className:"text-default-400 mb-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2991:14",children:e.jsx(Q,{icon:0===c.length?"lucide:inbox":"lucide:search-x",className:"w-16 h-16 mx-auto mb-4 opacity-50","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:2992:16"})}),e.jsx("div",{className:"text-default-500 text-xl font-medium mb-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:2997:14",children:0===p.length?"No trades found":"No matching trades"}),e.jsx("div",{className:"text-default-400 text-base mb-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:3000:14",children:0===p.length?"Add your first trade to get started":"Try adjusting your search or filter criteria"}),0===p.length&&e.jsxs("div",{className:"flex flex-col gap-3 items-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:3007:16",children:[e.jsx(a,{color:"primary",variant:"shadow",size:"sm",onPress:de,startContent:e.jsx(Q,{icon:"lucide:plus",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:3013:34"}),className:"font-medium px-4 py-1.5 bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary/80 transition-all duration-300 shadow-lg shadow-primary/25 border-0 text-white rounded-full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:3008:18",children:"Add Your First Trade"}),e.jsx("div",{className:"text-default-400 text-sm","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:3018:18",children:"or"}),e.jsx(a,{color:"secondary",variant:"bordered",size:"sm",onPress:Ne,startContent:e.jsx(Q,{icon:"lucide:upload",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:3024:34"}),className:"font-medium px-4 py-1.5 transition-all duration-300 rounded-full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:3019:18",children:"Import from CSV/Excel"})]})]})})}),e.jsxs(te,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:AnimatePresence:3206:6",children:[ie&&e.jsx(We,{isOpen:ie,onOpenChange:ce,onSave:e=>{m(e),ce()},mode:"add",symbol:w,onChartRefresh:()=>et(e=>e+1),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:TradeModal:3208:10"},"add-trade-modal"),Ie&&e.jsxs(R.Fragment,{children:[e.jsx(We,{isOpen:pe,onOpenChange:e=>{e||(lt(!1),$e(!1)),xe()},trade:Ie,onSave:e=>{var t,a,s,r,o,n,d,i;const l=c.find(t=>t.id===e.id),p=l&&((null==(a=null==(t=l.chartAttachments)?void 0:t.beforeEntry)?void 0:a.id)!==(null==(r=null==(s=e.chartAttachments)?void 0:s.beforeEntry)?void 0:r.id)||(null==(n=null==(o=l.chartAttachments)?void 0:o.afterExit)?void 0:n.id)!==(null==(i=null==(d=e.chartAttachments)?void 0:d.afterExit)?void 0:i.id));u(e),p&&et(e=>e+1),xe()},mode:"edit",symbol:(null==Ie?void 0:Ie.name)||"",isUploadOnlyMode:st,isActionsEditMode:Fe,onChartRefresh:()=>et(e=>e+1),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:TradeModal:3221:12"},"edit-trade-modal"),e.jsx(Ke,{isOpen:_e,onOpenChange:be,onDelete:async()=>{var e,t;if(Ie){const a=(null==(e=Ie.chartAttachments)?void 0:e.beforeEntry)||(null==(t=Ie.chartAttachments)?void 0:t.afterExit);await x(Ie.id),a&&et(e=>e+1),be()}},tradeName:Ie.name,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DeleteConfirmModal:3234:12"},"delete-confirm-modal")]},`trade-modals-${Ie.id}`),e.jsx(Ze,{isOpen:De,onOpenChange:Se,onImport:At,portfolioSize:L,getPortfolioSize:q,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:TradeUploadModal:3244:8"},"upload-trade-modal")]}),e.jsx(qe,{isOpen:Le,onOpenChange:Be,chartImage:Re,title:He,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:ChartImageViewer:3255:6"}),e.jsx(Ve,{isOpen:Ge,onOpenChange:Je,initialChartImage:Re,refreshTrigger:Xe,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:UniversalChartViewer:3263:6"})]})}),rt=({size:t=20,color:a="text-gray-400"})=>e.jsxs(e.Fragment,{children:[e.jsx("style",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:style:3285:4",children:"\n      @keyframes circular-dash {\n        0% {\n          stroke-dasharray: 1, 150;\n          stroke-dashoffset: 0;\n        }\n        50% {\n          stroke-dasharray: 90, 150;\n          stroke-dashoffset: -35;\n        }\n        100% {\n          stroke-dasharray: 90, 150;\n          stroke-dashoffset: -124;\n        }\n      }\n      .circular-loader {\n        animation: spin 2s linear infinite, circular-dash 1.5s ease-in-out infinite;\n      }\n    "}),e.jsx("div",{className:"flex items-center justify-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:3304:4",children:e.jsxs("svg",{className:a,width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:svg:3305:6",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",className:"opacity-25","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:circle:3313:8"}),e.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"31.416",strokeDashoffset:"23.562",className:"opacity-75 circular-loader","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:circle:3322:8"})]})})]}),ot=R.memo(function({title:t,value:a,icon:o,color:n}){const d=(()=>{switch(n){case"primary":return{bg:"bg-blue-50 dark:bg-blue-900/10",text:"text-blue-700 dark:text-blue-400",icon:"text-blue-600 dark:text-blue-400"};case"success":return{bg:"bg-emerald-50 dark:bg-emerald-900/10",text:"text-emerald-700 dark:text-emerald-400",icon:"text-emerald-600 dark:text-emerald-400"};case"warning":return{bg:"bg-amber-50 dark:bg-amber-900/10",text:"text-amber-700 dark:text-amber-400",icon:"text-amber-600 dark:text-amber-400"};case"danger":return{bg:"bg-red-50 dark:bg-red-900/10",text:"text-red-700 dark:text-red-400",icon:"text-red-600 dark:text-red-400"};default:return{bg:"bg-gray-50 dark:bg-gray-900/10",text:"text-gray-700 dark:text-gray-400",icon:"text-gray-600 dark:text-gray-400"}}})();return e.jsx(s,{className:"border border-gray-100 dark:border-gray-800 shadow-sm bg-white dark:bg-gray-900","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Card:3467:4",children:e.jsx(r,{className:"p-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:CardBody:3468:6",children:e.jsxs("div",{className:"flex justify-between items-start","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:3469:8",children:[e.jsxs("div",{className:"space-y-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:3470:10",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:p:3471:12",children:t}),e.jsx("p",{className:`text-2xl font-semibold tracking-tight ${d.text}`,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:p:3474:12",children:a})]}),e.jsx("div",{className:`p-3 rounded-xl ${d.bg} ${d.icon}`,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:3478:10",children:e.jsx(Q,{icon:o,className:"text-xl","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:3479:12"})})]})})})}),nt=R.memo(function({value:t,onSave:a,type:s="text",colorValue:r=!1,min:o,max:n,options:d,tradeId:l,field:c}){const[p,m]=R.useState(!1),u=e=>{try{if(!e||""===e.trim())return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}).replace(/\//g,"-")}catch(t){return""}},x=e=>{try{if(!e||""===e.trim())return"";const t=e.split("-");if(3!==t.length)return"";const[a,s,r]=t;return a&&s&&r&&"undefined"!==a&&"undefined"!==s&&"undefined"!==r?`${r}-${s.padStart(2,"0")}-${a.padStart(2,"0")}`:""}catch(t){return""}},h=e=>{try{return new Date(e).toISOString()}catch(t){return""}},_=R.useCallback(()=>"date"===s?t&&""!==t&&null!=t?u(t):"":String(t??""),[s,t]),[j,w]=R.useState(()=>_()),y=R.useRef(null);R.useEffect(()=>{p&&y.current&&(y.current.focus(),y.current.select())},[p]);const g=R.useRef(!1);R.useEffect(()=>{g.current=p},[p]),R.useEffect(()=>{if(!p&&!g.current){const e=_();e!==j&&w(e)}},[t,s,p,_,j]);const f=()=>{if(g.current=!1,m(!1),"number"===s||"price"===s)a(Number(j));else if("date"===s)if(j){const e=h(x(j));a(e)}else a("");else a(j)},v=()=>{p||(g.current=!0,w(_()),m(!0))};return e.jsx(ae.div,{className:"relative",initial:!1,animate:{height:"auto"},transition:{duration:.2},"data-editable-cell":l&&c?"true":void 0,"data-trade-id":l,"data-field":c,tabIndex:l&&c?0:void 0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:3655:4",children:e.jsx(te,{mode:"wait","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:AnimatePresence:3665:6",children:"date"===s?e.jsx("input",{type:"date",className:"h-7 px-2 rounded-md border border-divider bg-content1 dark:bg-gray-900 dark:text-white text-sm font-medium focus:outline-none focus:ring-2 focus:ring-primary/20 hover:bg-content2 dark:hover:bg-gray-800 transition-colors cursor-pointer w-[130px]",value:x(j),onChange:e=>{g.current=!1;const t=e.target.value;if(t){const e=u(t);w(e),a(h(t))}else w(""),a("")},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:input:3667:10"}):e.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:3674:10",children:p?e.jsx(i,{ref:y,type:"price"===s?"number":"select"===s?"text":s,value:j,onValueChange:e=>{g.current=!0,w(e)},onBlur:f,onKeyDown:e=>{"Enter"===e.key?f():"Escape"===e.key&&(m(!1),w(String(t)))},size:"sm",variant:"bordered",classNames:{base:"w-full max-w-[160px]",input:"text-right font-medium text-small py-0 dark:text-white",inputWrapper:"h-7 min-h-unit-7 bg-content1 dark:bg-gray-900 shadow-sm"},step:"price"===s?"0.05":void 0,min:void 0!==o?o:"price"===s?0:void 0,max:void 0!==n?n:void 0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Input:3680:14"}):e.jsx(ae.div,{className:"py-1 px-2 rounded-md cursor-text hover:bg-content2 dark:hover:bg-gray-800 transition-colors w-full max-w-[160px] dark:bg-gray-900 dark:text-white",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{g.current=!0,w(_()),m(!0)},tabIndex:0,"data-trade-id":l,"data-field":c,onFocus:v,onKeyDown:e=>{"Tab"===e.key&&e.preventDefault(),"Enter"===e.key&&(e.preventDefault(),v())},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:3704:14",children:e.jsx("div",{className:"flex items-center gap-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:3731:16",children:e.jsx("span",{className:`font-medium text-small whitespace-nowrap ${(()=>{if(!r||"price"!==s)return"";const e=Number(t);return e<0?"text-danger":e>0?"text-success":""})()}`,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:3732:18",children:"price"===s?`₹${at(t)}`:String(t)})})})})})})}),dt=R.memo(function({value:t,onSave:s}){const[r,o]=R.useState(!1);return e.jsxs(z,{isOpen:r,onOpenChange:o,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Dropdown:3773:4",children:[e.jsx(N,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownTrigger:3774:6",children:e.jsx(a,{size:"sm",variant:"Buy"===t?"flat":"bordered",color:"Buy"===t?"success":"danger",className:"min-w-[80px] h-7",endContent:e.jsx(Q,{icon:"lucide:chevron-down",className:"w-3.5 h-3.5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:3780:22"}),onKeyDown:e=>{"Tab"===e.key?e.preventDefault():"Enter"!==e.key&&"ArrowDown"!==e.key&&"ArrowUp"!==e.key||(e.preventDefault(),o(!0))},onFocus:()=>{setTimeout(()=>o(!0),100)},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:3775:8",children:t})}),e.jsxs(S,{"aria-label":"Buy/Sell selection",selectionMode:"single",selectedKeys:[t],onSelectionChange:e=>{const t=Array.from(e)[0];s(t),o(!1)},onKeyDown:e=>{"Escape"===e.key&&o(!1)},autoFocus:!0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownMenu:3797:6",children:[e.jsx(I,{textValue:"Buy","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownItem:3813:8",children:"Buy"},"Buy"),e.jsx(I,{textValue:"Sell","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownItem:3814:8",children:"Sell"},"Sell")]})]})}),it=R.memo(function({value:t,onSave:s}){const[r,o]=R.useState(!1);return e.jsxs(z,{isOpen:r,onOpenChange:o,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Dropdown:3829:4",children:[e.jsx(N,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownTrigger:3830:6",children:e.jsx(a,{size:"sm",variant:"flat",color:"Open"===t?"primary":"Closed"===t?"success":"warning",className:"min-w-[90px] h-7 capitalize",endContent:e.jsx(Q,{icon:"lucide:chevron-down",className:"w-3.5 h-3.5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:3839:22"}),onKeyDown:e=>{"Tab"===e.key?e.preventDefault():"Enter"!==e.key&&"ArrowDown"!==e.key&&"ArrowUp"!==e.key||(e.preventDefault(),o(!0))},onFocus:()=>{setTimeout(()=>o(!0),100)},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:3831:8",children:t})}),e.jsxs(S,{"aria-label":"Position status selection",selectionMode:"single",selectedKeys:[t],onSelectionChange:e=>{const t=Array.from(e)[0];s(t),o(!1)},onKeyDown:e=>{"Escape"===e.key&&o(!1)},autoFocus:!0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownMenu:3855:6",children:[e.jsx(I,{textValue:"Open","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownItem:3871:8",children:"Open"},"Open"),e.jsx(I,{textValue:"Closed","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownItem:3872:8",children:"Closed"},"Closed"),e.jsx(I,{textValue:"Partial","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownItem:3873:8",children:"Partial"},"Partial")]})]})}),lt=["Booked Early","Didn't Book Loss","FOMO","Illiquid Stock","Illogical SL","Lack of Patience","Late Entry","Momentum-less stock","Overconfidence","Overtrading","Poor Exit","Poor Po Size","Poor Sector","Poor Stock","Shifted SL Suickly","Too Early Entry","Too Tight SL"],ct="custom_growth_areas_options",pt=R.memo(function({value:t,onSave:s}){const[r,o]=R.useState([]),[n,d]=R.useState(lt),i=R.useMemo(()=>[...n,...r],[r,n]);R.useEffect(()=>{(async()=>{try{const e=await Xe(ct);e&&Array.isArray(e)&&o(e.filter(e=>!lt.includes(e)));const t=await Xe(`${ct}_defaults`);t&&Array.isArray(t)?d(t):d(lt)}catch(e){d(lt)}})()},[]);const l=e=>{if("__add_new__"===e){const e=window.prompt("Enter new growth area:");e&&(e=>{if(e&&!i.some(t=>t.toLowerCase()===e.toLowerCase())){const t=[...r,e];o(t),et(ct,t),s(e)}else e&&s(e)})(e)}else s(e)};return e.jsxs(z,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Dropdown:3985:4",children:[e.jsx(N,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownTrigger:3986:6",children:e.jsx(a,{size:"sm",variant:"flat",color:"default",className:"min-w-[180px] h-7 justify-between",endContent:e.jsx(Q,{icon:"lucide:chevron-down",className:"w-3.5 h-3.5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:3988:22"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:3987:8",children:t||e.jsx("span",{className:"text-default-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:3990:20",children:"Select Growth Area"})})}),e.jsx(S,{"aria-label":"Growth areas selection",selectionMode:"single",selectedKeys:t?[t]:[],onSelectionChange:e=>{const t=Array.from(e)[0];l(t)},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownMenu:3993:6",children:i.map(i=>e.jsx(I,{textValue:i,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownItem:4004:12",children:e.jsxs("div",{className:"flex items-center gap-1 w-full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:4005:14",children:[e.jsx("span",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:4006:16",children:i}),e.jsx(a,{isIconOnly:!0,size:"sm",variant:"light",color:"danger",className:"min-w-unit-4 w-4 h-4 p-0",onPointerDown:e=>{e.stopPropagation()},onPress:()=>{(e=>{const a=lt.includes(e),i=a?`Are you sure you want to permanently delete "${e}" globally? This will remove it from all growth area dropdowns across the entire application.`:`Are you sure you want to permanently delete "${e}"?`;if(window.confirm(i)){if(a){const t=n.filter(t=>t!==e);d(t),et(`${ct}_defaults`,t)}else{const t=r.filter(t=>t!==e);o(t),et(ct,t)}t===e&&s("")}})(i)},"aria-label":`Delete ${i}`,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:4007:16",children:e.jsx(Q,{icon:"lucide:trash-2",className:"w-2.5 h-2.5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:4021:18"})})]})},i)).concat([e.jsx(I,{textValue:"Add new growth area...",className:"text-primary","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownItem:4027:12",children:e.jsxs("span",{className:"flex items-center gap-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:4028:14",children:[e.jsx(Q,{icon:"lucide:plus",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:4029:16"})," Add new growth area..."]})},"__add_new__")])})]})}),mt=R.memo(function({value:t,onSave:a}){const[s,r]=R.useState(!1),[o,n]=R.useState(t),[d,i]=R.useState(!1),[l,c]=R.useState([]),[p,m]=R.useState(-1),u=R.useRef(null),x=R.useRef(null);R.useEffect(()=>{s||n(t)},[t,s]);const[h,j]=R.useState([]);R.useEffect(()=>{!async function(){const e=await fetch("/name_sector_industry.csv"),t=await e.text();(await _(async()=>{const{default:e}=await import("./formatters-jc31xfU0.js").then(e=>e.p);return{default:e}},__vite__mapDeps([8,1,9]))).default.parse(t,{header:!0,complete:e=>{const t=e.data.map(e=>e["Stock Name"]).filter(Boolean);j(t)}})}()},[]);R.useEffect(()=>{if(s&&o){const e=h.filter(e=>e.toLowerCase().includes(o.toLowerCase()));c(e.slice(0,10)),i(e.length>0),m(-1)}else i(!1)},[o,s,h]),R.useEffect(()=>{s&&u.current&&d&&u.current.focus()},[s,d]);const w=R.useCallback(()=>{s||(r(!0),n(t),setTimeout(()=>{u.current&&(u.current.focus(),u.current.select())},50))},[s,t]),y=e=>{const s=e??o;if(!s.trim())return a(""),r(!1),i(!1),void m(-1);const d=h.find(e=>e.toLowerCase()===s.toLowerCase());if(d)a(d);else{const e=(e=>{if(!e||!h.length)return null;const t=e.toLowerCase();let a=null,s=0;const r=h.find(e=>e.toLowerCase().startsWith(t));if(r)return r;const o=h.find(e=>e.toLowerCase().includes(t));if(o)return o;for(const n of h){const e=n.toLowerCase();let r=0,o=0;for(let a=0;a<e.length&&o<t.length;a++)e[a]===t[o]&&(r++,o++);r>s&&(s=r,a=n)}return s>t.length/2?a:null})(s);if(e){window.confirm(`"${s}" not found. Did you mean "${e}"?`)?a(e):n(t)}else{window.confirm(`"${s}" is not a valid stock name. Do you want to add it?`)?a(s.toUpperCase()):n(t)}}r(!1),i(!1),m(-1)};R.useEffect(()=>{if(p>=0&&x.current){const e=document.getElementById(`stock-suggestion-${p}`);e&&e.scrollIntoView({block:"nearest",behavior:"smooth"})}},[p]),R.useEffect(()=>{if(!d||!u.current||!x.current)return;const e=()=>{if(u.current&&x.current){const e=u.current.getBoundingClientRect(),t=x.current;t.style.top=`${e.bottom+2}px`,t.style.left=`${e.left}px`,t.style.width=`${Math.max(220,e.width)}px`}};return e(),window.addEventListener("scroll",e,!0),window.addEventListener("resize",e),()=>{window.removeEventListener("scroll",e,!0),window.removeEventListener("resize",e)}},[d]),R.useEffect(()=>{const e=e=>{x.current&&!x.current.contains(e.target)&&u.current&&!u.current.contains(e.target)&&(i(!1),r(!1))};if(d)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[d]);const g=e=>{if(d&&0!==l.length)switch(e.key){case"ArrowDown":e.preventDefault(),e.stopPropagation(),m(e=>{const t=e+1,a=t>=l.length?0:t;return setTimeout(()=>{var e;const t=null==(e=x.current)?void 0:e.querySelector(`[data-index="${a}"]`);null==t||t.scrollIntoView({behavior:"smooth",block:"nearest"})},0),a});break;case"ArrowUp":e.preventDefault(),e.stopPropagation(),m(e=>{const t=e-1,a=t<0?l.length-1:t;return setTimeout(()=>{var e;const t=null==(e=x.current)?void 0:e.querySelector(`[data-index="${a}"]`);null==t||t.scrollIntoView({behavior:"smooth",block:"nearest"})},0),a});break;case"Enter":e.preventDefault(),e.stopPropagation(),p>=0&&l[p]?y(l[p]):1===l.length?y(l[0]):y();break;case"Escape":e.preventDefault(),e.stopPropagation(),i(!1),m(-1),r(!1);break;case"Tab":p>=0&&l[p]&&(e.preventDefault(),e.stopPropagation(),y(l[p]));break;case"Home":e.preventDefault(),m(0);break;case"End":e.preventDefault(),m(l.length-1);break;case"PageDown":e.preventDefault(),m(e=>Math.min(e+5,l.length-1));break;case"PageUp":e.preventDefault(),m(e=>Math.max(e-5,0))}else"Enter"===e.key?(e.preventDefault(),y()):"Escape"===e.key&&(e.preventDefault(),r(!1),i(!1))};return s?e.jsxs("div",{className:"relative min-w-[220px]","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:4351:6",children:[e.jsx("input",{ref:u,type:"text",className:"w-full min-w-[220px] px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-primary",value:o,onChange:e=>n(e.target.value),onBlur:e=>{var t;(null==(t=x.current)?void 0:t.contains(e.relatedTarget))||setTimeout(()=>y(),150)},onKeyDown:g,autoFocus:!0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:input:4352:8"}),d&&P.createPortal(e.jsx("div",{ref:x,className:"fixed z-[99999] min-w-[220px] bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded shadow-lg max-h-48 overflow-y-auto overflow-x-auto",style:{top:u.current?u.current.getBoundingClientRect().bottom+2:0,left:u.current?u.current.getBoundingClientRect().left:0,width:u.current?Math.max(220,u.current.getBoundingClientRect().width):220},role:"listbox",tabIndex:-1,onMouseDown:e=>{e.preventDefault()},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:4368:10",children:l.map((t,a)=>e.jsx("div",{"data-index":a,id:`stock-suggestion-${a}`,role:"option","aria-selected":a===p,className:"px-3 py-1.5 text-sm cursor-pointer whitespace-nowrap "+(a===p?"bg-blue-100 dark:bg-blue-900":"hover:bg-blue-50 dark:hover:bg-blue-800"),onMouseDown:e=>{e.preventDefault(),y(t)},onMouseEnter:()=>m(a),onClick:e=>{e.preventDefault(),y(t)},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:4384:14",children:t},t))}),document.body)]}):e.jsx("div",{className:"px-2 py-1 text-sm bg-gray-100 dark:bg-gray-700 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors cursor-text",onClick:()=>r(!0),onFocus:w,tabIndex:0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:4416:4",children:t||e.jsx("span",{className:"text-gray-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:4422:16",children:"Stock name"})})}),ut=["ITB","Chop BO","IPO Base","3/5/8","21/50","Breakout","Pullback","Reversal","Continuation","Gap Fill","OTB","Stage 2","ONP BO","EP","Pivot Bo","Cheat","Flag","Other"],xt="custom_setup_options",ht=R.memo(function({value:t,onSave:s}){const[r,o]=R.useState([]),[n,d]=R.useState(ut),[i,l]=R.useState(!1),c=R.useMemo(()=>[...n,...r],[r,n]);R.useEffect(()=>{(async()=>{try{const e=await Xe(xt);e&&Array.isArray(e)&&o(e.filter(e=>!ut.includes(e)));const t=await Xe(`${xt}_defaults`);t&&Array.isArray(t)?d(t):d(ut)}catch(e){d(ut)}})()},[]);const p=e=>{if("__add_new__"===e){const e=window.prompt("Enter new setup:");e&&(e=>{if(e&&!c.some(t=>t.toLowerCase()===e.toLowerCase())){const t=[...r,e];o(t),et(xt,t),s(e)}else e&&s(e)})(e)}else s(e)};return e.jsxs(z,{isOpen:i,onOpenChange:l,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Dropdown:4534:4",children:[e.jsx(N,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownTrigger:4535:6",children:e.jsx(a,{size:"sm",variant:"flat",color:"primary",className:"min-w-[120px] h-7 justify-between",endContent:e.jsx(Q,{icon:"lucide:chevron-down",className:"w-3.5 h-3.5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:4541:22"}),onFocus:()=>setTimeout(()=>l(!0),100),onKeyDown:e=>{"Tab"===e.key?e.preventDefault():"Enter"!==e.key&&"ArrowDown"!==e.key&&"ArrowUp"!==e.key||(e.preventDefault(),l(!0))},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:4536:8",children:t||e.jsx("span",{className:"text-default-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:4552:20",children:"Setup"})})}),e.jsx(S,{"aria-label":"Setup type selection",selectionMode:"single",selectedKeys:t?[t]:[],onSelectionChange:e=>{const t=Array.from(e)[0];p(t)},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownMenu:4555:6",children:c.map(i=>e.jsx(I,{textValue:i,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownItem:4566:12",children:e.jsxs("div",{className:"flex items-center gap-1 w-full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:4567:14",children:[e.jsx("span",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:4568:16",children:i}),e.jsx(a,{isIconOnly:!0,size:"sm",variant:"light",color:"danger",className:"min-w-unit-4 w-4 h-4 p-0",onPointerDown:e=>{e.stopPropagation()},onPress:()=>{(e=>{const a=ut.includes(e),i=a?`Are you sure you want to permanently delete "${e}" globally? This will remove it from all setup dropdowns across the entire application.`:`Are you sure you want to permanently delete "${e}"?`;if(window.confirm(i)){if(a){const t=n.filter(t=>t!==e);d(t),et(`${xt}_defaults`,t)}else{const t=r.filter(t=>t!==e);o(t),et(xt,t)}t===e&&s("")}})(i)},"aria-label":`Delete ${i}`,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:4569:16",children:e.jsx(Q,{icon:"lucide:trash-2",className:"w-2.5 h-2.5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:4583:18"})})]})},i)).concat([e.jsx(I,{textValue:"Add new setup...",className:"text-primary","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownItem:4589:12",children:e.jsxs("span",{className:"flex items-center gap-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:4590:14",children:[e.jsx(Q,{icon:"lucide:plus",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:4591:16"})," Add new setup..."]})},"__add_new__")])})]})}),_t=["Breakeven exit","Market Pressure","R multiples","Random","SL","Target","Trailing SL exit","Broke key MA's","Panic sell","Early sell off","Failed BO"],jt="custom_exit_trigger_options",wt=R.memo(function({value:t,onSave:s}){const[r,o]=R.useState([]),[n,d]=R.useState(_t),i=R.useMemo(()=>[...n,...r],[r,n]);R.useEffect(()=>{(async()=>{try{const e=await Xe(jt);e&&Array.isArray(e)&&o(e.filter(e=>!_t.includes(e)));const t=await Xe(`${jt}_defaults`);t&&Array.isArray(t)?d(t):d(_t)}catch(e){d(_t)}})()},[]);const l=e=>{if("__add_new__"===e){const e=window.prompt("Enter new exit trigger:");e&&(e=>{if(e&&!i.some(t=>t.toLowerCase()===e.toLowerCase())){const t=[...r,e];o(t),et(jt,t),s(e)}else e&&s(e)})(e)}else s(e)};return e.jsxs(z,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Dropdown:4699:4",children:[e.jsx(N,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownTrigger:4700:6",children:e.jsx(a,{size:"sm",variant:"flat",color:"default",className:"min-w-[150px] h-7 justify-between",endContent:e.jsx(Q,{icon:"lucide:chevron-down",className:"w-3.5 h-3.5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:4702:22"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:4701:8",children:t||e.jsx("span",{className:"text-default-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:4704:20",children:"Select Exit Trigger"})})}),e.jsx(S,{"aria-label":"Exit trigger selection",selectionMode:"single",selectedKeys:t?[t]:[],onSelectionChange:e=>{const t=Array.from(e)[0];l(t)},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownMenu:4707:6",children:i.map(i=>e.jsx(I,{textValue:i,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownItem:4718:12",children:e.jsxs("div",{className:"flex items-center gap-1 w-full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:4719:14",children:[e.jsx("span",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:4720:16",children:i}),e.jsx(a,{isIconOnly:!0,size:"sm",variant:"light",color:"danger",className:"min-w-unit-4 w-4 h-4 p-0",onPointerDown:e=>{e.stopPropagation()},onPress:()=>{(e=>{const a=_t.includes(e),i=a?`Are you sure you want to permanently delete "${e}" globally? This will remove it from all exit trigger dropdowns across the entire application.`:`Are you sure you want to permanently delete "${e}"?`;if(window.confirm(i)){if(a){const t=n.filter(t=>t!==e);d(t),et(`${jt}_defaults`,t)}else{const t=r.filter(t=>t!==e);o(t),et(jt,t)}t===e&&s("")}})(i)},"aria-label":`Delete ${i}`,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:4721:16",children:e.jsx(Q,{icon:"lucide:trash-2",className:"w-2.5 h-2.5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:4735:18"})})]})},i)).concat([e.jsx(I,{textValue:"Add new exit trigger...",className:"text-primary","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownItem:4741:12",children:e.jsxs("span",{className:"flex items-center gap-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:4742:14",children:[e.jsx(Q,{icon:"lucide:plus",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:4743:16"})," Add new exit trigger..."]})},"__add_new__")])})]})}),yt=({value:t,onSave:s})=>{const r=t?"Yes":"No";return e.jsxs(z,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Dropdown:4760:4",children:[e.jsx(N,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownTrigger:4761:6",children:e.jsx(a,{size:"sm",variant:"flat",color:t?"success":"danger",className:"min-w-[70px] h-7",endContent:e.jsx(Q,{icon:"lucide:chevron-down",className:"w-3.5 h-3.5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:4767:22"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:4762:8",children:r})}),e.jsxs(S,{"aria-label":"Plan followed selection",selectionMode:"single",selectedKeys:[r],onSelectionChange:e=>{const t=Array.from(e)[0];s("Yes"===t)},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownMenu:4772:6",children:[e.jsx(I,{textValue:"Yes","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownItem:4781:8",children:"Yes"},"Yes"),e.jsx(I,{textValue:"No","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:DropdownItem:4782:8",children:"No"},"No")]})]})},gt=R.memo(function({value:t,onSave:s}){const{isOpen:r,onOpenChange:o,onClose:n,onOpen:d}=U(),[i,l]=R.useState(t);R.useEffect(()=>{r&&l(t)},[r,t]);return e.jsxs(M,{placement:"bottom-start",isOpen:r,onOpenChange:o,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Popover:4815:4",children:[e.jsx(E,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:PopoverTrigger:4816:6",children:e.jsx("div",{onClick:d,className:"p-2 text-sm rounded-md cursor-pointer hover:bg-default-100 dark:hover:bg-default-900/40 transition-colors w-full max-w-[300px]","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:4817:8",children:t?e.jsx("p",{className:"whitespace-pre-wrap truncate text-ellipsis","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:p:4822:12",children:t}):e.jsx("span",{className:"text-default-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:4824:12",children:"Add a note..."})})}),e.jsx(A,{className:"p-0","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:PopoverContent:4828:6",children:e.jsxs("div",{className:"w-[320px] p-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:4829:8",children:[e.jsx("h4",{className:"font-bold text-lg mb-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:h4:4830:10",children:"Trade Review & Notes"}),e.jsx(F,{label:"Notes",placeholder:"Enter your review, observations, or thoughts...",value:i,onValueChange:l,minRows:6,maxRows:12,classNames:{input:"resize-y"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Textarea:4831:10"}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:4842:10",children:[e.jsx(a,{size:"sm",variant:"flat",color:"danger",onPress:()=>{l(t),n()},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:4843:12",children:"Cancel"}),e.jsx(a,{size:"sm",color:"primary",onPress:()=>{s(i),n()},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Button:4846:12",children:"Save"})]})]})})]})}),ft=R.memo(function({value:a,isAutoFetched:s,onSave:r}){const[o,n]=R.useState(!1),[d,l]=R.useState(String(a||"")),c=R.useRef(null);R.useEffect(()=>{o&&c.current&&(c.current.focus(),c.current.select())},[o]),R.useEffect(()=>{o||l(String(a||""))},[a,o]);const p=()=>{n(!1);const e=Number(d)||0;r(e)};return e.jsx("div",{className:"relative","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:4912:4",children:o?e.jsx(i,{ref:c,value:d,onValueChange:l,onBlur:p,onKeyDown:e=>{"Enter"===e.key?p():"Escape"===e.key&&(n(!1),l(String(a||"")))},type:"number",step:"0.01",min:"0",size:"sm",classNames:{input:"text-right",inputWrapper:"h-7 min-h-7"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Input:4914:8"}):e.jsx(t,{content:e.jsxs("div",{className:"text-xs","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:4932:12",children:[e.jsx("div",{className:"font-medium","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:4933:14",children:"Current Market Price"}),e.jsx("div",{className:"text-default-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:4934:14",children:!1===s?"Manually entered - click to edit":!0===s?"Auto-fetched from market data - not editable":"Click to enter manually"})]}),placement:"top",delay:500,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Tooltip:4930:8",children:e.jsxs("div",{onClick:()=>{o||!0===s||n(!0)},className:`\n              py-1 px-2 text-right rounded-md transition-colors\n              flex items-center justify-end gap-1 whitespace-nowrap\n              ${!1===s?"border-l-2 border-warning cursor-pointer hover:bg-default-100 dark:hover:bg-default-800":!0===s?"border-l-2 border-success cursor-not-allowed opacity-75":"cursor-pointer hover:bg-default-100 dark:hover:bg-default-800"}\n            `,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:div:4947:10",children:[e.jsx("span",{className:"font-medium","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:span:4960:12",children:a>0?`₹${m=a,0===m?"0":new Intl.NumberFormat("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(m)}`:"-"}),!1===s&&e.jsx(Q,{icon:"lucide:edit-3",className:"w-3 h-3 text-warning opacity-60","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:4964:14"}),!0===s&&e.jsx(Q,{icon:"lucide:refresh-cw",className:"w-3 h-3 text-success opacity-60","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\trade-journal.tsx:Icon:4970:14"})]})})});var m});export{st as TradeJournal,st as default};
//# sourceMappingURL=trade-journal-CCUx7PWA.js.map
