const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/trade-journal-CCUx7PWA.js","assets/ui-framework-nn7D7dv2.js","assets/react-vendor-EfHycc-t.js","assets/animations-DTB6hMKs.js","assets/icons-BXW-tQdz.js","assets/chartImageService-D0un2IL8.js","assets/virtualization-XEk1mQjT.js","assets/data-utils-DC7zLTCj.js","assets/formatters-jc31xfU0.js","assets/use-accounting-calculations-2iOnH437.js","assets/MobileTooltip-JywXozpF.js","assets/database-Ch4ty5VL.js","assets/trade-analytics-D1XTklIQ.js","assets/tax-analytics-a1JVCqVB.js","assets/charts-Dom0rmuL.js","assets/monthly-performance-DVXWktNO.js","assets/DeepAnalyticsPage-DWxj-vJW.js","assets/DeepAnalyticsPage-DOnzI3fN.css"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,r,a)=>((t,r,a)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a)(t,"symbol"!=typeof r?r+"":r,a);import{a as r,g as a,r as n,R as o,d as s,u as i,f as l,L as c,S as d,h as u,B as p}from"./react-vendor-EfHycc-t.js";import{u as m,j as h,t as f,s as g,m as y,a as _,b as x,d as w,i as v,e as b,f as j,g as k,_ as C,h as D,k as S,l as M,n as N,o as U,p as z,q as P,v as A,w as I,x as T,y as E,z as O,A as B,B as F,C as q,D as R,E as L,H as K,T as Y}from"./ui-framework-nn7D7dv2.js";import{I as G}from"./icons-BXW-tQdz.js";import{motion as Q,AnimatePresence as $}from"./animations-DTB6hMKs.js";import{c as W}from"./database-Ch4ty5VL.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var J,V={};const H=a(function(){if(J)return V;J=1;var e=r(),t=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return V.createRoot=function(r,a){t.usingClientEntryPoint=!0;try{return e.createRoot(r,a)}finally{t.usingClientEntryPoint=!1}},V.hydrateRoot=function(r,a,n){t.usingClientEntryPoint=!0;try{return e.hydrateRoot(r,a,n)}finally{t.usingClientEntryPoint=!1}},V}()),X=()=>{const{theme:e,setTheme:t}=m(),r="dark"===e;return h.jsx(f,{content:`Switch to ${r?"light":"dark"} mode`,placement:"bottom",className:"animate-fade-in","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\theme-switcher.tsx:Tooltip:15:4",children:h.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg transition-all duration-300 ease-in-out hover:bg-foreground-100/50","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\theme-switcher.tsx:div:20:6",children:[h.jsx(G,{icon:r?"lucide:moon":"lucide:sun",className:"text-lg transition-all duration-300 transform "+(r?"text-primary-400 rotate-0":"text-warning-400 rotate-90"),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\theme-switcher.tsx:Icon:21:8"}),h.jsx(g,{isSelected:r,onValueChange:()=>{t(r?"light":"dark")},size:"sm",color:r?"primary":"warning",className:"mx-0 shadow-soft-sm hover:shadow-soft-md transition-shadow duration-200","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\theme-switcher.tsx:Switch:29:8"})]})})};function Z(e){const t=[{date:e.exit1Date,qty:e.exit1Qty||0,price:e.exit1Price||0},{date:e.exit2Date,qty:e.exit2Qty||0,price:e.exit2Price||0},{date:e.exit3Date,qty:e.exit3Qty||0,price:e.exit3Price||0}].filter(e=>e.date&&""!==e.date.trim()&&e.qty>0);if(t.length>0)return t;if(("Closed"===e.positionStatus||"Partial"===e.positionStatus)&&e.exitedQty>0&&e.avgExitPrice>0){const t=[e.exit1Date,e.exit2Date,e.exit3Date].filter(e=>e&&""!==e.trim());return[{date:t.length>0?t.sort((e,t)=>new Date(t).getTime()-new Date(e).getTime())[0]:e.date,qty:e.exitedQty,price:e.avgExitPrice}]}return[]}function ee(e,t=!1){if(t){const t=e._cashBasisExit;if(t){const r=e.avgEntry||e.entry||0,a=t.price;if(r>0&&a>0){return"Buy"===e.buySell?(a-r)*t.qty:(r-a)*t.qty}}else{if("Closed"===e.positionStatus)return e.plRs||0;if("Partial"===e.positionStatus){const t=e.avgEntry||e.entry||0;let r=0;if(e.exit1Date&&e.exit1Qty&&e.exit1Price&&t>0){r+="Buy"===e.buySell?(e.exit1Price-t)*e.exit1Qty:(t-e.exit1Price)*e.exit1Qty}if(e.exit2Date&&e.exit2Qty&&e.exit2Price&&t>0){r+="Buy"===e.buySell?(e.exit2Price-t)*e.exit2Qty:(t-e.exit2Price)*e.exit2Qty}if(e.exit3Date&&e.exit3Qty&&e.exit3Price&&t>0){r+="Buy"===e.buySell?(e.exit3Price-t)*e.exit3Qty:(t-e.exit3Price)*e.exit3Qty}if(0===r&&e.exitedQty>0){if(void 0!==e.plRs&&null!==e.plRs)return e.plRs;if(e.avgExitPrice>0&&t>0){return"Buy"===e.buySell?(e.avgExitPrice-t)*e.exitedQty:(t-e.avgExitPrice)*e.exitedQty}}return r}}return 0}return e.plRs??0}function te(e,t=!1){if(t){const t=e._cashBasisExit;if(t)return t.date;if("Closed"===e.positionStatus||"Partial"===e.positionStatus){const t=[e.exit1Date,e.exit2Date,e.exit3Date].filter(e=>e&&""!==e.trim());if(t.length>0){return t.sort((e,t)=>new Date(t).getTime()-new Date(e).getTime())[0]}}return e.date}return e.date}function re(e,t,r,a=!1){if(a){const a=[];return e.forEach(e=>{if("Closed"===e.positionStatus||"Partial"===e.positionStatus){Z(e).forEach(n=>{const o=new Date(n.date),s=o.toLocaleString("default",{month:"short"}),i=o.getFullYear();if(s===t&&i===r){const t={...e,_cashBasisExit:{date:n.date,qty:n.qty,price:n.price}};a.push(t)}})}}),a}return e.filter(e=>{if(!e.date)return!1;const a=new Date(e.date),n=a.toLocaleString("default",{month:"short"}),o=a.getFullYear();return n===t&&o===r})}const ae=n.createContext(void 0);const ne=({children:e})=>{const[t,r]=n.useState([]),[a,s]=n.useState([]),[i,l]=n.useState([]),[c,d]=n.useState(!1);n.useEffect(()=>{(()=>{try{const e=function(){try{const e=localStorage.getItem("yearlyStartingCapitals");return e?JSON.parse(e):[]}catch(e){return[]}}(),t=function(){try{const e=localStorage.getItem("capitalChanges");return e?JSON.parse(e):[]}catch(e){return[]}}(),a=function(){try{const e=localStorage.getItem("monthlyStartingCapitalOverrides");return e?JSON.parse(e):[]}catch(e){return[]}}();Array.isArray(e)&&r(e),Array.isArray(t)&&s(t),Array.isArray(a)&&l(a)}catch(e){}finally{d(!0)}})()},[]),n.useEffect(()=>{c&&t.length>0&&function(e){try{localStorage.setItem("yearlyStartingCapitals",JSON.stringify(e))}catch(t){}}(t)},[t,c]),n.useEffect(()=>{c&&a.length>0&&function(e){try{localStorage.setItem("capitalChanges",JSON.stringify(e))}catch(t){}}(a)},[a,c]),n.useEffect(()=>{c&&i.length>0&&function(e){try{localStorage.setItem("monthlyStartingCapitalOverrides",JSON.stringify(e))}catch(t){}}(i)},[i,c]);const u=n.useCallback((e,t)=>{r(r=>{const a=[...r],n=a.findIndex(t=>t.year===e),o={year:e,startingCapital:t,updatedAt:(new Date).toISOString()};return n>=0?a[n]=o:a.push(o),a.sort((e,t)=>e.year-t.year)})},[]),p=n.useCallback(e=>{const r=t.find(t=>t.year===e);return(null==r?void 0:r.startingCapital)||0},[t]),m=n.useCallback((e,t,r)=>{const a=e.length>3&&{January:"Jan",February:"Feb",March:"Mar",April:"Apr",May:"May",June:"Jun",July:"Jul",August:"Aug",September:"Sep",October:"Oct",November:"Nov",December:"Dec"}[e]||e;l(e=>{const n=[...e],o=n.findIndex(e=>e.month===a&&e.year===t),s={id:`${a}-${t}`,month:a,year:t,startingCapital:r,updatedAt:(new Date).toISOString()};return o>=0?n[o]=s:n.push(s),n.sort((e,t)=>e.year-t.year||e.month.localeCompare(t.month))})},[]),f=n.useCallback((e,t)=>{const r=e.length>3&&{January:"Jan",February:"Feb",March:"Mar",April:"Apr",May:"May",June:"Jun",July:"Jul",August:"Aug",September:"Sep",October:"Oct",November:"Nov",December:"Dec"}[e]||e;l(e=>e.filter(e=>!(e.month===r&&e.year===t)))},[]),g=n.useCallback((e,t)=>{const r=e.length>3&&{January:"Jan",February:"Feb",March:"Mar",April:"Apr",May:"May",June:"Jun",July:"Jul",August:"Aug",September:"Sep",October:"Oct",November:"Nov",December:"Dec"}[e]||e,a=i.find(e=>e.month===r&&e.year===t);return a?a.startingCapital:null},[i]),y=n.useCallback(e=>{const t={...e,id:`capital_${(new Date).getTime()}_${Math.random()}`};s(e=>[...e,t])},[]),_=n.useCallback(e=>{s(t=>t.map(t=>t.id===e.id?e:t))},[]),x=n.useCallback(e=>{s(t=>t.filter(t=>t.id!==e))},[]),w=n.useCallback((e,t,r=[],a=!1)=>{if(!r||0===r.length)return 0;if(a){return r.filter(e=>"Closed"===e.positionStatus||"Partial"===e.positionStatus).reduce((r,a)=>{let n=0;return Z(a).forEach(r=>{const o=new Date(r.date),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][o.getMonth()],i=o.getFullYear();if(s===e&&i===t){const e=a.avgEntry||a.entry||0;if(e>0&&r.price>0&&r.qty>0){const t="Buy"===a.buySell?(r.price-e)*r.qty:(e-r.price)*r.qty;n+=t}}}),r+n},0)}return r.filter(r=>{if(!r.date)return!1;const a=new Date(r.date),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a.getMonth()],o=a.getFullYear();return n===e&&o===t}).reduce((e,t)=>{if(void 0!==t.plRs&&null!==t.plRs)return e+t.plRs;const r=t.exitedQty||0,a=t.avgExitPrice||0,n=t.avgEntry||t.entry||0;if(r>0&&a>0&&n>0){return e+("Buy"===t.buySell?(a-n)*r:(n-a)*r)}return e},0)},[]),v=n.useCallback((e,t)=>a.filter(r=>{if(!r.date)return!1;const a=new Date(r.date),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a.getMonth()],o=a.getFullYear();return n===e&&o===t}).reduce((e,t)=>e+("deposit"===t.type?t.amount:-t.amount),0),[a]),b=n.useCallback(e=>{if(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].includes(e))return e;return{January:"Jan",February:"Feb",March:"Mar",April:"Apr",May:"May",June:"Jun",July:"Jul",August:"Aug",September:"Sep",October:"Oct",November:"Nov",December:"Dec"}[e]||e},[]),j=n.useCallback((e,t,r=[],a=new Map,n=null,o=!1)=>{const s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=b(e),l=s.indexOf(i);if(-1===l)throw new Error(`Invalid month: ${e}. Expected short month names like 'Jan', 'Feb', etc.`);const c=`${i}-${t}`;if(a.has(c))return a.get(c);let d=0;const u=new Date(t,l,1);if(n&&u<n)return{month:i,year:t,startingCapital:0,capitalChanges:0,pl:0,finalCapital:0};const m=g(i,t);if(null!==m)d=m;else if(n&&u.getFullYear()===n.getFullYear()&&u.getMonth()===n.getMonth())d=p(t);else{const e=l-1;let i=s[e],c=t;e<0&&(i=s[11],c=t-1);d=j(i,c,r,a,n,o).finalCapital}const h=v(i,t),f=d+h,y=w(i,t,r,o),_={month:i,year:t,startingCapital:f,capitalChanges:h,pl:y,finalCapital:f+y};return a.set(c,_),_},[p,v,w,b,g]),k=n.useCallback((e,r,n=[],o=!1)=>{const s=new Map;let i=null;return[...n,...a].forEach(e=>{if(e.date){const t=new Date(e.date);(!i||t<i)&&(i=t)}}),t.forEach(e=>{const t=new Date(e.year,0,1);(!i||t<i)&&(i=t)}),i||(i=new Date((new Date).getFullYear(),0,1)),i.setDate(1),i.setHours(0,0,0,0),j(e,r,n,s,i,o)},[j,t,a]),C=n.useCallback((e,t,r=[],a=!1)=>{try{return k(e,t,r,a).finalCapital}catch(n){return 1e5}},[k]),D=n.useCallback((e=[],t=!1)=>{try{const r=new Date,a=r.toLocaleString("default",{month:"short"}),n=r.getFullYear();return C(a,n,e,t)}catch(r){return 1e5}},[C]),S=n.useCallback((e=[],r=!1)=>{const n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=[],s=new Map;let i=null,l=null;e.forEach(e=>{if(e.date){const t=new Date(e.date);(!i||t<i)&&(i=t),(!l||t>l)&&(l=t)}!r||"Closed"!==e.positionStatus&&"Partial"!==e.positionStatus||[e.exit1Date,e.exit2Date,e.exit3Date].forEach(e=>{if(e){const t=new Date(e);isNaN(t.getTime())||((!i||t<i)&&(i=t),(!l||t>l)&&(l=t))}})}),a.forEach(e=>{if(e.date){const t=new Date(e.date);(!i||t<i)&&(i=t),(!l||t>l)&&(l=t)}}),t.forEach(e=>{const t=new Date(e.year,0,1);(!i||t<i)&&(i=t)}),i||(i=new Date((new Date).getFullYear(),0,1)),i.setDate(1),i.setHours(0,0,0,0),l||(l=new Date),l.setMonth(l.getMonth()+1),l.setDate(0),l.setHours(23,59,59,999);let c=new Date(i.getFullYear(),i.getMonth(),1);for(;c<=l;){const t=c.getFullYear(),a=n[c.getMonth()];try{const n=j(a,t,e,s,i,r);o.push(n)}catch(d){}c.setMonth(c.getMonth()+1)}return o},[t,a,j]),M=o.useMemo(()=>{try{return D()}catch(e){return 1e5}},[D]),N=n.useCallback((e,t,r,a)=>c?C(e,t,r,a):1e5,[c,C]),U=n.useCallback((e,t)=>c?D(e,t):1e5,[c,D]),z=n.useMemo(()=>({getTruePortfolioSize:N,getLatestTruePortfolioSize:U,yearlyStartingCapitals:t,setYearlyStartingCapital:u,getYearlyStartingCapital:p,monthlyStartingCapitalOverrides:i,setMonthlyStartingCapitalOverride:m,removeMonthlyStartingCapitalOverride:f,getMonthlyStartingCapitalOverride:g,capitalChanges:a,addCapitalChange:y,updateCapitalChange:_,deleteCapitalChange:x,getMonthlyTruePortfolio:k,getAllMonthlyTruePortfolios:S,portfolioSize:c?M:1e5}),[N,U,t,u,p,i,m,f,g,a,y,_,x,k,S,M,c]);return h.jsx(ae.Provider,{value:z,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\utils\\TruePortfolioContext.tsx:Provider:681:4",children:e})},oe=()=>{const e=n.useContext(ae);if(!e)throw new Error("useTruePortfolio must be used within a TruePortfolioProvider");return e},se=({isOpen:e,onOpenChange:t,onSetupComplete:r,userName:a,setUserName:o})=>{const{yearlyStartingCapitals:s,setYearlyStartingCapital:i}=oe(),[l,c]=n.useState(""),[d,u]=n.useState((new Date).getFullYear().toString()),p=()=>{const e=parseFloat(l),n=parseInt(d);isNaN(e)||isNaN(n)||e<=0?alert("Please enter a valid amount and year"):(i(n,e),c(""),t(!1),setTimeout(()=>{alert("✅ Portfolio setup complete! Your True Portfolio system is now active.")},500),r(a))};return 0===s.length?h.jsx(y,{isOpen:e,onOpenChange:t,size:"lg",isDismissable:!1,hideCloseButton:!0,classNames:{base:"max-w-[90vw] max-h-[90vh] sm:max-w-lg",wrapper:"items-center justify-center p-4",body:"overflow-y-auto p-0",backdrop:"bg-black/60"},motionProps:{variants:{enter:{opacity:1,scale:1,y:0,transition:{duration:.5,ease:[.16,1,.3,1]}},exit:{opacity:0,scale:.95,y:20,transition:{duration:.3,ease:[.16,1,.3,1]}}},initial:{opacity:0,scale:.95,y:20}},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:Modal:65:4",children:h.jsx(_,{className:"bg-background/95 backdrop-blur-xl border border-divider/50 shadow-2xl","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:ModalContent:101:6",children:e=>h.jsxs(h.Fragment,{children:[h.jsx(x,{className:"flex items-center gap-3 px-6 py-4 border-b border-divider/50 bg-gradient-to-r from-primary/5 via-secondary/5 to-success/5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:ModalHeader:104:12",children:h.jsxs(Q.div,{className:"flex items-center gap-3",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:div:105:14",children:[h.jsx(Q.div,{className:"p-2 rounded-xl bg-gradient-to-br from-primary/20 to-secondary/20 border border-primary/30",whileHover:{scale:1.05,rotate:5},transition:{type:"spring",stiffness:400,damping:10},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:div:111:16",children:h.jsx(G,{icon:"lucide:sparkles",className:"text-primary text-xl","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:Icon:116:18"})}),h.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:div:118:16",children:[h.jsx("span",{className:"text-lg font-bold tracking-tight bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:span:119:18",children:"Welcome to True Portfolio!"}),h.jsx("p",{className:"text-xs text-default-500 mt-0.5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:p:122:18",children:"Let's set up your trading journey"})]})]})}),h.jsxs(w,{className:"p-6 space-y-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:ModalBody:126:12",children:[h.jsx(Q.div,{className:"bg-gradient-to-br from-content1/60 to-content2/40 rounded-2xl p-4 border border-divider/30 shadow-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:div:127:14",children:h.jsxs("div",{className:"flex items-start gap-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:div:133:16",children:[h.jsx(Q.div,{className:"p-2 rounded-lg bg-primary/10 border border-primary/20",whileHover:{scale:1.1},transition:{type:"spring",stiffness:400,damping:10},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:div:134:18",children:h.jsx(G,{icon:"lucide:sparkles",className:"text-primary text-lg","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:Icon:139:20"})}),h.jsxs("div",{className:"flex-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:div:141:18",children:[h.jsx("h3",{className:"font-semibold text-base mb-2 text-foreground","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:h3:142:20",children:"What's New?"}),h.jsxs("p",{className:"text-xs text-default-600 mb-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:p:143:20",children:["Your journal now uses a ",h.jsx("span",{className:"font-semibold text-primary","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:span:144:46",children:"True Portfolio System"})," that auto-calculates portfolio size:"]}),h.jsx("div",{className:"grid grid-cols-1 gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:div:146:20",children:[{icon:"lucide:dollar-sign",text:"Starting Capital",color:"text-success"},{icon:"lucide:trending-up",text:"Capital Changes",color:"text-warning"},{icon:"lucide:activity",text:"Trading P&L",color:"text-primary"}].map((e,t)=>h.jsxs(Q.div,{className:"flex items-center gap-2",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.3,delay:.5+.1*t},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:div:152:24",children:[h.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center bg-gradient-to-br ${e.color}/10 to-${e.color}/5`,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:div:159:26",children:h.jsx(G,{icon:e.icon,className:`${e.color} text-xs`,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:Icon:160:28"})}),h.jsx("span",{className:"text-xs font-medium text-foreground","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:span:162:26",children:e.text})]},e.text))})]})]})}),h.jsxs(Q.div,{className:"bg-gradient-to-br from-content1/60 to-content2/40 rounded-2xl p-4 border border-divider/30 shadow-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:div:170:14",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:div:176:16",children:[h.jsx(Q.div,{className:"p-2 rounded-lg bg-success/10 border border-success/20",whileHover:{scale:1.1},transition:{type:"spring",stiffness:400,damping:10},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:div:177:18",children:h.jsx(G,{icon:"lucide:user-plus",className:"text-success text-lg","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:Icon:182:20"})}),h.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:div:184:18",children:[h.jsx("h4",{className:"font-semibold text-base text-foreground","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:h4:185:20",children:"Set Your Starting Capital"}),h.jsxs("p",{className:"text-xs text-default-600","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:p:186:20",children:["Enter your details for January ",d]})]})]}),h.jsxs(Q.div,{className:"space-y-3",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,delay:.8},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:div:192:16",children:[h.jsx(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.9},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:div:198:18",children:h.jsx(v,{label:"Your Name",placeholder:"Enter your name",value:a,onValueChange:o,size:"sm",variant:"bordered",startContent:h.jsx(G,{icon:"lucide:user",className:"text-default-400 text-base","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:Icon:206:36"}),isRequired:!0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:Input:199:20"})}),h.jsx(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:1},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:div:211:18",children:h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:div:212:20",children:[h.jsx(v,{label:"Year",placeholder:"e.g., 2025",value:d,onValueChange:u,type:"number",min:"2000",max:"2099",size:"sm",variant:"bordered","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:Input:213:22"}),h.jsx(v,{label:"Starting Capital",placeholder:"e.g., 100000",value:l,onValueChange:c,type:"number",min:"0",step:"1000",startContent:h.jsx("span",{className:"text-default-400 text-base","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:span:232:38",children:"₹"}),size:"sm",variant:"bordered","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:Input:224:22"})]})})]})]}),h.jsx(Q.div,{className:"bg-gradient-to-r from-warning/10 to-orange/10 p-3 rounded-xl border border-warning/20",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4,delay:1},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:div:241:14",children:h.jsxs("div",{className:"flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:div:247:16",children:[h.jsx(Q.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,repeatDelay:3},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:div:248:18",children:h.jsx(G,{icon:"lucide:lightbulb",className:"text-warning text-base","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:Icon:252:20"})}),h.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:div:254:18",children:[h.jsx("p",{className:"font-medium text-warning text-xs","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:p:255:20",children:"Pro Tip:"}),h.jsxs("p",{className:"text-warning-700 dark:text-warning-300 text-xs","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:p:256:20",children:["Add more years later via ",h.jsx("span",{className:"font-semibold","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:span:257:47",children:"Portfolio Settings"})]})]})]})})]}),h.jsx(b,{className:"border-t border-divider/50 px-6 py-4 bg-gradient-to-r from-background/50 to-content1/30","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:ModalFooter:263:12",children:h.jsx(Q.div,{className:"w-full",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,delay:1.2},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:div:264:14",children:h.jsx(j,{color:"primary",onPress:p,isDisabled:!a.trim()||!l||!d||parseFloat(l)<=0||parseInt(d)<2e3||parseInt(d)>2099,startContent:h.jsx(G,{icon:"lucide:rocket",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:Icon:274:32"}),className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 transition-all duration-300",size:"md",variant:"shadow",radius:"full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:Button:270:16",children:h.jsx(Q.span,{whileHover:{scale:1.05},transition:{type:"spring",stiffness:400,damping:10},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetup.tsx:span:280:18",children:"Set Up Portfolio"})})})})]})})}):null},ie=({isOpen:e,onOpenChange:t,userName:r})=>{const a=r.split(" ")[0];return h.jsx(y,{isOpen:e,onOpenChange:t,size:"sm",isDismissable:!1,hideCloseButton:!0,classNames:{base:"max-w-[90vw] sm:max-w-sm",wrapper:"items-center justify-center p-4",backdrop:"bg-black/60"},motionProps:{variants:{enter:{opacity:1,scale:1,y:0,transition:{duration:.5,ease:[.16,1,.3,1]}},exit:{opacity:0,scale:.95,y:20,transition:{duration:.3,ease:[.16,1,.3,1]}}},initial:{opacity:0,scale:.95,y:20}},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\WelcomeMessageModal.tsx:Modal:23:4",children:h.jsxs(_,{className:"bg-background/95 backdrop-blur-xl border border-divider/50 shadow-2xl","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\WelcomeMessageModal.tsx:ModalContent:58:6",children:[h.jsx(x,{className:"flex items-center gap-3 px-6 py-4 border-b border-divider/50 bg-gradient-to-r from-success/5 via-primary/5 to-secondary/5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\WelcomeMessageModal.tsx:ModalHeader:59:8",children:h.jsxs(Q.div,{className:"flex items-center gap-3",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\WelcomeMessageModal.tsx:div:60:10",children:[h.jsx(Q.div,{className:"p-2 rounded-xl bg-gradient-to-br from-success/20 to-primary/20 border border-success/30",animate:{rotate:[0,10,-10,0],scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,repeatDelay:3,ease:"easeInOut"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\WelcomeMessageModal.tsx:div:66:12",children:h.jsx(G,{icon:"lucide:party-popper",className:"text-success text-xl","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\WelcomeMessageModal.tsx:Icon:79:14"})}),h.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\WelcomeMessageModal.tsx:div:81:12",children:[h.jsxs("span",{className:"text-lg font-bold tracking-tight bg-gradient-to-r from-success to-primary bg-clip-text text-transparent","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\WelcomeMessageModal.tsx:span:82:14",children:["Welcome, ",a||"Trader","!"]}),h.jsx("p",{className:"text-xs text-default-500 mt-0.5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\WelcomeMessageModal.tsx:p:85:14",children:"You're all set to trade!"})]})]})}),h.jsxs(w,{className:"px-4 py-3 space-y-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\WelcomeMessageModal.tsx:ModalBody:89:8",children:[h.jsx(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,delay:.4},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\WelcomeMessageModal.tsx:div:90:10",children:h.jsxs("p",{className:"text-sm text-default-700 dark:text-default-300","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\WelcomeMessageModal.tsx:p:95:12",children:["Get ready to feel ",h.jsx("span",{className:"font-semibold text-success","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\WelcomeMessageModal.tsx:span:96:32",children:"something truly good"})," about your trading journey!"]})}),h.jsx(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,delay:.6},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\WelcomeMessageModal.tsx:div:99:10",children:h.jsx("p",{className:"text-xs text-default-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\WelcomeMessageModal.tsx:p:104:12",children:"Your True Portfolio System is ready to empower your trades."})})]}),h.jsx(b,{className:"border-t border-divider/50 px-4 py-3 bg-gradient-to-r from-background/50 to-content1/30","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\WelcomeMessageModal.tsx:ModalFooter:109:8",children:h.jsx(Q.div,{className:"w-full",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,delay:.8},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\WelcomeMessageModal.tsx:div:110:10",children:h.jsx(j,{color:"success",onPress:()=>t(!1),startContent:h.jsx(G,{icon:"lucide:rocket",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\WelcomeMessageModal.tsx:Icon:119:28"}),className:"w-full bg-gradient-to-r from-success to-primary hover:from-success/90 hover:to-primary/90 transition-all duration-300",size:"md",variant:"shadow",radius:"full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\WelcomeMessageModal.tsx:Button:116:12",children:h.jsx(Q.span,{whileHover:{scale:1.05},transition:{type:"spring",stiffness:400,damping:10},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\WelcomeMessageModal.tsx:span:125:14",children:"Let's Go!"})})})})]})})},le=W("https://pbhevzjyyjkahlwvvfhj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBiaGV2emp5eWprYWhsd3Z2ZmhqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA4MTM3NjksImV4cCI6MjA1NjM4OTc2OX0.xgrPk3cz4Vclry_9WmHaO1NVCi2TOQQI0jsLZvtl6I8",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1,flowType:"implicit",storage:"undefined"!=typeof window?window.localStorage:void 0,storageKey:"supabase.auth.token"}});class ce{static async signUp({email:e,password:t,firstName:r,lastName:a}){try{const{data:n,error:o}=await le.auth.signUp({email:e,password:t,options:{data:{first_name:r,last_name:a,full_name:r&&a?`${r} ${a}`:r||a||""}}});if(o)throw o;return{data:n,error:null}}catch(n){return{data:null,error:n}}}static async signIn({email:e,password:t}){var r;try{console.log("🔐 Attempting sign in for email:",e);const{data:a,error:n}=await le.auth.signInWithPassword({email:e,password:t});if(n)throw console.error("❌ Sign in error:",n.message),n;return console.log("✅ Sign in successful for user:",null==(r=a.user)?void 0:r.email),{data:a,error:null}}catch(a){const e=a;return console.error("❌ Sign in failed:",e.message),{data:null,error:e}}}static async signInWithProvider(e){try{const{data:t,error:r}=await le.auth.signInWithOAuth({provider:e,options:{redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"}}});if(r)throw r;return{data:t,error:null}}catch(t){return{data:null,error:t}}}static async signOut(){try{const{error:e}=await le.auth.signOut();if(e)throw e;return{error:null}}catch(e){return{error:e}}}static async resetPassword(e){try{const{data:t,error:r}=await le.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/reset-password`});if(r)throw r;return{data:t,error:null}}catch(t){return{data:null,error:t}}}static async updatePassword(e){try{const{data:t,error:r}=await le.auth.updateUser({password:e});if(r)throw r;return{data:t,error:null}}catch(t){return{data:null,error:t}}}static async resendVerification(e){try{const{data:t,error:r}=await le.auth.resend({type:"signup",email:e});if(r)throw r;return{data:t,error:null}}catch(t){return{data:null,error:t}}}static async checkUserExists(e){try{const{error:t}=await le.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/reset-password`});return!t||!t.message.includes("User not found")}catch(t){return!1}}static async updateProfile(e){try{const{data:t,error:r}=await le.auth.updateUser({email:e.email,data:{first_name:e.firstName,last_name:e.lastName,full_name:e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:e.firstName||e.lastName||""}});if(r)throw r;return{data:t,error:null}}catch(t){return{data:null,error:t}}}static async getCurrentUser(){try{const{data:{user:e},error:t}=await le.auth.getUser();if(t)throw"Auth session missing!"!==t.message&&console.error("Auth error getting user:",t),t;return{user:e,error:null}}catch(e){const t=e;return"Auth session missing!"!==t.message&&console.error("Auth error in getCurrentUser:",t),{user:null,error:t}}}static async getCurrentSession(){try{const{data:{session:e},error:t}=await le.auth.getSession();if(t)throw t;return{session:e,error:null}}catch(e){return{session:null,error:e}}}static onAuthStateChange(e){return le.auth.onAuthStateChange(e)}static async isAuthenticated(){const{session:e}=await this.getCurrentSession();return!!e}static async getUserId(){const{user:e}=await this.getCurrentUser(),t=(null==e?void 0:e.id)||null;return t?console.log("🔐 User authenticated with ID:",t):console.log("❌ No authenticated user found"),t}static async refreshSession(){try{const{data:e,error:t}=await le.auth.refreshSession();if(t)throw t;return{data:e,error:null}}catch(e){return{data:null,error:e}}}}const de=async()=>{try{const{session:e}=await ce.getCurrentSession(),{user:t}=await ce.getCurrentUser();return{user:t,session:e,loading:!1,error:null}}catch(e){const t=e;return"Auth session missing!"===t.message?{user:null,session:null,loading:!1,error:null}:{user:null,session:null,loading:!1,error:t.message}}},ue=e=>{if(!e)return"";switch(console.log("🔍 Processing auth error:",e.message),e.message){case"Invalid login credentials":return"INVALID_CREDENTIALS";case"Email not confirmed":case"Email link is invalid or has expired":case"Signup requires a valid password":return"EMAIL_NOT_CONFIRMED";case"User already registered":return"An account with this email already exists. Please sign in instead.";case"Password should be at least 6 characters":return"Password must be at least 6 characters long.";case"Unable to validate email address: invalid format":return"Please enter a valid email address.";case"Signup is disabled":return"New user registration is currently disabled.";case"For security purposes, you can only request this once every 60 seconds":return"Please wait 60 seconds before requesting another verification email.";case"Auth session missing!":return"SESSION_MISSING";default:return e.message.toLowerCase().includes("invalid login")||e.message.toLowerCase().includes("invalid credentials")||e.message.toLowerCase().includes("wrong password")||e.message.toLowerCase().includes("incorrect password")?"INVALID_CREDENTIALS":e.message.toLowerCase().includes("confirm")||e.message.toLowerCase().includes("verify")||e.message.toLowerCase().includes("email")?"EMAIL_NOT_CONFIRMED":(console.log("⚠️ Unhandled auth error:",e.message),e.message||"An unexpected error occurred. Please try again.")}},pe=n.createContext(void 0),me=({children:e})=>{const[t,r]=n.useState({user:null,session:null,loading:!0,error:null}),[a,o]=n.useState(!0);n.useEffect(()=>{(async()=>{try{const{data:{session:e},error:t}=await le.auth.getSession();if(t)return r({user:null,session:null,loading:!1,error:null}),void o(!1);r(e?{user:e.user,session:e,loading:!1,error:null}:{user:null,session:null,loading:!1,error:null}),o(!1)}catch(e){r({user:null,session:null,loading:!1,error:null}),o(!1)}})();const e=setTimeout(()=>{r(e=>({...e,loading:!1})),o(!1)},2e3);return()=>clearTimeout(e)},[]),n.useEffect(()=>{const{data:{subscription:e}}=le.auth.onAuthStateChange(async(e,t)=>{if(!a)try{if("SIGNED_OUT"===e)return void r({user:null,session:null,loading:!1,error:null});if("SIGNED_IN"===e)return void(t&&r({user:t.user,session:t,loading:!1,error:null}));if("TOKEN_REFRESHED"===e)return void(t&&r(e=>({...e,user:t.user,session:t,loading:!1,error:null})));if("INITIAL_SESSION"===e)return;r(e=>({...e,loading:!1}))}catch(n){r(e=>({...e,loading:!1,error:null}))}});return()=>e.unsubscribe()},[a]);const s={...t,signIn:async(e,t)=>{console.log("🔐 AuthContext signIn called for:",e),r(e=>({...e,loading:!0,error:null}));try{const{data:a,error:n}=await ce.signIn({email:e,password:t});return n?(console.error("❌ AuthService returned error:",n.message),r(e=>({...e,loading:!1})),{error:n.message}):(console.log("✅ AuthService sign in successful"),{error:null})}catch(a){console.error("❌ Unexpected error in AuthContext signIn:",a);const e="An unexpected error occurred during sign in";return r(e=>({...e,loading:!1})),{error:e}}},signUp:async(e,t,a,n)=>{r(e=>({...e,loading:!0,error:null}));try{const{data:o,error:s}=await ce.signUp({email:e,password:t,firstName:a,lastName:n});return s?(r(e=>({...e,loading:!1,error:s.message})),{error:s.message}):(r(e=>({...e,loading:!1})),{error:null})}catch(o){const e="An unexpected error occurred during sign up";return r(t=>({...t,loading:!1,error:e})),{error:e}}},signInWithProvider:async e=>{r(e=>({...e,loading:!0,error:null}));try{const{data:t,error:a}=await ce.signInWithProvider(e);return a?(r(e=>({...e,loading:!1,error:a.message})),{error:a.message}):{error:null}}catch(t){const a=`An unexpected error occurred during ${e} sign in`;return r(e=>({...e,loading:!1,error:a})),{error:a}}},signOut:async()=>{r(e=>({...e,loading:!0,error:null}));try{await ce.signOut()}catch(e){r(e=>({...e,loading:!1,error:"Failed to sign out"}))}},resetPassword:async e=>{try{const{data:t,error:r}=await ce.resetPassword(e);return r?{error:r.message}:{error:null}}catch(t){return{error:"An unexpected error occurred while resetting password"}}},resendVerification:async e=>{try{const{data:t,error:r}=await ce.resendVerification(e);return r?{error:r.message}:{error:null}}catch(t){return{error:"An unexpected error occurred while resending verification email"}}},updatePassword:async e=>{try{const{data:t,error:r}=await ce.updatePassword(e);return r?{error:r.message}:{error:null}}catch(t){return{error:"An unexpected error occurred while updating password"}}},updateProfile:async e=>{try{const{data:t,error:a}=await ce.updateProfile(e);if(a)return{error:a.message};const n=await de();return r(n),{error:null}}catch(t){return{error:"An unexpected error occurred while updating profile"}}},refreshSession:async()=>{try{await ce.refreshSession();const e=await de();r(e)}catch(e){}}};return h.jsx(pe.Provider,{value:s,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\context\\AuthContext.tsx:Provider:323:4",children:e})},he=()=>{const e=n.useContext(pe);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},fe="user_name",ge="welcome_complete",ye=({userName:e,setUserName:t})=>{const{user:r}=he(),{yearlyStartingCapitals:a}=oe(),[o,s]=n.useState(!1),[i,l]=n.useState(!1),[c,d]=n.useState(!1),[u,p]=n.useState(()=>"true"===localStorage.getItem(ge));if(!r)return null;n.useEffect(()=>{const e=localStorage.getItem(fe);e&&t(e);"true"===localStorage.getItem(ge)&&p(!0),d(!0)},[t]),n.useEffect(()=>{c&&0===a.length&&!i&&s(!0)},[a,c,i]);return h.jsxs(h.Fragment,{children:[h.jsx(se,{isOpen:o,onOpenChange:s,onSetupComplete:e=>{t(e),localStorage.setItem(fe,e),s(!1),u||(l(!0),localStorage.setItem(ge,"true"),p(!0))},userName:e,setUserName:t,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetupManager.tsx:TruePortfolioSetup:67:6"}),h.jsx(ie,{isOpen:i,onOpenChange:l,userName:e,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\TruePortfolioSetupManager.tsx:WelcomeMessageModal:74:6"})]})},_e=({isOpen:e,onOpenChange:t})=>{const{yearlyStartingCapitals:r,setYearlyStartingCapital:a,getYearlyStartingCapital:o}=oe(),[s,i]=n.useState(""),[l,c]=n.useState(""),[d,u]=n.useState(null),[p,m]=n.useState(""),f=(new Date).getFullYear(),g=f+1,C=()=>{const e=parseInt(s),t=parseFloat(l);isNaN(e)||isNaN(t)||e<2e3||e>2100||t<=0?alert("Please enter a valid year (2000-2100) and amount (> 0)"):(a(e,t),i(""),c(""))},D=()=>{if(null===d)return;const e=parseFloat(p);isNaN(e)||e<=0?alert("Please enter a valid amount (> 0)"):(a(d,e),u(null),m(""))},S=()=>{u(null),m("")},M=[...r].sort((e,t)=>t.year-e.year);return h.jsx(y,{isOpen:e,onOpenChange:t,size:"lg",scrollBehavior:"inside",classNames:{base:"max-w-[90vw] max-h-[85vh] sm:max-w-lg",wrapper:"items-center justify-center p-4",body:"overflow-y-auto p-0",backdrop:"bg-black/50"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:Modal:90:4",children:h.jsx(_,{className:"bg-background/95 backdrop-blur-xl border border-divider/50 shadow-2xl","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:ModalContent:102:6",children:e=>h.jsxs(h.Fragment,{children:[h.jsx(x,{className:"flex items-center gap-3 px-6 py-4 border-b border-divider/50 bg-gradient-to-r from-primary/5 to-secondary/5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:ModalHeader:105:12",children:h.jsxs("div",{className:"flex items-center gap-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:div:106:14",children:[h.jsx("div",{className:"p-2 rounded-lg bg-primary/10","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:div:107:16",children:h.jsx(G,{icon:"lucide:calendar",className:"text-primary text-lg","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:Icon:108:18"})}),h.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:div:110:16",children:[h.jsx("span",{className:"text-lg font-semibold tracking-tight","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:span:111:18",children:"Yearly Starting Capital"}),h.jsx("p",{className:"text-xs text-default-500 font-normal mt-0.5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:p:112:18",children:"Set starting capital for January of each year"})]})]})}),h.jsx(w,{className:"p-6 space-y-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:ModalBody:118:12",children:h.jsxs("div",{className:"space-y-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:div:119:14",children:[h.jsxs("div",{className:"bg-content1/50 rounded-xl p-4 border border-divider/30","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:div:121:16",children:[h.jsxs("h3",{className:"font-semibold text-base mb-3 flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:h3:122:18",children:[h.jsx(G,{icon:"lucide:plus-circle",className:"w-4 h-4 text-primary","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:Icon:123:20"}),"Add New Year"]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-[120px_1fr_auto] gap-3 items-end","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:div:126:18",children:[h.jsx("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:div:127:20",children:h.jsx(v,{label:"Year",placeholder:`${g}`,value:s,onChange:e=>i(e.target.value),type:"number",min:"2000",max:"2100",size:"sm",variant:"bordered",className:"w-full",classNames:{input:"text-center",inputWrapper:"min-w-[100px]"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:Input:128:22"})}),h.jsx("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:div:145:20",children:h.jsx(v,{label:"Starting Capital",placeholder:"100000",value:l,onChange:e=>c(e.target.value),type:"number",min:"0",step:"1000",size:"sm",variant:"bordered",className:"w-full",startContent:h.jsx("span",{className:"text-default-400 text-sm","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:span:157:38",children:"₹"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:Input:146:22"})}),h.jsx("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:div:160:20",children:h.jsx(j,{color:"primary",onPress:C,isDisabled:!s||!l,isIconOnly:!0,size:"sm",className:"w-10 h-10 rounded-lg","aria-label":"Add new year","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:Button:161:22",children:h.jsx(G,{icon:"lucide:plus",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:Icon:170:24"})})})]})]}),h.jsxs("div",{className:"bg-content1/50 rounded-xl p-4 border border-divider/30","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:div:177:16",children:[h.jsxs("h3",{className:"font-semibold text-base mb-3 flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:h3:178:18",children:[h.jsx(G,{icon:"lucide:calendar-check",className:"w-4 h-4 text-success","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:Icon:179:20"}),"Existing Years"]}),0===M.length?h.jsxs("div",{className:"text-center py-6 text-default-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:div:183:20",children:[h.jsx(G,{icon:"lucide:calendar-x",className:"text-2xl mb-2 mx-auto opacity-50","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:Icon:184:22"}),h.jsx("p",{className:"text-sm","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:p:185:22",children:"No yearly capitals set"}),h.jsx("p",{className:"text-xs opacity-70","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:p:186:22",children:"Add your first year above"})]}):h.jsx("div",{className:"space-y-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:div:189:22",children:M.map(e=>h.jsxs("div",{className:"flex items-center justify-between p-4 border border-divider/50 rounded-lg bg-background/50 hover:bg-content1/30 transition-colors","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:div:191:26",children:[h.jsxs("div",{className:"flex items-center gap-4 flex-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:div:195:28",children:[h.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center "+(e.year===f?"bg-primary/10 text-primary":"bg-success/10 text-success"),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:div:196:30",children:h.jsx(G,{icon:"lucide:calendar",className:"w-5 h-5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:Icon:201:32"})}),h.jsxs("div",{className:"flex-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:div:203:30",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:div:204:32",children:[h.jsx("span",{className:"font-semibold text-base","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:span:205:34",children:e.year}),e.year===f&&h.jsx(k,{size:"sm",color:"primary",variant:"flat",className:"text-xs","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:Chip:207:36",children:"Current"})]}),h.jsxs("p",{className:"text-xs text-default-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:p:212:32",children:["Updated: ",new Date(e.updatedAt).toLocaleDateString()]})]}),h.jsx("div",{className:"text-right","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:div:216:30",children:d===e.year?h.jsx(v,{value:p,onChange:e=>m(e.target.value),type:"number",min:"0",step:"1000",className:"w-36",size:"sm",variant:"bordered",startContent:h.jsx("span",{className:"text-default-400 text-sm","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:span:227:50",children:"₹"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:Input:218:34"}):h.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:div:230:34",children:[h.jsxs("span",{className:"font-bold text-base text-success-600","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:span:231:36",children:["₹",e.startingCapital.toLocaleString()]}),h.jsx("p",{className:"text-xs text-default-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:p:234:36",children:"Starting Capital"})]})})]}),h.jsx("div",{className:"flex items-center gap-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:div:239:28",children:d===e.year?h.jsxs(h.Fragment,{children:[h.jsx(j,{size:"sm",color:"success",variant:"flat",onPress:D,isIconOnly:!0,className:"min-w-8 w-8 h-8","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:Button:242:34",children:h.jsx(G,{icon:"lucide:check",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:Icon:250:36"})}),h.jsx(j,{size:"sm",color:"danger",variant:"flat",onPress:S,isIconOnly:!0,className:"min-w-8 w-8 h-8","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:Button:252:34",children:h.jsx(G,{icon:"lucide:x",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:Icon:260:36"})})]}):h.jsx(j,{size:"sm",variant:"flat",onPress:()=>{return t=e.year,u(t),void m(o(t).toString());var t},isIconOnly:!0,className:"min-w-8 w-8 h-8","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:Button:264:32",children:h.jsx(G,{icon:"lucide:edit",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:Icon:271:34"})})})]},e.year))})]})]})}),h.jsx(b,{className:"flex-shrink-0 border-t border-divider/50 px-6 py-3 bg-gradient-to-r from-background/50 to-content1/30","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:ModalFooter:282:12",children:h.jsx(j,{variant:"flat",onPress:e,size:"sm",className:"w-full sm:w-auto min-w-20",startContent:h.jsx(G,{icon:"lucide:x",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:Icon:288:30"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\YearlyStartingCapitalModal.tsx:Button:283:14",children:"Close"})})]})})})},xe=n.createContext(void 0),we=({children:e})=>{const[t,r]=n.useState("cash"),[a,s]=n.useState(!0);n.useEffect(()=>{try{const e=localStorage.getItem("accountingMethod");!e||"accrual"!==e&&"cash"!==e?(r("cash"),localStorage.setItem("accountingMethod","cash")):r(e)}catch(e){r("cash")}finally{s(!1)}},[]);const i=o.useCallback(e=>{e!==t&&(r(e),requestIdleCallback(()=>{try{localStorage.setItem("accountingMethod",e)}catch(t){}}))},[t]),l=o.useCallback(()=>{i("accrual"===t?"cash":"accrual")},[t,i]),c=o.useCallback(()=>{try{localStorage.removeItem("accountingMethod"),r("cash")}catch(e){}},[]),d=o.useMemo(()=>({accountingMethod:t,setAccountingMethod:i,toggleAccountingMethod:l,clearAccountingMethodData:c}),[t,i,l,c]);return h.jsx(xe.Provider,{value:d,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\context\\AccountingMethodContext.tsx:Provider:80:4",children:e})},ve=()=>{const e=n.useContext(xe);if(!e)throw new Error("useAccountingMethod must be used within an AccountingMethodProvider");return e},be=(e=[])=>{const t=oe(),{accountingMethod:r}=ve(),a="cash"===r,o=n.useMemo(()=>(r,n)=>t.getTruePortfolioSize(r,n,e,a),[t.getTruePortfolioSize,e,a]),s=n.useMemo(()=>()=>t.getLatestTruePortfolioSize(e,a),[t.getLatestTruePortfolioSize,e,a]),i=n.useMemo(()=>(r,n)=>t.getMonthlyTruePortfolio(r,n,e,a),[t.getMonthlyTruePortfolio,e,a]),l=n.useMemo(()=>()=>t.getAllMonthlyTruePortfolios(e,a),[t.getAllMonthlyTruePortfolios,e,a]),c=n.useMemo(()=>s(),[s]);return{getTruePortfolioSize:o,getLatestTruePortfolioSize:s,getMonthlyTruePortfolio:i,getAllMonthlyTruePortfolios:l,portfolioSize:c,getPortfolioSize:o,yearlyStartingCapitals:t.yearlyStartingCapitals,setYearlyStartingCapital:t.setYearlyStartingCapital,getYearlyStartingCapital:t.getYearlyStartingCapital,monthlyStartingCapitalOverrides:t.monthlyStartingCapitalOverrides,setMonthlyStartingCapitalOverride:t.setMonthlyStartingCapitalOverride,removeMonthlyStartingCapitalOverride:t.removeMonthlyStartingCapitalOverride,getMonthlyStartingCapitalOverride:t.getMonthlyStartingCapitalOverride,capitalChanges:t.capitalChanges,addCapitalChange:t.addCapitalChange,updateCapitalChange:t.updateCapitalChange,deleteCapitalChange:t.deleteCapitalChange}},je={type:"all"};function ke(){if("undefined"==typeof window)return je;try{const e=localStorage.getItem("globalFilter");if(e){const t=JSON.parse(e);return t.startDate&&(t.startDate=new Date(t.startDate)),t.endDate&&(t.endDate=new Date(t.endDate)),t}return je}catch(e){return je}}const Ce=n.createContext({filter:je,setFilter:()=>{}}),De=({children:e})=>{const[t,r]=n.useState(ke);o.useEffect(()=>{t.type===je.type&&!t.startDate&&!t.endDate?localStorage.getItem("globalFilter")&&localStorage.removeItem("globalFilter"):function(e){if("undefined"!=typeof window)try{const t={...e};"all"===t.type&&(delete t.startDate,delete t.endDate),localStorage.setItem("globalFilter",JSON.stringify(t))}catch(t){}}(t)},[t]);const a=n.useMemo(()=>({filter:t,setFilter:r}),[t]);return h.jsx(Ce.Provider,{value:a,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\context\\GlobalFilterContext.tsx:Provider:92:4",children:e})},Se=()=>n.useContext(Ce);function Me(e,t){const r=new Date(e),a=new Date;switch(t.type){case"all":default:return!0;case"week":{const e=new Date(a);return e.setDate(a.getDate()-7),r>=e&&r<=a}case"month":return r.getMonth()===(t.month??a.getMonth())&&r.getFullYear()===(t.year??a.getFullYear());case"fy":{let e=t.fyStartYear;void 0===e&&(e=a.getMonth()>=3?a.getFullYear():a.getFullYear()-1);const n=new Date(e,3,1),o=new Date(e+1,2,31,23,59,59,999);return r>=n&&r<=o}case"cy":{const e=t.year??a.getFullYear(),n=new Date(e,0,1),o=new Date(e,11,31,23,59,59,999);return r>=n&&r<=o}case"custom":return!t.startDate||!t.endDate||r>=t.startDate&&r<=t.endDate}}function Ne(e,t,r=!1){return Me(te(e,r),t)}function Ue(e){const t=e.reduce((e,t)=>e+t.qty,0),r=e.reduce((e,t)=>e+t.price*t.qty,0);return t?r/t:0}function ze(e,t){return Math.round(e*t)}function Pe(e,t){return t?e/t*100:0}function Ae(e,t){return t&&e?Math.abs((t-e)/t*100):0}function Ie(...e){return e.reduce((e,t)=>e+t,0)}function Te(e){const t=e.reduce((e,t)=>e+t.qty,0),r=e.reduce((e,t)=>e+t.price*t.qty,0);return t?r/t:0}function Ee(e,t,r,a,n,o,s="Buy"){if(!e||e<=0)return 0;if("number"!=typeof a||"number"!=typeof n)return 0;if(a<0||n<0)return 0;const i=a+n;if(0===i)return 0;if(!["Open","Closed","Partial"].includes(o))return 0;let l=0;if("Open"===o){if(!r||r<=0)return 0;l=(r-e)/e*100}else if("Closed"===o){if(!t||t<=0)return 0;l=(t-e)/e*100}else if("Partial"===o){if(!r||r<=0||!t||t<=0)return 0;l=((t-e)/e*100*n+(r-e)/e*100*a)/i}return"Sell"===s?-l:l}function Oe(e,t,r,a,n=0,o=0,s=0,i="Buy"){if(!t||!r)return 0;const l=o+s;if(0===l)return 0;const c=Math.abs(t-r);if(0===c)return 0;let d=0;if("Open"===a)d="Buy"===i?e-t:t-e;else if("Closed"===a)d="Buy"===i?n-t:t-n;else if("Partial"===a){d=(("Buy"===i?n-t:t-n)*s+("Buy"===i?e-t:t-e)*o)/l}return Math.abs(d/c)}function Be(e,t,r=[],a=[]){try{if(!e)return 0;const n=[];n.push({entryDate:e,exitDate:t||null,quantity:1});for(const e of r)e.date&&n.push({entryDate:e.date,exitDate:t||null,quantity:e.qty||1});if(a.length>0){let e=[...[...a].sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime())];for(const t of n){if(0===e.length)break;const r=e[0];t.exitDate=r.date;const a=Math.min(t.quantity,r.qty);r.qty-=a,r.qty<=0&&e.shift()}}return function(e){if(!e.length)return 0;let t=0,r=0;for(const a of e){if(!a.entryDate)continue;const e=new Date(a.entryDate);if(isNaN(e.getTime()))continue;const n=a.exitDate?new Date(a.exitDate):new Date;a.exitDate&&isNaN(n.getTime())||(e.setHours(0,0,0,0),n.setHours(0,0,0,0),t+=Math.max(1,Math.ceil((n.getTime()-e.getTime())/864e5))*a.quantity,r+=a.quantity)}return r>0?Math.round(t/r):0}(n)}catch(n){return 0}}function Fe(e,t){return e*t}function qe(e,t){return t?e/t*100:0}function Re(e,t,r){if(!e||0===e.length)return 0;return e.filter(e=>"Open"===e.positionStatus||"Partial"===e.positionStatus).reduce((e,a)=>e+Le(a,t,r),0)}function Le(e,t,r){const a=new Date(e.date),n=a.toLocaleString("default",{month:"short"}),o=a.getFullYear(),s=r?r(n,o):void 0,i=void 0!==s?s:t,l=e.avgEntry||e.entry||0,c=e.sl||0,d=e.tsl||0,u=e.openQty||0;let p=0;if(p=d>0&&c>0||d>0?d:c>0?c:0,!l||!p||!u)return 0;let m=0;if("Buy"===(e.buySell||"Buy")){if(p>=l)return 0;m=(l-p)*u}else{if(p<=l)return 0;m=(p-l)*u}return i>0?Math.max(0,m)/i*100:0}function Ke(e){return e/365}function Ye(e,t,r){return r.reduce((r,a,n)=>{const o=Ke((t[n].getTime()-t[0].getTime())/864e5);return r+a/Math.pow(1+e,o)},0)}function Ge(e,t,r,a,n){const o=[{date:e,amount:-t},...n,{date:r,amount:a}].sort((e,t)=>e.date.getTime()-t.date.getTime());return 100*function(e,t,r=.1){if(e.length!==t.length||e.length<2)return 0;const a=t.some(e=>e>0),n=t.some(e=>e<0);if(!a||!n)return 0;let o=r;for(let s=0;s<100;s++){const r=Ye(o,e,t);if(Math.abs(r)<1e-7)return o;const a=t.reduce((t,r,a)=>{const n=Ke((e[a].getTime()-e[0].getTime())/864e5);return t-n*r/Math.pow(1+o,n+1)},0),n=o-r/a;if(Math.abs(n-o)<1e-7)return n;o=n}return o}(o.map(e=>e.date),o.map(e=>e.amount))}function Qe(e,t,r,a){return r&&e&&t?"Buy"===a?(t-e)*r:(e-t)*r:0}function $e(e,t,r){let a=e.map(e=>({...e})),n=0;for(const o of t){let e=o.qty;for(;e>0&&a.length>0;){const t=a[0],s=Math.min(t.qty,e);n+="Buy"===r?s*(o.price-t.price):s*(t.price-o.price),t.qty-=s,e-=s,0===t.qty&&a.shift()}}return n}function We(e,t,r,a,n="Buy"){return e.filter(e=>e.price>0&&e.qty>0).map(e=>{let o="Open"===a?t:r;"Partial"===a&&(o=t||r);let s=0;return o&&e.price&&(s=(o-e.price)/e.price*100,"Sell"===n&&(s=-s)),{entryPrice:e.price,qty:e.qty,movePercent:s,description:e.description||`Entry at ₹${e.price}`}})}function Je(e){Number(e.entry);const t=Number(e.sl),r=Number(e.tsl),a=Number(e.cmp),n=Number(e.avgExitPrice),o=e.buySell,s=e.positionStatus,i=Number(e.exitedQty),l=Number(e.openQty),c=[{label:"Initial Entry",price:Number(e.entry),qty:Number(e.initialQty)},{label:"Pyramid 1",price:Number(e.pyramid1Price),qty:Number(e.pyramid1Qty)},{label:"Pyramid 2",price:Number(e.pyramid2Price),qty:Number(e.pyramid2Qty)}].filter(e=>e.price>0&&e.qty>0),d=c.reduce((e,t)=>e+(t.qty||0),0),u=c.map(e=>{let c;c="Initial Entry"===e.label?t:r>0?r:t;const u=e.price-c,p=Math.abs(u);let m=0;if("Open"===s)m="Buy"===o?a-e.price:e.price-a;else if("Closed"===s)m="Buy"===o?n-e.price:e.price-n;else if("Partial"===s){const t="Buy"===o?n-e.price:e.price-n,r="Buy"===o?a-e.price:e.price-a;m=d>0?(t*i+r*l)/d:0}return{rrValue:0!==p?Math.abs(m/p):0,qty:e.qty}});return d>0?u.reduce((e,t)=>e+t.rrValue*(t.qty||0),0)/d:0}function Ve(e,t,r=!1){const a=new Map,n=function(e){const t=new Set;return e.forEach(e=>{if(e.date){const r=new Date(e.date);r.setHours(0,0,0,0),t.add(r.getTime())}if(e.pyramid1Date){const r=new Date(e.pyramid1Date);r.setHours(0,0,0,0),t.add(r.getTime())}if(e.pyramid2Date){const r=new Date(e.pyramid2Date);r.setHours(0,0,0,0),t.add(r.getTime())}if(e.exit1Date){const r=new Date(e.exit1Date);r.setHours(0,0,0,0),t.add(r.getTime())}if(e.exit2Date){const r=new Date(e.exit2Date);r.setHours(0,0,0,0),t.add(r.getTime())}if(e.exit3Date){const r=new Date(e.exit3Date);r.setHours(0,0,0,0),t.add(r.getTime())}}),Array.from(t).map(e=>new Date(e)).sort((e,t)=>e.getTime()-t.getTime())}(e).concat(t.map(e=>{const t=new Date(e.date);return t.setHours(0,0,0,0),t})).sort((e,t)=>e.getTime()-t.getTime());if(0===n.length)return a.set((new Date).setHours(0,0,0,0),1e3),a;let o=0;const s=n[0],i=t.find(e=>{const t=new Date(e.date);return t.setHours(0,0,0,0),t.getTime()===s.getTime()});o=i?"deposit"===i.type?i.amount:-i.amount:1e3;for(const l of n){const n=l.getTime();t.filter(e=>{const t=new Date(e.date);return t.setHours(0,0,0,0),t.getTime()===n}).forEach(e=>{o+="deposit"===e.type?e.amount:-e.amount});const s=e.filter(e=>{if("Closed"===e.positionStatus||"Partial"===e.positionStatus){const t=[e.exit1Date,e.exit2Date,e.exit3Date].filter(e=>e&&""!==e.trim()),r=t.length>0?t.sort((e,t)=>new Date(t).getTime()-new Date(e).getTime())[0]:e.date,a=new Date(r);return a.setHours(0,0,0,0),a.getTime()===n}return!1});let i=s;if(r){const e=new Set;i=s.filter(t=>{const r=t.id.split("_exit_")[0];return!e.has(r)&&(e.add(r),!0)})}i.forEach(e=>{const t=ee(e,r);o+=t}),a.set(n,o)}return a}function He(e){const t=new Map,r=Array.from(e.keys()).sort((e,t)=>e-t);if(r.length<=1)return t;let a=e.get(r[0])||0;for(let n=1;n<r.length;n++){const o=r[n],s=e.get(o)||0;if(0!==a){const e=(s-a)/a;t.set(o,e)}else t.set(o,0);a=s}return t}function Xe(e){if(e.length<2)return 0;const t=e.reduce((e,t)=>e+t,0)/e.length,r=e.reduce((e,r)=>e+Math.pow(r-t,2),0)/(e.length-1);return Math.sqrt(r)}function Ze(e){const t=Array.from(e.keys()).sort((e,t)=>e-t);if(0===t.length)return 0;let r=e.get(t[0])||0,a=0;for(const n of t){const t=e.get(n)||0;if(t>r&&(r=t),r>0){const e=(r-t)/r;e>a&&(a=e)}}return a}function et(e,t=0){if(0===e.length)return 0;const r=e.reduce((e,r)=>r<t?e+Math.pow(r-t,2):e,0);if(0===r)return 0;const a=r/e.length;return Math.sqrt(a)}function tt(e,t,r){return Math.abs(r)<1e-9?0:(e-t)/r}function rt(e,t){return Math.abs(t)<1e-9?e>0?999:0:e/t}function at(e,t,r){return Math.abs(r)<1e-9?0:(e-t)/r}function nt(e,t=252){return e*Math.sqrt(t)}const ot=e=>{let t=0;for(let r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t&=t}return Math.abs(t).toString(16).padStart(8,"0")},st=e=>{if(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e))return e;const t=ot(e),r=ot(e+"_salt1"),a=ot(e+"_salt2"),n=ot(e+"_salt3");return[t.substr(0,8),r.substr(0,4),"4"+a.substr(0,3),(3&parseInt(n.substr(0,1),16)|8).toString(16)+n.substr(1,3),(t+r).substr(0,12)].join("-")},it=new Map,lt=e=>{let t=e.id;for(const[r,a]of it.entries())if(a===e.id){t=r;break}return{id:t,tradeNo:e.trade_no,date:e.date,name:e.name,entry:Number(e.entry||0),avgEntry:Number(e.avg_entry||0),sl:Number(e.sl||0),tsl:Number(e.tsl||0),buySell:e.buy_sell,cmp:Number(e.cmp||0),setup:e.setup||"",baseDuration:e.base_duration||"",initialQty:Number(e.initial_qty||0),pyramid1Price:Number(e.pyramid1_price||0),pyramid1Qty:Number(e.pyramid1_qty||0),pyramid1Date:e.pyramid1_date||"",pyramid2Price:Number(e.pyramid2_price||0),pyramid2Qty:Number(e.pyramid2_qty||0),pyramid2Date:e.pyramid2_date||"",positionSize:Number(e.position_size||0),allocation:Number(e.allocation||0),slPercent:Number(e.sl_percent||0),exit1Price:Number(e.exit1_price||0),exit1Qty:Number(e.exit1_qty||0),exit1Date:e.exit1_date||"",exit2Price:Number(e.exit2_price||0),exit2Qty:Number(e.exit2_qty||0),exit2Date:e.exit2_date||"",exit3Price:Number(e.exit3_price||0),exit3Qty:Number(e.exit3_qty||0),exit3Date:e.exit3_date||"",openQty:Number(e.open_qty||0),exitedQty:Number(e.exited_qty||0),avgExitPrice:Number(e.avg_exit_price||0),stockMove:Number(e.stock_move||0),rewardRisk:Number(e.reward_risk||0),holdingDays:Number(e.holding_days||0),positionStatus:e.position_status,realisedAmount:Number(e.realised_amount||0),plRs:Number(e.pl_rs||0),pfImpact:Number(e.pf_impact||0),cummPf:Number(e.cumm_pf||0),planFollowed:Boolean(e.plan_followed),exitTrigger:e.exit_trigger||"",proficiencyGrowthAreas:e.proficiency_growth_areas||"",sector:e.sector||"",openHeat:Number(e.open_heat||0),notes:e.notes||"",chartAttachments:e.chart_attachments||{},_userEditedFields:e.user_edited_fields||[],_cmpAutoFetched:Boolean(e.cmp_auto_fetched),_needsRecalculation:Boolean(e.needs_recalculation)}},ct=(e,t)=>{const r=st(e.id);return it.set(e.id,r),{id:r,user_id:t,trade_no:e.tradeNo,date:e.date,name:e.name,entry:e.entry,avg_entry:e.avgEntry,sl:e.sl,tsl:e.tsl,buy_sell:e.buySell,cmp:e.cmp,setup:e.setup,base_duration:e.baseDuration,initial_qty:e.initialQty,pyramid1_price:e.pyramid1Price,pyramid1_qty:e.pyramid1Qty,pyramid1_date:e.pyramid1Date||null,pyramid2_price:e.pyramid2Price,pyramid2_qty:e.pyramid2Qty,pyramid2_date:e.pyramid2Date||null,position_size:e.positionSize,allocation:e.allocation,sl_percent:e.slPercent,exit1_price:e.exit1Price,exit1_qty:e.exit1Qty,exit1_date:e.exit1Date||null,exit2_price:e.exit2Price,exit2_qty:e.exit2Qty,exit2_date:e.exit2Date||null,exit3_price:e.exit3Price,exit3_qty:e.exit3Qty,exit3_date:e.exit3Date||null,open_qty:e.openQty,exited_qty:e.exitedQty,avg_exit_price:e.avgExitPrice,stock_move:e.stockMove,reward_risk:e.rewardRisk,holding_days:e.holdingDays,position_status:e.positionStatus,realised_amount:e.realisedAmount,pl_rs:e.plRs,pf_impact:e.pfImpact,cumm_pf:e.cummPf,plan_followed:e.planFollowed,exit_trigger:e.exitTrigger,proficiency_growth_areas:e.proficiencyGrowthAreas,sector:e.sector,open_heat:e.openHeat,notes:e.notes,chart_attachments:e.chartAttachments||{},user_edited_fields:e._userEditedFields||[],cmp_auto_fetched:e._cmpAutoFetched||!1,needs_recalculation:e._needsRecalculation||!1}};class dt{static async getAllTrades(){const e=performance.now();try{const t=await ce.getUserId();if(!t)return[];const r=`trades_${t}`,a=this.tradesCache.get(r);if(a&&Date.now()-a.timestamp<this.CACHE_DURATION)return console.log(`⚡ Trades loaded from cache in ${Math.round(performance.now()-e)}ms`),a.data;const{data:n,error:o}=await le.from("trades").select("\n          id, user_id, trade_no, name, date, entry, avg_entry, sl, tsl, buy_sell, cmp,\n          setup, base_duration, initial_qty,\n          pyramid1_price, pyramid1_qty, pyramid1_date,\n          pyramid2_price, pyramid2_qty, pyramid2_date,\n          position_size, allocation, sl_percent,\n          exit1_price, exit1_qty, exit1_date,\n          exit2_price, exit2_qty, exit2_date,\n          exit3_price, exit3_qty, exit3_date,\n          open_qty, exited_qty, avg_exit_price, stock_move, reward_risk, holding_days,\n          position_status, realised_amount, pl_rs, pf_impact, cumm_pf,\n          plan_followed, exit_trigger, proficiency_growth_areas, sector, open_heat,\n          notes, chart_attachments, user_edited_fields, cmp_auto_fetched, needs_recalculation,\n          created_at, updated_at\n        ").eq("user_id",t).order("trade_no",{ascending:!0});if(o)throw o;const s=n.map(lt);this.tradesCache.set(r,{data:s,timestamp:Date.now()});const i=performance.now();return console.log(`⚡ Trades loaded from Supabase in ${Math.round(i-e)}ms`),s}catch(t){return console.error("❌ Failed to get trades from Supabase:",t),[]}}static clearTradesCache(e){e?this.tradesCache.delete(`trades_${e}`):this.tradesCache.clear()}static async getTrade(e){try{const t=await ce.getUserId();if(!t)return null;const r=st(e);it.set(e,r);const{data:a,error:n}=await le.from("trades").select("*").eq("id",r).eq("user_id",t).single();if(n)throw n;return a?lt(a):null}catch(t){return console.error("❌ Failed to get trade from Supabase:",t),null}}static async getTradeFromSupabaseOnly(e){try{const t=await ce.getUserId();if(!t)return null;const{data:r,error:a}=await le.from("trades").select("*").eq("id",e).eq("user_id",t).single();if(a&&"PGRST116"!==a.code)throw a;return r?lt(r):null}catch(t){return console.error("❌ Failed to get trade from Supabase only:",t),null}}static async saveTrade(e){try{const t=await ce.getUserId();if(!t)return console.warn("⚠️ Cannot save trade - user not authenticated"),!1;console.log("💾 Saving trade to Supabase:",e.name,"User ID:",t);const r=ct(e,t),a=r.id,{data:n}=await le.from("trades").select("id").eq("id",a).eq("user_id",t).single();if(n){console.log("🔄 Updating existing trade:",e.name);const{error:n}=await le.from("trades").update(r).eq("id",a).eq("user_id",t);if(n)throw console.error("❌ Error updating trade:",n),n;console.log("✅ Trade updated successfully:",e.name)}else{console.log("➕ Inserting new trade:",e.name);const{error:t}=await le.from("trades").insert(r);if(t)throw console.error("❌ Error inserting trade:",t),t;console.log("✅ Trade inserted successfully:",e.name)}return this.clearTradesCache(t),!0}catch(t){return console.error("❌ Failed to save trade to Supabase:",t),!1}}static async saveAllTrades(e){try{const t=await ce.getUserId();if(!t)return console.warn("⚠️ Cannot save trades - user not authenticated"),!1;console.log(`💾 Saving ${e.length} trades to Supabase for user:`,t),console.log("🗑️ Clearing existing trades...");const{error:r}=await le.from("trades").delete().eq("user_id",t);if(r)throw console.error("❌ Error deleting existing trades:",r),r;if(console.log("✅ Existing trades cleared"),0===e.length)return console.log("ℹ️ No trades to save"),this.clearTradesCache(t),!0;const a=e.map(e=>ct(e,t));console.log("📝 Converted trades to DB format:",a.length);const n=100;for(let e=0;e<a.length;e+=n){const t=a.slice(e,e+n);console.log(`📤 Inserting batch ${Math.floor(e/n)+1}/${Math.ceil(a.length/n)} (${t.length} trades)`);const{error:r}=await le.from("trades").insert(t);if(r)throw console.error("❌ Error inserting batch:",r),r}return console.log("✅ All trades saved successfully to Supabase"),this.clearTradesCache(t),!0}catch(t){return console.error("❌ Failed to save all trades to Supabase:",t),!1}}static async deleteTrade(e){try{const t=await ce.getUserId();if(!t)throw new Error("User not authenticated");const r=st(e),{error:a}=await le.from("trades").delete().eq("id",r).eq("user_id",t);if(a)throw a;return it.delete(e),!0}catch(t){return console.error("❌ Failed to delete trade from Supabase:",t),!1}}static async getUserPreferences(){try{const e=await ce.getUserId();if(!e)throw new Error("User not authenticated");const{data:t,error:r}=await le.from("user_preferences").select("*").eq("user_id",e).single();if(r&&"PGRST116"!==r.code)throw r;return t||null}catch(e){return console.error("❌ Failed to get user preferences from Supabase:",e),null}}static async saveUserPreferences(e){try{const t=await ce.getUserId();if(!t)throw new Error("User not authenticated");const{error:r}=await le.from("user_preferences").upsert({...e,user_id:t},{onConflict:"user_id"});if(r)throw r;return!0}catch(t){return console.error("❌ Failed to save user preferences to Supabase:",t),!1}}static async getPortfolioData(){try{const e=await ce.getUserId();if(!e)throw new Error("User not authenticated");const{data:t,error:r}=await le.from("portfolio_data").select("*").eq("user_id",e);if(r)throw r;return t||[]}catch(e){return console.error("❌ Failed to get portfolio data from Supabase:",e),[]}}static async savePortfolioData(e){try{const t=await ce.getUserId();if(!t)throw new Error("User not authenticated");const{error:r}=await le.from("portfolio_data").delete().eq("user_id",t);if(r)throw r;const a=e.map(e=>({...e,user_id:t})),{error:n}=await le.from("portfolio_data").insert(a);if(n)throw n;return!0}catch(t){return console.error("❌ Failed to save portfolio data to Supabase:",t),!1}}static async getTradeSettings(){try{const e=await ce.getUserId();if(!e)return null;const{data:t,error:r}=await le.from("trade_settings").select("*").eq("user_id",e).single();if(r&&"PGRST116"!==r.code)throw r;return t||null}catch(e){return console.error("❌ Failed to get trade settings from Supabase:",e),null}}static async saveTradeSettings(e){try{const t=await ce.getUserId();if(!t)return!1;const{error:r}=await le.from("trade_settings").upsert({...e,user_id:t},{onConflict:"user_id"});if(r)throw r;return!0}catch(t){return console.error("❌ Failed to save trade settings to Supabase:",t),!1}}static async getTaxData(e){try{const t=await ce.getUserId();if(!t)throw new Error("User not authenticated");const{data:r,error:a}=await le.from("tax_data").select("*").eq("user_id",t).eq("year",e).single();if(a&&"PGRST116"!==a.code)throw a;return r||null}catch(t){return console.error("❌ Failed to get tax data from Supabase:",t),null}}static async saveTaxData(e,t){try{const r=await ce.getUserId();if(!r)throw new Error("User not authenticated");const{error:a}=await le.from("tax_data").upsert({user_id:r,year:e,data:t},{onConflict:"user_id,year"});if(a)throw a;return!0}catch(r){return console.error("❌ Failed to save tax data to Supabase:",r),!1}}static async getMilestonesData(){try{const e=await ce.getUserId();if(!e)return null;const{data:t,error:r}=await le.from("milestones_data").select("*").eq("user_id",e).single();if(r&&"PGRST116"!==r.code)throw r;return t||null}catch(e){return console.error("❌ Failed to get milestones data from Supabase:",e),null}}static async saveMilestonesData(e){try{const t=await ce.getUserId();if(!t)return!1;const{error:r}=await le.from("milestones_data").upsert({user_id:t,achievements:e},{onConflict:"user_id"});if(r)throw r;return console.log("✅ Saved milestones data to Supabase"),!0}catch(t){return console.error("❌ Failed to save milestones data to Supabase:",t),!1}}static async getMiscData(e){try{const t=await ce.getUserId();if(!t)return null;console.log("🔍 Getting misc data for key:",e,"user:",t);const{data:r,error:a}=await le.from("misc_data").select("value").eq("user_id",t).eq("key",e).maybeSingle();if(a)throw console.error("❌ Error getting misc data:",a),a;return console.log("✅ Got misc data:",(null==r?void 0:r.value)||"null"),(null==r?void 0:r.value)||null}catch(t){return console.error("❌ Failed to get misc data from Supabase:",t),null}}static async saveMiscData(e,t){try{const r=await ce.getUserId();if(!r)return!1;const{error:a}=await le.from("misc_data").upsert({user_id:r,key:e,value:t},{onConflict:"user_id,key"});if(a)throw a;return!0}catch(r){return console.error("❌ Failed to save misc data to Supabase:",r),!1}}static async deleteMiscData(e){try{const t=await ce.getUserId();if(!t)return!1;const{error:r}=await le.from("misc_data").delete().eq("user_id",t).eq("key",e);if(r)throw r;return!0}catch(t){return console.error("❌ Failed to delete misc data from Supabase:",t),!1}}static async saveChartImageBlob(e){try{const r=await ce.getUserId();if(!r)throw new Error("User not authenticated");let a;try{a=Uint8Array.from(atob(e.data),e=>e.charCodeAt(0))}catch(t){throw new Error("Failed to convert base64 data")}const n={id:e.id,user_id:r,trade_id:e.trade_id,image_type:e.image_type,filename:e.filename,mime_type:e.mime_type,size_bytes:e.size_bytes,data:a,uploaded_at:e.uploaded_at,compressed:e.compressed||!1,original_size:e.original_size},{data:o,error:s}=await le.from("chart_image_blobs").insert(n).select();if(s)throw s;return!0}catch(r){return console.error("❌ Failed to save chart image blob to Supabase:",r),!1}}static async getChartImageBlob(e){try{const t=await ce.getUserId();if(!t)throw new Error("User not authenticated");const{data:r,error:a}=await le.from("chart_image_blobs").select("id, user_id, trade_id, image_type, filename, mime_type, size_bytes, uploaded_at, compressed, original_size, created_at, updated_at").eq("user_id",t).eq("id",e).single();if(a){if("PGRST116"===a.code)return null;throw a}const{data:n,error:o}=await le.from("chart_image_blobs").select("data").eq("user_id",t).eq("id",e).single();if(o)throw o;return{...r,data:n.data}}catch(t){return console.error("❌ Failed to get chart image blob:",t),null}}static async getAllChartImageBlobs(){try{const e=await ce.getUserId();if(!e)throw new Error("User not authenticated");const{data:t,error:r}=await le.from("chart_image_blobs").select("id, user_id, trade_id, image_type, filename, mime_type, size_bytes, uploaded_at, compressed, original_size, created_at, updated_at").eq("user_id",e).order("uploaded_at",{ascending:!1});if(r)throw r;return t||[]}catch(e){return console.error("❌ Failed to get all chart image blobs:",e),[]}}static async deleteChartImageBlob(e){try{const t=await ce.getUserId();if(!t)throw new Error("User not authenticated");const{error:r}=await le.from("chart_image_blobs").delete().eq("user_id",t).eq("id",e);if(r)throw r;return!0}catch(t){return console.error("❌ Failed to delete chart image blob:",t),!1}}static async getTradeChartImageBlobs(e){try{const t=await ce.getUserId();if(!t)throw new Error("User not authenticated");if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e))return console.log(`📦 [SUPABASE] Trade ID is not UUID format, skipping chart blob query: ${e}`),[];const{data:r,error:a}=await le.from("chart_image_blobs").select("*").eq("trade_id",e).eq("user_id",t);if(a)throw a;return r||[]}catch(t){return console.error("❌ Failed to get trade chart image blobs:",t),[]}}static async deleteTradeChartImageBlobs(e){try{const t=await ce.getUserId();if(!t)throw new Error("User not authenticated");if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e))return console.log(`📦 [SUPABASE] Trade ID is not UUID format, skipping chart blob deletion: ${e}`),!0;const{error:r}=await le.from("chart_image_blobs").delete().eq("trade_id",e).eq("user_id",t);if(r)throw r;return!0}catch(t){return console.error("❌ Failed to delete trade chart image blobs:",t),!1}}static async updateChartImageBlobTradeId(e,t){try{const r=await ce.getUserId();if(!r)throw new Error("User not authenticated");const{error:a}=await le.from("chart_image_blobs").update({trade_id:t}).eq("id",e).eq("user_id",r);if(a)throw a;return!0}catch(r){return console.error("❌ Failed to update chart image blob trade ID:",r),!1}}static async getDashboardConfig(){try{const e=await ce.getUserId();if(!e)throw new Error("User not authenticated");const{data:t,error:r}=await le.from("dashboard_config").select("*").eq("user_id",e).single();if(r&&"PGRST116"!==r.code)throw r;return t||null}catch(e){return console.error("❌ Failed to get dashboard config from Supabase:",e),null}}static async saveDashboardConfig(e){try{const t=await ce.getUserId();if(!t)throw new Error("User not authenticated");const{error:r}=await le.from("dashboard_config").upsert({user_id:t,config:e},{onConflict:"user_id"});if(r)throw r;return console.log("✅ Saved dashboard config to Supabase"),!0}catch(t){return console.error("❌ Failed to save dashboard config to Supabase:",t),!1}}static async getCommentaryData(e){try{const t=await ce.getUserId();if(!t)throw new Error("User not authenticated");const{data:r,error:a}=await le.from("commentary_data").select("*").eq("user_id",t).eq("year",e).single();if(a&&"PGRST116"!==a.code)throw a;return r||null}catch(t){return console.error("❌ Failed to get commentary data from Supabase:",t),null}}static async saveCommentaryData(e,t){try{const r=await ce.getUserId();if(!r)throw new Error("User not authenticated");const{error:a}=await le.from("commentary_data").upsert({user_id:r,year:e,data:t},{onConflict:"user_id,year"});if(a)throw a;return!0}catch(r){return console.error("❌ Failed to save commentary data to Supabase:",r),!1}}static async clearAllData(){try{const e=await ce.getUserId();if(!e)throw new Error("User not authenticated");const t=["trades","chart_image_blobs","user_preferences","portfolio_data","tax_data","milestones_data","misc_data","trade_settings","dashboard_config","commentary_data"];for(const r of t){const{error:t}=await le.from(r).delete().eq("user_id",e);if(t)throw t}return console.log("✅ Cleared all user data from Supabase"),!0}catch(e){return console.error("❌ Failed to clear all data from Supabase:",e),!1}}}t(dt,"tradesCache",new Map),t(dt,"CACHE_DURATION",3e4);const ut=Object.freeze(Object.defineProperty({__proto__:null,SupabaseService:dt},Symbol.toStringTag,{value:"Module"}));async function pt(){if("undefined"==typeof window)return[];try{console.log("📥 Loading trades from Supabase...");const e=await dt.getAllTrades();return console.log(`✅ Loaded ${e.length} trades from Supabase`),e}catch(e){return console.error("❌ Error loading trades from Supabase:",e),[]}}async function mt(e){if("undefined"==typeof window)return!1;try{console.log("🚀 Attempting to save trades to Supabase:",e.length);const t=await dt.saveAllTrades(e);return t?console.log("✅ Trades saved successfully to Supabase"):console.error("❌ Failed to save trades to Supabase"),t}catch(t){return console.error("❌ Error in saveTradesToSupabase:",t),!1}}async function ht(){if("undefined"==typeof window)return null;try{return await dt.getTradeSettings()}catch(e){return null}}function ft(e,t,r=!1,a=!1){const n=[...e].sort((e,t)=>e.date&&t.date?new Date(e.date).getTime()-new Date(t.date).getTime():(e.tradeNo||"").localeCompare(t.tradeNo||""));let o=0;if(a)return n.map(e=>({...e,name:(e.name||"").toUpperCase(),avgEntry:e.avgEntry||e.entry||0,positionSize:e.positionSize||0,allocation:e.allocation||0,slPercent:e.slPercent||0,openQty:e.openQty||e.initialQty||0,exitedQty:e.exitedQty||0,avgExitPrice:e.avgExitPrice||0,stockMove:e.stockMove||0,holdingDays:e.holdingDays||0,realisedAmount:e.realisedAmount||0,plRs:e.plRs||0,pfImpact:e.pfImpact||0,cummPf:e.cummPf||0,_needsRecalculation:!0}));return n.map(e=>{var a;const n=[{price:Number(e.entry||0),qty:Number(e.initialQty||0)},{price:Number(e.pyramid1Price||0),qty:Number(e.pyramid1Qty||0)},{price:Number(e.pyramid2Price||0),qty:Number(e.pyramid2Qty||0)}].filter(e=>e.qty>0&&e.price>0),o=Ue(n),s=n.reduce((e,t)=>e+t.qty,0),i=ze(o,s);let l=1e5;if(e.date&&t){const r=new Date(e.date),a=r.toLocaleString("default",{month:"short"}),n=r.getFullYear();try{l=t(a,n)||1e5}catch(U){l=1e5}}const c=Pe(i,l),d=Ae(e.sl,e.entry),u=[{price:Number(e.exit1Price||0),qty:Number(e.exit1Qty||0)},{price:Number(e.exit2Price||0),qty:Number(e.exit2Qty||0)},{price:Number(e.exit3Price||0),qty:Number(e.exit3Qty||0)}].filter(e=>e.qty>0&&e.price>0),p=u.reduce((e,t)=>e+t.qty,0),m=s-p,h=Te(u),f=Ee(o,h,e.cmp,m,p,e.positionStatus,e.buySell);Oe(e.cmp||h||e.entry,e.entry,e.sl,e.positionStatus,h,m,p,e.buySell);const g=[];e.pyramid1Date&&e.pyramid1Qty&&g.push({date:e.pyramid1Date,qty:e.pyramid1Qty}),e.pyramid2Date&&e.pyramid2Qty&&g.push({date:e.pyramid2Date,qty:e.pyramid2Qty});const y=[];e.exit1Date&&e.exit1Qty&&y.push({date:e.exit1Date,qty:e.exit1Qty}),e.exit2Date&&e.exit2Qty&&y.push({date:e.exit2Date,qty:e.exit2Qty}),e.exit3Date&&e.exit3Qty&&y.push({date:e.exit3Date,qty:e.exit3Qty});let _=null;if(u.length>0){const t=[e.exit1Date,e.exit2Date,e.exit3Date].filter(Boolean);t.length>0&&(_=t.sort((e,t)=>new Date(e).getTime()-new Date(t).getTime())[0])}"Open"!==e.positionStatus&&!_&&u.length>0&&(_=e.date);const x=Be(e.date,_,g,y),w=Fe(p,h),v=n.map(e=>({price:e.price,qty:e.qty})),b=u.map(e=>({price:e.price,qty:e.qty})),j=p>0?$e(v,b,e.buySell):0,k=qe(ee({...e,plRs:j},r),t?(()=>{try{const a=te(e,r),n=new Date(a),o=n.toLocaleString("default",{month:"short"}),s=n.getFullYear();return t(o,s)||1e5}catch{return 1e5}})():1e5),C=Math.max(0,m),{openHeat:D,...S}=e;let M=S.positionStatus;(null==(a=S._userEditedFields)?void 0:a.includes("positionStatus"))||(M=C<=0&&p>0?"Closed":p>0&&C>0?"Partial":"Open");const N={};return["positionStatus","buySell","setup","exitTrigger","proficiencyGrowthAreas","planFollowed","notes","tradeNo"].forEach(e=>{var t;(null==(t=S._userEditedFields)?void 0:t.includes(e))&&void 0!==S[e]&&(N[e]=S[e])}),{...S,name:(S.name||"").toUpperCase(),avgEntry:o,positionSize:i,allocation:c,slPercent:d,openQty:C,exitedQty:p,avgExitPrice:h,stockMove:f,holdingDays:x,realisedAmount:w,plRs:j,pfImpact:k,positionStatus:M,cummPf:0,...N,_userEditedFields:S._userEditedFields||[]}}).map((e,a)=>{0===a&&(o=0);const n=e.plRs||0,s=ee(e,!0),i=r=>{if(!t)return 1e5;try{const a=te(e,r),n=new Date(a),o=n.toLocaleString("default",{month:"short"}),s=n.getFullYear();return t(o,s)||1e5}catch{return 1e5}},l=i(!1),c=i(!0),d="Open"!==e.positionStatus?qe(n,l):0,u="Open"!==e.positionStatus?qe(s,c):0;return o+=r?u:d,{...e,_accrualPL:n,_cashPL:s,_accrualPfImpact:d,_cashPfImpact:u,cummPf:o}})}const gt=["tradeNo","date","name","setup","buySell","entry","avgEntry","sl","slPercent","tsl","cmp","initialQty","pyramid1Price","pyramid1Qty","pyramid1Date","pyramid2Price","pyramid2Qty","pyramid2Date","positionSize","allocation","exit1Price","exit1Qty","exit1Date","exit2Price","exit2Qty","exit2Date","exit3Price","exit3Qty","exit3Date","openQty","exitedQty","avgExitPrice","stockMove","openHeat","rewardRisk","holdingDays","positionStatus","realisedAmount","plRs","pfImpact","cummPf","planFollowed","exitTrigger","proficiencyGrowthAreas","chartAttachments","actions","unrealizedPL","notes"],yt=()=>{const[e,t]=o.useState([]),[r,a]=o.useState(!0),[n,s]=o.useState(!1),[i,l]=o.useState(""),[c,d]=o.useState(""),[u,p]=o.useState({column:"tradeNo",direction:"ascending"}),[m,h]=o.useState(gt),{filter:f}=Se(),{accountingMethod:g}=ve(),y="cash"===g,_=o.useRef(g),{portfolioSize:x,getPortfolioSize:w}=be([]),v=o.useCallback((e,t)=>w(e,t),[w]),b=o.useCallback((e,t=!1)=>ft(e,v,y,t),[v,y]),j=o.useRef(new Map),k=o.useRef("");o.useMemo(()=>{const t=performance.now(),r=`${e.length}-${i}-${c}-${u.column}-${u.direction}-${f}-${g}`;if(r===k.current&&j.current.has("processedTrades")){const e=j.current.get("processedTrades");return console.log(`⚡ Processed trades from cache in ${Math.round(performance.now()-t)}ms`),e}let a=e;if(i){const e=i.toLowerCase();a=a.filter(t=>{var r,a,n,o;return(null==(r=t.name)?void 0:r.toLowerCase().includes(e))||(null==(a=t.tradeNo)?void 0:a.toLowerCase().includes(e))||(null==(n=t.setup)?void 0:n.toLowerCase().includes(e))||(null==(o=t.notes)?void 0:o.toLowerCase().includes(e))})}if(c&&(a=a.filter(e=>e.positionStatus===c)),f&&"all"!==f&&(a=a.filter(e=>Me(e,f))),u.column){const e=u.column,t="descending"===u.direction;a=[...a].sort((r,a)=>{const n=r[e],o=a[e];if(null==n&&null==o)return 0;if(null==n)return t?1:-1;if(null==o)return t?-1:1;let s=0;return s="number"==typeof n&&"number"==typeof o?n-o:String(n).localeCompare(String(o)),t?-s:s})}j.current.set("processedTrades",a),k.current=r;const n=performance.now();return console.log(`⚡ Processed ${a.length} trades in ${Math.round(n-t)}ms`),a},[e,i,c,u,f,g]),o.useEffect(()=>{const e=setInterval(()=>{if("memory"in performance){const t=performance.memory;if(t.usedJSHeapSize/1024/1024>.8*(t.jsHeapSizeLimit/1024/1024)&&window.gc)try{window.gc()}catch(e){}}},3e4);return()=>clearInterval(e)},[]);const D=o.useRef(new Map),S=o.useRef(null),M=o.useRef(0);o.useEffect(()=>{(async()=>{const e=performance.now(),r=Date.now();if(r-M.current<3e4&&D.current.has("trades")){const e=D.current.get("trades");return t(e),void a(!1)}a(!0);try{const[e,n]=await Promise.all([pt(),S.current||ht()]);n&&(S.current=n);const o=e.length>0?b(e,!0):[],s=(null==n?void 0:n.search_query)||"",i=(null==n?void 0:n.status_filter)||"";t(o),l(s),d(i),p((null==n?void 0:n.sort_descriptor)||{column:"tradeNo",direction:"ascending"}),h((null==n?void 0:n.visible_columns)||gt),D.current.set("trades",o),M.current=r,a(!1),setTimeout(async()=>{if(e.length>0){const r=b(e,!1);t(r),D.current.set("trades",r)}},100)}catch(n){console.error("Failed to load trades:",n),t([])}finally{const t=performance.now();console.log(`⚡ Trade loading completed in ${Math.round(t-e)}ms`)}})()},[]),o.useEffect(()=>{if(!r){!async function(e){if("undefined"==typeof window)return!1;try{return await dt.saveTradeSettings(e)}catch(t){return!1}}({search_query:i,status_filter:c,sort_descriptor:u,visible_columns:m})}},[i,c,u,m,r]),o.useEffect(()=>{if(_.current!==g&&!r&&e.length>0){const r=setTimeout(()=>{const r=ft(e,v,y,!1);t(r)},100);return _.current=g,()=>clearTimeout(r)}},[g]);const N=o.useCallback(async e=>{var r,a;if(e.chartAttachments&&(e.chartAttachments.beforeEntry||e.chartAttachments.afterExit))try{"blob"===(null==(r=e.chartAttachments.beforeEntry)?void 0:r.storage)&&e.chartAttachments.beforeEntry.blobId&&await dt.updateChartImageBlobTradeId(e.chartAttachments.beforeEntry.blobId,e.id),"blob"===(null==(a=e.chartAttachments.afterExit)?void 0:a.storage)&&e.chartAttachments.afterExit.blobId&&await dt.updateChartImageBlobTradeId(e.chartAttachments.afterExit.blobId,e.id)}catch(n){}t(t=>{const r=[...t,e];r.sort((e,t)=>{const r=new Date(e.date),a=new Date(t.date);return isNaN(r.getTime())&&isNaN(a.getTime())?0:isNaN(r.getTime())?1:isNaN(a.getTime())?-1:r.getTime()-a.getTime()}),r.forEach((e,t)=>{e.tradeNo=String(t+1)});const a=b(r);return mt(a).then(e=>{}).catch(e=>{}),a})},[b]),U=o.useRef(null),z=o.useRef(new Map),P=o.useRef(new Map),A=o.useCallback(async(e,r)=>{var a,n;if(e.chartAttachments&&(e.chartAttachments.beforeEntry||e.chartAttachments.afterExit))try{"blob"===(null==(a=e.chartAttachments.beforeEntry)?void 0:a.storage)&&e.chartAttachments.beforeEntry.blobId&&await dt.updateChartImageBlobTradeId(e.chartAttachments.beforeEntry.blobId,e.id),"blob"===(null==(n=e.chartAttachments.afterExit)?void 0:n.storage)&&e.chartAttachments.afterExit.blobId&&await dt.updateChartImageBlobTradeId(e.chartAttachments.afterExit.blobId,e.id)}catch(o){}z.current.set(e.id,e),r&&P.current.set(e.id,r),U.current&&clearTimeout(U.current),U.current=setTimeout(()=>{const e=Array.from(z.current.values()),r=Array.from(P.current.values());z.current.clear(),P.current.clear(),t(t=>{const a=t.map(t=>{const r=e.find(e=>{if(e.id===t.id)return!0;return(e.id.includes("_exit_")?e.id.split("_exit_")[0]:e.id)===(t.id.includes("_exit_")?t.id.split("_exit_")[0]:t.id)});if(r){return{...r,id:t.id}}return t}),n=b(a);return mt(n).then(e=>{}),r.forEach(e=>{try{e()}catch(o){}}),n})},200)},[b]),I=o.useCallback(async e=>{const r=e.includes("_exit_")?e.split("_exit_")[0]:e;try{const{ChartImageService:e}=await C(async()=>{const{ChartImageService:e}=await import("./chartImageService-D0un2IL8.js").then(e=>e.d);return{ChartImageService:e}},[]);await e.deleteTradeChartImages(r)}catch(a){}t(e=>{if(!e.find(e=>e.id===r))return console.warn("Trade not found for deletion:",r),e;const t=e.filter(e=>e.id!==r),a=b(t);return mt(a).then(e=>{}),a})},[b]),T=o.useCallback(e=>{performance.now(),t(r=>{const a=[...e,...r];a.sort((e,t)=>{const r=new Date(e.date),a=new Date(t.date);return isNaN(r.getTime())&&isNaN(a.getTime())?0:isNaN(r.getTime())?1:isNaN(a.getTime())?-1:r.getTime()-a.getTime()}),a.forEach((e,t)=>{e.tradeNo=String(t+1)});const n=b(a,!0);return mt(n).then(e=>{}),performance.now(),setTimeout(()=>{performance.now(),s(!0),t(e=>{const t=b(e,!1);return mt(t).then(e=>{}),performance.now(),s(!1),t})},100),n})},[b]),E=o.useCallback(async()=>{if(await async function(){if("undefined"==typeof window)return!1;try{const t=await dt.clearAllData(),r=[];for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);t&&r.push(t)}r.forEach(e=>{if(e.startsWith("misc_")||e.startsWith("tradeBackup_")||e.startsWith("tradeModal_")||"yearlyStartingCapitals"===e||"capitalChanges"===e||"monthlyStartingCapitalOverrides"===e||"globalFilter"===e||"heroui-theme"===e||"userPreferences"===e||"accountingMethod"===e||"dashboardConfig"===e||"milestones"===e||"achievements"===e||e.includes("trade")||e.includes("portfolio")||e.includes("settings")||e.includes("config"))try{localStorage.removeItem(e)}catch(t){}});try{sessionStorage.clear()}catch(e){}return t}catch(e){return!1}}()){if(t([]),l(""),d(""),p({column:"tradeNo",direction:"ascending"}),h(gt),a(!1),window.gc)try{window.gc()}catch(e){}return"undefined"!=typeof window&&(window.tradeCache=void 0,window.portfolioCache=void 0,window.settingsCache=void 0),!0}return!1},[]),O=o.useCallback(e=>{let t=0,r=0;y&&e._expandedTrades&&e._expandedTrades.length>0?(t=e._expandedTrades.reduce((e,t)=>e+ee(t,!0),0),r=e._expandedTrades.reduce((e,t)=>{if(t._cashBasisExit){return e+t._cashBasisExit.qty*t._cashBasisExit.price}return e},0)):(t=ee(e,y),r=e.realisedAmount||e.exitedQty*e.avgExitPrice||0);const a=w?(()=>{const t=new Date(e.date),r=t.toLocaleString("default",{month:"short"}),a=t.getFullYear();return w(r,a)})():x;return{plRs:t,realisedAmount:r,pfImpact:a>0?t/a*100:0}},[y,ee,w,x]),B=o.useCallback(e=>{if(!y)return e;const t=new Map,r=new Map;return e.forEach(e=>{const a=e.id.split("_exit_")[0];e._cashBasisExit?(r.has(a)||r.set(a,[]),r.get(a).push(e)):t.set(a,e)}),r.forEach((e,r)=>{if(0===e.length)return;const a={...e[0],id:r,plRs:e.reduce((e,t)=>e+(ee(t,!0)||0),0),_cashBasisExit:e.reduce((e,t)=>e&&t._cashBasisExit?e.date&&t._cashBasisExit.date&&new Date(t._cashBasisExit.date)>new Date(e.date)?t._cashBasisExit:e:t._cashBasisExit,e[0]._cashBasisExit),_expandedTrades:e};t.set(r,a)}),Array.from(t.values())},[y,ee]);return{trades:o.useMemo(()=>{let t=[...e];if(y){const e=[],r={};t.forEach(t=>{if("Closed"===t.positionStatus||"Partial"===t.positionStatus){const a=[{date:t.exit1Date,qty:t.exit1Qty||0,price:t.exit1Price||0},{date:t.exit2Date,qty:t.exit2Qty||0,price:t.exit2Price||0},{date:t.exit3Date,qty:t.exit3Qty||0,price:t.exit3Price||0}].filter(e=>e.date&&""!==e.date.trim()&&e.qty>0);a.length>0?a.forEach((a,n)=>{const o={...t,id:t.id+"_exit_"+n,_cashBasisExit:{date:a.date,qty:a.qty,price:a.price}};e.push(o),r[t.id]||(r[t.id]=[]),r[t.id].push(o)}):(e.push(t),r[t.id]||(r[t.id]=[]),r[t.id].push(t))}else e.push(t)});const a=e.filter(e=>Me(te(e,y),f));t=B(a)}else t=t.filter(e=>Me(te(e,y),f));if(i){const e=i.toLowerCase();t=t.filter(t=>t.name.toLowerCase().includes(e)||t.setup.toLowerCase().includes(e)||t.tradeNo.toLowerCase().includes(e))}c&&(t=t.filter(e=>e.positionStatus===c)),u.column&&u.direction&&t.sort((e,t)=>{var r,a;const n=e[u.column],o=t[u.column];let s=0;if("number"==typeof n&&"number"==typeof o)s=n-o;else if("string"==typeof n&&"string"==typeof o)s="date"===u.column||String(u.column).endsWith("Date")?new Date(n).getTime()-new Date(o).getTime():n.localeCompare(o);else if("boolean"==typeof n&&"boolean"==typeof o)s=n===o?0:n?-1:1;else{const e=String(null!=n?n:""),t=String(null!=o?o:"");s=e.localeCompare(t)}if(y&&0===s){const n=(null==(r=e._cashBasisExit)?void 0:r.date)||e.date||"",o=(null==(a=t._cashBasisExit)?void 0:a.date)||t.date||"";if(n&&o){s=new Date(n).getTime()-new Date(o).getTime()}}return"ascending"===u.direction?s:-s});let r=0;return t=t.map(e=>{let t=0;if(y&&e._expandedTrades&&e._expandedTrades.length>0){const r=e._expandedTrades.reduce((e,t)=>e+ee(t,!0),0),a=new Date(e.date),n=a.toLocaleString("default",{month:"short"}),o=a.getFullYear(),s=w?w(n,o):1e5;t=s>0?r/s*100:0}else t=y?e._cashPfImpact??0:e._accrualPfImpact??e.pfImpact??0;return"Open"!==e.positionStatus&&(r+=t),{...e,cummPf:r}}),t},[e,f,i,c,u,y]),originalTrades:e,addTrade:N,updateTrade:A,deleteTrade:I,bulkImportTrades:T,isLoading:r,isRecalculating:n,searchQuery:i,setSearchQuery:l,statusFilter:c,setStatusFilter:d,sortDescriptor:u,setSortDescriptor:p,visibleColumns:m,setVisibleColumns:h,clearAllTrades:E,getAccountingAwareValues:O}},_t=[{id:"first-trade",name:"First Trade!",description:"You've recorded your very first trade. The journey begins!",icon:"lucide:dollar-sign",level:1,criteria:e=>e.length>=1},{id:"profitable-trade",name:"First Win!",description:"You've successfully closed your first profitable trade.",icon:"lucide:trending-up",level:1,criteria:(e,t,r,a,n=!1)=>e.some(e=>ee(e,n)>0)},{id:"ten-trades",name:"Getting Started",description:"You've completed 10 trades. Keep learning!",icon:"lucide:number-ten",level:1,criteria:e=>e.length>=10},{id:"hundred-trades",name:"Centurion Trader",description:"You've completed 100 trades. You're building serious experience.",icon:"lucide:bar-chart-2",level:2,criteria:e=>e.length>=100},{id:"five-hundred-trades",name:"Veteran Volume",description:"You've completed 500 trades! A true market participant.",icon:"lucide:rocket",level:3,criteria:e=>e.length>=500},{id:"first-profitable-month",name:"Monthly Maestro",description:"You've finished a calendar month with a positive overall P&L.",icon:"lucide:calendar-check",level:1,criteria:(e,t,r,a,n=!1)=>t.some(e=>e.pl>0)},{id:"portfolio-growth-initial",name:"Growth Sprout",description:"Your portfolio has grown 10% beyond your initial starting capital.",icon:"lucide:leaf",level:1,criteria:(e,t,r,a)=>{var n;const o=(null==(n=a[0])?void 0:n.startingCapital)||0;return o>0&&r>=1.1*o}},{id:"portfolio-growth-substantial",name:"Steady Progress",description:"Your portfolio has grown 25% beyond your initial starting capital.",icon:"lucide:dollar-sign",level:2,criteria:(e,t,r,a)=>{var n;const o=(null==(n=a[0])?void 0:n.startingCapital)||0;return o>0&&r>=1.25*o}},{id:"portfolio-growth-significant",name:"Market Mover",description:"Your portfolio has grown 50% beyond your initial starting capital.",icon:"lucide:trending-up",level:3,criteria:(e,t,r,a)=>{var n;const o=(null==(n=a[0])?void 0:n.startingCapital)||0;return o>0&&r>=1.5*o}},{id:"portfolio-growth-double",name:"Double Trouble!",description:"Your portfolio has doubled in size (100% growth) from your initial starting capital.",icon:"lucide:trophy",level:4,criteria:(e,t,r,a)=>{var n;const o=(null==(n=a[0])?void 0:n.startingCapital)||0;return o>0&&r>=2*o}},{id:"high-win-rate",name:"Consistent Winner",description:"Achieved a 60% win rate over at least 50 closed trades.",icon:"lucide:award",level:1,criteria:(e,t,r,a,n=!1)=>{const o=e.filter(e=>"Closed"===e.positionStatus);if(o.length<50)return!1;return o.filter(e=>ee(e,n)>0).length/o.length>=.6}},{id:"five-consecutive-wins",name:"Winning Streak!",description:"Achieved 5 consecutive profitable closed trades.",icon:"lucide:zap",level:1,criteria:(e,t,r,a,n=!1)=>{const o=e.filter(e=>"Closed"===e.positionStatus);if(o.length<5)return!1;let s=0;for(let i=o.length-1;i>=0;i--)if(ee(o[i],n)>0?s++:s=0,s>=5)return!0;return!1}},{id:"below-ten-percent-drawdown",name:"Risk Manager",description:"Maintained overall portfolio drawdown below 10% for any given month.",icon:"lucide:shield",level:1,criteria:(e,t,r,a,n=!1)=>t.every(e=>{var r;let a=(null==(r=t[0])?void 0:r.startingCapital)||0;for(const n of t)(n.year<e.year||n.year===e.year&&n.month<=e.month)&&n.finalCapital>a&&(a=n.finalCapital);return(0!==a?(a-e.finalCapital)/a*100:0)<10})},{id:"diversified-trader-5-sectors",name:"Sector Explorer",description:"Traded in at least 5 unique sectors.",icon:"lucide:map",level:1,criteria:e=>new Set(e.map(e=>e.sector).filter(e=>e)).size>=5},{id:"diversified-trader-10-sectors",name:"Market Mapper",description:"Traded in at least 10 unique sectors.",icon:"lucide:globe",level:2,criteria:e=>new Set(e.map(e=>e.sector).filter(e=>e)).size>=10},{id:"first-hundred-k-profit",name:"Six-Figure Earner",description:"Achieved a cumulative realized profit of ₹1,00,000.",icon:"lucide:wallet",level:1,criteria:(e,t,r,a,n=!1)=>e.reduce((e,t)=>e+ee(t,n),0)>=1e5},{id:"first-million-profit",name:"Millionaire Mindset",description:"Achieved a cumulative realized profit of ₹1,000,000.",icon:"lucide:banknote",level:2,criteria:(e,t,r,a,n=!1)=>e.reduce((e,t)=>e+ee(t,n),0)>=1e6}],xt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wt=(new Date).getFullYear(),vt=wt+1,bt=Array.from({length:vt-2e3+1},(e,t)=>2e3+t),jt=({isOpen:e,onOpenChange:t,userName:r,setUserName:a,isFullWidthEnabled:s,setIsFullWidthEnabled:i})=>{const{yearlyStartingCapitals:l,setYearlyStartingCapital:c,getYearlyStartingCapital:d,monthlyStartingCapitalOverrides:u,setMonthlyStartingCapitalOverride:p,removeMonthlyStartingCapitalOverride:m,getMonthlyStartingCapitalOverride:C,capitalChanges:B,addCapitalChange:F,updateCapitalChange:q,deleteCapitalChange:R,portfolioSize:L}=oe();yt();const{achievedMilestones:K,ALL_MILESTONES:Y}=(()=>{const{trades:e}=yt(),{getAllMonthlyTruePortfolios:t,portfolioSize:r,yearlyStartingCapitals:a}=oe(),{accountingMethod:o}=ve(),s="cash"===o,i=t(e,s),[l,c]=n.useState([]),[d,u]=n.useState(!0);n.useEffect(()=>{(async()=>{if("undefined"!=typeof window)try{const e=await dt.getMilestonesData();e&&e.achievements&&c(e.achievements)}catch(e){}finally{u(!1)}else u(!1)})()},[]);const p=n.useCallback(()=>{const t=[];let n=e;if(s){const t=new Set;n=e.filter(e=>{const r=e.id.split("_exit_")[0];return!t.has(r)&&(t.add(r),!0)})}_t.forEach(e=>{l.some(t=>t.id===e.id)||e.criteria(n,i,r,a,s)&&t.push({...e,achievedAt:(new Date).toISOString()})}),t.length>0&&c(e=>{const r=[...e,...t];return Array.from(new Set(r.map(e=>e.id))).map(e=>r.find(t=>t.id===e)).sort((e,t)=>new Date(e.achievedAt).getTime()-new Date(t.achievedAt).getTime())})},[e,i,r,a,s]);return n.useEffect(()=>{const e=setTimeout(()=>{p()},100);return()=>clearTimeout(e)},[p]),n.useEffect(()=>{d||"undefined"==typeof window||dt.saveMilestonesData(l)},[l,d]),{achievedMilestones:l,ALL_MILESTONES:_t,isLoading:d}})(),{accountingMethod:W,setAccountingMethod:J}=ve(),[V,H]=n.useState("yearly"),[X,Z]=n.useState(!1),[ee,te]=n.useState(xt[(new Date).getMonth()]),[re,ae]=n.useState(wt),[ne,se]=n.useState(null),[ie,le]=n.useState(""),[ce,de]=n.useState(""),[ue,pe]=n.useState("deposit"),[me,he]=n.useState(""),[fe,ge]=n.useState(xt[(new Date).getMonth()]),[ye,xe]=n.useState(wt),[we,be]=n.useState(""),je=()=>{const e=parseFloat(ce);if(isNaN(e)||e<=0)return void alert("Please enter a valid amount");const t=xt.indexOf(ee),r=new Date(re,t,1).toISOString();F({amount:"deposit"===ue?e:-e,type:ue,date:r,description:me||`${"deposit"===ue?"Deposit":"Withdrawal"} for ${ee} ${re}`}),de(""),he("")},ke=()=>{const e=parseFloat(we);isNaN(e)||e<=0?alert("Please enter a valid amount"):(p(fe,ye,e),be(""))},Ce=o.useMemo(()=>[...B].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()),[B]),De=o.useMemo(()=>[...l].sort((e,t)=>t.year-e.year),[l]),Se=o.useMemo(()=>[...u].sort((e,t)=>e.year!==t.year?t.year-e.year:xt.indexOf(t.month)-xt.indexOf(e.month)),[u,xt]);return h.jsx(y,{isOpen:e,onOpenChange:t,size:"2xl",scrollBehavior:"inside",classNames:{base:"max-w-[90vw] max-h-[85vh] sm:max-w-2xl",wrapper:"items-center justify-center p-4",body:"overflow-y-auto p-0",backdrop:"bg-black/50"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Modal:205:4",children:h.jsx(_,{className:"bg-background/95 backdrop-blur-xl border border-divider/50 shadow-2xl","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:ModalContent:217:6",children:e=>h.jsxs(h.Fragment,{children:[h.jsx(x,{className:"flex items-center gap-3 px-6 py-4 border-b border-divider/50 bg-gradient-to-r from-primary/5 to-secondary/5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:ModalHeader:220:12",children:h.jsxs("div",{className:"flex items-center gap-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:221:14",children:[h.jsx("div",{className:"p-2 rounded-lg bg-primary/10","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:222:16",children:h.jsx(G,{icon:"lucide:settings",className:"text-primary text-lg","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Icon:223:18"})}),h.jsx("span",{className:"text-lg font-semibold tracking-tight","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:span:225:16",children:"Portfolio Settings"})]})}),h.jsxs(w,{className:"p-6 space-y-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:ModalBody:228:12",children:[h.jsx(D,{className:"border-warning/50 bg-warning/5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Card:230:14",children:h.jsx(S,{className:"p-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:CardBody:231:16",children:h.jsxs("div",{className:"flex items-center gap-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:232:18",children:[h.jsx(G,{icon:"lucide:construction",className:"text-warning w-5 h-5 flex-shrink-0","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Icon:233:20"}),h.jsxs("div",{className:"flex-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:234:20",children:[h.jsx("h3",{className:"text-sm font-medium text-warning-700 dark:text-warning-300","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:h3:235:22",children:"Advanced Features Under Development"}),h.jsx("p",{className:"text-xs text-warning-600 dark:text-warning-400 mt-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:p:238:22",children:"Capital Changes, Monthly Overrides, and Milestones features are being enhanced. Basic portfolio settings are fully functional."})]})]})})}),h.jsx("div",{className:"bg-content1/50 rounded-xl p-4 border border-divider/30","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:245:14",children:h.jsx(v,{label:"Your Name",labelPlacement:"outside",placeholder:"Enter your name",value:r,onValueChange:a,className:"w-full",size:"sm",variant:"bordered",startContent:h.jsx(G,{icon:"lucide:user",className:"text-default-400 text-base","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Icon:255:32"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Input:246:16"})}),h.jsxs("div",{className:"bg-content1/50 rounded-xl p-4 border border-divider/30","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:258:14",children:[h.jsxs("h4",{className:"font-semibold text-base mb-3 flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:h4:259:16",children:[h.jsx(G,{icon:"lucide:monitor",className:"text-primary text-base","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Icon:260:18"}),"Display Settings"]}),h.jsxs("div",{className:"flex items-center justify-between p-3 border border-divider/50 rounded-lg bg-background/50","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:263:16",children:[h.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:264:18",children:[h.jsx("p",{className:"font-medium text-sm text-foreground","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:p:265:20",children:"Full Width Layout"}),h.jsx("p",{className:"text-xs text-default-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:p:266:20",children:"Expand content to fill screen width"})]}),h.jsx(g,{isSelected:s,onValueChange:i,size:"sm","aria-label":"Toggle full width layout","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Switch:268:18"})]})]}),h.jsxs("div",{className:"bg-content1/50 rounded-xl p-4 border border-divider/30","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:277:14",children:[h.jsxs("h4",{className:"font-semibold text-base mb-3 flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:h4:278:16",children:[h.jsx(G,{icon:"lucide:calculator",className:"text-primary text-base","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Icon:279:18"}),"P&L Accounting Method"]}),h.jsxs("div",{className:"accounting-method-container flex flex-col sm:flex-row sm:items-center justify-between p-3 border border-divider/50 rounded-lg bg-background/50 gap-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:282:16",children:[h.jsxs("div",{className:"flex-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:283:18",children:[h.jsx($,{mode:"wait","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:AnimatePresence:284:20",children:h.jsx(Q.p,{className:"font-medium text-sm text-foreground",initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},transition:{duration:.15,ease:[.4,0,.2,1],type:"tween"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:p:285:22",children:"cash"===W?"Cash Basis Accounting":"Accrual Basis Accounting"},W)}),h.jsx($,{mode:"wait","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:AnimatePresence:300:20",children:h.jsx(Q.p,{className:"text-xs text-default-500 mt-1",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,delay:.05,ease:[.4,0,.2,1]},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:p:301:22",children:"cash"===W?"P&L attributed to exit dates":"P&L attributed to entry dates"},`${W}-desc`)}),h.jsxs("div",{className:"mt-2 text-xs text-success-600 flex items-center gap-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:319:20",children:[h.jsx(G,{icon:"lucide:lightbulb",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Icon:320:22"}),"Cash Basis is recommended for most traders"]})]}),h.jsxs("div",{className:"accounting-toggle-wrapper flex items-center justify-center sm:justify-end gap-2 flex-shrink-0","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:324:18",children:[h.jsx(Q.span,{className:"text-xs font-medium smooth-text-transition gpu-accelerated",animate:{scale:"accrual"===W?1.05:1,color:"accrual"===W?"#3b82f6":"#71717a",fontWeight:"accrual"===W?600:500},transition:{duration:.2,ease:[.4,0,.2,1],type:"tween"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:span:325:20",children:"Accrual"}),h.jsx(Q.div,{whileTap:{scale:.96},whileHover:{scale:1.02},transition:{duration:.1,ease:[.4,0,.2,1]},className:"switch-press-feedback","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:340:20",children:h.jsx(g,{isSelected:"cash"===W,onValueChange:e=>{navigator.vibrate&&navigator.vibrate(10),J(e?"cash":"accrual")},color:"success",size:"sm",thumbIcon:({isSelected:e,className:t})=>h.jsx($,{mode:"wait","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:AnimatePresence:361:26",children:h.jsx(Q.div,{initial:{scale:0,rotate:-90,opacity:0},animate:{scale:1,rotate:0,opacity:1},exit:{scale:0,rotate:90,opacity:0},transition:{duration:.2,ease:[.4,0,.2,1],type:"tween"},className:"smooth-icon gpu-accelerated","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:362:28",children:h.jsx(G,{icon:e?"lucide:banknote":"lucide:calendar-clock",className:`${t} transition-colors duration-150 ease-out`,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Icon:374:30"})},e?"cash":"accrual")}),classNames:{wrapper:"smooth-switch group-data-[selected=true]:bg-success group-data-[selected=false]:bg-default-200",thumb:"smooth-switch-thumb bg-white shadow-lg group-data-[selected=true]:ml-6 group-data-[pressed=true]:w-7 group-data-[selected]:group-data-[pressed]:ml-4",thumbIcon:"text-default-600 group-data-[selected=true]:text-success-600 transition-colors duration-150"},"aria-label":"Toggle accounting method","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Switch:349:22"})}),h.jsx(Q.span,{className:"text-xs font-medium smooth-text-transition gpu-accelerated",animate:{scale:"cash"===W?1.05:1,color:"cash"===W?"#22c55e":"#71717a",fontWeight:"cash"===W?600:500},transition:{duration:.2,ease:[.4,0,.2,1],type:"tween"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:span:389:20",children:"Cash"})]})]})]}),h.jsxs(M,{selectedKey:V,onSelectionChange:e=>{"yearly"===e&&H(e)},"aria-label":"Portfolio settings tabs",size:"sm",variant:"underlined",classNames:{tabList:"gap-6 w-full relative rounded-none p-0 border-b border-divider/50",cursor:"w-full bg-primary",tab:"max-w-fit px-0 h-10",tabContent:"group-data-[selected=true]:text-primary text-default-500 font-medium"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Tabs:407:14",children:[h.jsx(N,{title:"Yearly Starting Capital","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Tab:425:16",children:h.jsx($,{mode:"wait","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:AnimatePresence:426:18",children:"yearly"===V&&h.jsx(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.2},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:428:22",children:h.jsxs("div",{className:"py-3 space-y-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:435:24",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 p-3 bg-content1/30 rounded-lg border border-divider/30","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:436:26",children:[h.jsx("div",{className:"flex-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:437:28",children:h.jsx("p",{className:"text-xs text-foreground-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:p:438:30",children:"Set starting capital for January of each year"})}),h.jsx(j,{color:"primary",onPress:()=>Z(!0),startContent:h.jsx(G,{icon:"lucide:plus",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Icon:445:44"}),size:"sm",variant:"flat",className:"w-full sm:w-auto flex-shrink-0 text-xs","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Button:442:28",children:"Manage Years"})]}),0===De.length?h.jsxs("div",{className:"text-center py-6 text-default-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:455:28",children:[h.jsx(G,{icon:"lucide:calendar-x",className:"text-2xl mb-2 mx-auto opacity-50","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Icon:456:30"}),h.jsx("p",{className:"text-sm","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:p:457:30",children:"No yearly capitals set"}),h.jsx("p",{className:"text-xs opacity-70","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:p:458:30",children:'Click "Manage Years" to start'})]}):h.jsx("div",{className:"space-y-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:461:28",children:De.map(e=>h.jsxs("div",{className:"flex items-center justify-between p-3 border border-divider/50 rounded-lg bg-background/50 hover:bg-content1/30 transition-colors","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:463:32",children:[h.jsxs("div",{className:"flex items-center gap-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:467:34",children:[h.jsx("div",{className:"w-8 h-8 rounded-lg bg-success/10 flex items-center justify-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:468:36",children:h.jsx(G,{icon:"lucide:calendar",className:"w-4 h-4 text-success","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Icon:469:38"})}),h.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:471:36",children:[h.jsx("p",{className:"font-semibold text-sm text-foreground","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:p:472:38",children:e.year}),h.jsx("p",{className:"text-xs text-default-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:p:473:38",children:new Date(e.updatedAt).toLocaleDateString()})]})]}),h.jsxs("div",{className:"text-right","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:476:34",children:[h.jsxs("p",{className:"font-bold text-sm text-success-600","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:p:477:36",children:["₹",e.startingCapital.toLocaleString()]}),h.jsx("p",{className:"text-xs text-default-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:p:478:36",children:"Starting Capital"})]})]},e.year))})]})},"yearly-content")})},"yearly"),h.jsx(N,{title:h.jsxs("div",{className:"flex items-center gap-2 opacity-75 cursor-not-allowed text-default-600","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:492:20",children:[h.jsx("span",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:span:493:22",children:"Capital Changes"}),h.jsx(G,{icon:"lucide:lock",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Icon:494:22"})]}),isDisabled:!0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Tab:489:16",children:h.jsx($,{mode:"wait","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:AnimatePresence:499:18",children:"capital"===V&&h.jsx(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.2},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:501:22",children:h.jsxs("div",{className:"py-3 space-y-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:508:24",children:[h.jsx("p",{className:"text-xs text-foreground-500 p-3 bg-content1/30 rounded-lg border border-divider/30","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:p:509:26",children:"Add deposits and withdrawals to track capital changes"}),h.jsxs("div",{className:"border border-divider/50 rounded-lg p-3 bg-background/50","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:514:26",children:[h.jsxs("h4",{className:"font-medium text-sm mb-3 flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:h4:515:28",children:[h.jsx(G,{icon:"lucide:plus-circle",className:"w-4 h-4 text-primary","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Icon:516:30"}),"Add Capital Change"]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:519:28",children:[h.jsx(U,{label:"Month",selectedKeys:[ee],onSelectionChange:e=>te(Array.from(e)[0]),className:"w-full",size:"sm",variant:"bordered","aria-label":"Select month for capital change","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Select:520:30",children:xt.map(e=>h.jsx(z,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:SelectItem:530:34",children:e},e))}),h.jsx(U,{label:"Year",selectedKeys:[re.toString()],onSelectionChange:e=>ae(parseInt(Array.from(e)[0])),className:"w-full",size:"sm",variant:"bordered","aria-label":"Select year for capital change","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Select:535:30",children:bt.map(e=>h.jsx(z,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:SelectItem:545:34",children:e},e))}),h.jsxs(U,{label:"Capital Type",selectedKeys:[ue],onSelectionChange:e=>pe(Array.from(e)[0]),className:"w-full",size:"sm",variant:"bordered","aria-label":"Select capital change type","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Select:550:30",children:[h.jsx(z,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:SelectItem:559:32",children:"Deposit"},"deposit"),h.jsx(z,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:SelectItem:560:32",children:"Withdrawal"},"withdrawal")]}),h.jsx(v,{label:"Description (optional)",placeholder:"e.g., Q1 bonus, new investment",value:me,onValueChange:he,className:"w-full",size:"sm",variant:"bordered","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Input:562:30"}),h.jsx(v,{label:"Amount",placeholder:"e.g., 100000",value:ce,onValueChange:de,type:"number",min:"0",step:"1000",startContent:h.jsx("span",{className:"text-default-400 text-lg","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:span:579:46",children:"₹"}),className:"w-full",size:"sm",variant:"bordered","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Input:571:30"}),h.jsx(j,{color:"primary",onPress:je,isDisabled:isNaN(parseFloat(ce))||parseFloat(ce)<=0,startContent:h.jsx(G,{icon:"lucide:plus","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Icon:588:46"}),className:"w-full",size:"sm","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Button:584:30",children:"Add Capital Change"})]}),h.jsx("h4",{className:"font-semibold text-lg mb-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:h4:596:28",children:"Capital Change History"}),0===Ce.length?h.jsxs("div",{className:"text-center py-8 text-default-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:598:30",children:[h.jsx(G,{icon:"lucide:dollar-sign",className:"text-4xl mb-2 mx-auto","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Icon:599:32"}),h.jsx("p",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:p:600:32",children:"No capital changes recorded yet."}),h.jsx("p",{className:"text-sm","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:p:601:32",children:"Add a capital change above."})]}):h.jsxs(P,{"aria-label":"Capital Changes Table",selectionMode:"single",classNames:{wrapper:"min-h-[200px]",th:"bg-transparent border-b border-divider text-xs font-medium text-default-500 dark:text-default-300 uppercase tracking-wider",td:"py-2.5 text-sm"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Table:604:30",children:[h.jsxs(A,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:TableHeader:614:32",children:[h.jsx(I,{allowsSorting:!0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:TableColumn:615:34",children:"Date"},"date"),h.jsx(I,{allowsSorting:!0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:TableColumn:616:34",children:"Type"},"type"),h.jsx(I,{allowsSorting:!0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:TableColumn:617:34",children:"Amount"},"amount"),h.jsx(I,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:TableColumn:618:34",children:"Description"},"description"),h.jsx(I,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:TableColumn:619:34",children:"Actions"},"actions")]}),h.jsx(T,{items:Ce,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:TableBody:621:32",children:e=>h.jsxs(E,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:TableRow:623:36",children:[h.jsx(O,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:TableCell:624:38",children:new Date(e.date).toLocaleDateString()}),h.jsx(O,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:TableCell:625:38",children:h.jsx(k,{color:"deposit"===e.type?"success":"danger",size:"sm","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Chip:626:40",children:"deposit"===e.type?"Deposit":"Withdrawal"})}),h.jsx(O,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:TableCell:630:38",children:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e.amount)}),h.jsx(O,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:TableCell:631:38",children:e.description}),h.jsx(O,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:TableCell:632:38",children:h.jsx("div",{className:"relative flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:633:40",children:h.jsx(f,{content:"Delete capital change","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Tooltip:634:42",children:h.jsx(j,{isIconOnly:!0,size:"sm",variant:"light",color:"danger",onPress:()=>R(e.id),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Button:635:44",children:h.jsx(G,{icon:"lucide:trash-2",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Icon:636:46"})})})})})]},e.id)})]})]})]})},"capital-content")})},"capital"),h.jsx(N,{title:h.jsxs("div",{className:"flex items-center gap-2 opacity-75 cursor-not-allowed text-default-600","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:655:20",children:[h.jsx("span",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:span:656:22",children:"Monthly Overrides"}),h.jsx(G,{icon:"lucide:lock",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Icon:657:22"})]}),isDisabled:!0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Tab:652:16",children:h.jsx($,{mode:"wait","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:AnimatePresence:662:18",children:"monthly"===V&&h.jsx(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.2},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:664:22",children:h.jsxs("div",{className:"py-4 space-y-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:671:24",children:[h.jsx("p",{className:"text-sm text-foreground-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:p:672:26",children:"Override starting capital for specific months. This allows you to manually set the starting capital for any month, overriding the automatic calculation."}),h.jsxs("div",{className:"border border-divider rounded-lg p-4 bg-default-50 dark:bg-default-100","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:677:26",children:[h.jsx("h4",{className:"font-semibold mb-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:h4:678:28",children:"Add Monthly Override"}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:679:28",children:[h.jsx(U,{label:"Month",selectedKeys:[fe],onSelectionChange:e=>ge(Array.from(e)[0]),className:"w-full",size:"sm",variant:"bordered","aria-label":"Select month for override","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Select:680:30",children:xt.map(e=>h.jsx(z,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:SelectItem:690:34",children:e},e))}),h.jsx(U,{label:"Year",selectedKeys:[ye.toString()],onSelectionChange:e=>xe(parseInt(Array.from(e)[0])),className:"w-full",size:"sm",variant:"bordered","aria-label":"Select year for override","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Select:695:30",children:bt.map(e=>h.jsx(z,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:SelectItem:705:34",children:e},e))}),h.jsx(v,{label:"Starting Capital",type:"number",value:we,onValueChange:be,min:"0",step:"1000",startContent:h.jsx("span",{className:"text-default-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:span:717:46",children:"₹"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Input:710:30"}),h.jsx("div",{className:"sm:col-span-2 lg:col-span-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:719:30",children:h.jsx(j,{color:"primary",onPress:ke,isDisabled:!we,startContent:h.jsx(G,{icon:"lucide:calendar-plus","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Icon:724:48"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Button:720:32",children:"Set Monthly Override"})})]})]}),h.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:733:26",children:[h.jsx("h4",{className:"font-semibold mb-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:h4:734:28",children:"Monthly Overrides"}),0===Se.length?h.jsxs("div",{className:"text-center py-8 text-default-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:736:30",children:[h.jsx(G,{icon:"lucide:calendar-check",className:"text-4xl mb-2 mx-auto","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Icon:737:32"}),h.jsx("p",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:p:738:32",children:"No monthly overrides set yet."}),h.jsx("p",{className:"text-sm","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:p:739:32",children:"Add an override above to manually set starting capital for specific months."})]}):h.jsx("div",{className:"space-y-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:742:30",children:Se.map(e=>h.jsxs("div",{className:"flex items-center gap-3 p-3 border border-divider rounded-lg","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:744:34",children:[h.jsx("div",{className:"flex-shrink-0","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:745:36",children:h.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-primary-100 text-primary-600 dark:bg-primary-900 dark:text-primary-300","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:746:38",children:h.jsx(G,{icon:"lucide:calendar",className:"w-5 h-5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Icon:747:40"})})}),h.jsxs("div",{className:"flex-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:750:36",children:[h.jsxs("div",{className:"flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:751:38",children:[h.jsxs("span",{className:"font-medium","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:span:752:40",children:[e.month," ",e.year]}),h.jsx("span",{className:"text-sm px-2 py-1 rounded-full bg-primary-100 text-primary-700 dark:bg-primary-900 dark:text-primary-300","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:span:753:40",children:"Override"})]}),h.jsxs("div",{className:"text-sm text-default-500 mt-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:757:38",children:["Updated: ",new Date(e.updatedAt).toLocaleDateString()]})]}),h.jsxs("div",{className:"text-right","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:761:36",children:[h.jsxs("div",{className:"font-bold text-lg text-primary","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:762:38",children:["₹",e.startingCapital.toLocaleString()]}),h.jsx("div",{className:"flex gap-1 mt-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:765:38",children:h.jsx(j,{size:"sm",variant:"flat",color:"danger",onPress:()=>{return t=e.month,r=e.year,void m(t,r);var t,r},startContent:h.jsx(G,{icon:"lucide:trash",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Icon:771:56"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Button:766:40",children:"Remove"})})]})]},e.id))})]})]})},"monthly-content")})},"monthly"),h.jsx(N,{title:h.jsxs("div",{className:"flex items-center gap-2 opacity-75 cursor-not-allowed text-default-600","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:790:20",children:[h.jsx("span",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:span:791:22",children:"Milestones"}),h.jsx(G,{icon:"lucide:lock",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Icon:792:22"})]}),isDisabled:!0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Tab:787:16",children:h.jsx($,{mode:"wait","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:AnimatePresence:797:18",children:"milestones"===V&&h.jsx(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.2},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:799:22",children:h.jsxs("div",{className:"py-3 space-y-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:806:24",children:[h.jsx("p",{className:"text-xs text-foreground-500 p-3 bg-content1/30 rounded-lg border border-divider/30","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:p:807:26",children:"Track your progress and celebrate achievements"}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:811:26",children:Y.map(e=>{var t;const r=K.some(t=>t.id===e.id),a=r?new Date((null==(t=K.find(t=>t.id===e.id))?void 0:t.achievedAt)||"").toLocaleDateString():null;return h.jsxs("div",{className:"p-3 border rounded-lg flex items-center gap-3 transition-colors "+(r?"bg-success-50 dark:bg-success-900/20 border-success-200 dark:border-success-800":"bg-background/50 border-divider/50 hover:bg-content1/30"),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:818:32",children:[h.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center "+(r?"bg-success-200 text-success-800 dark:bg-success-800 dark:text-success-200":"bg-default-200 text-default-600 dark:bg-default-700 dark:text-default-300"),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:825:34",children:h.jsx(G,{icon:e.icon,className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Icon:830:36"})}),h.jsxs("div",{className:"flex-1 min-w-0","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:div:832:34",children:[h.jsx("h4",{className:"font-medium text-xs "+(r?"text-success-800 dark:text-success-200":"text-foreground"),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:h4:833:36",children:e.name}),h.jsx("p",{className:"text-xs mt-0.5 "+(r?"text-success-700 dark:text-success-300":"text-default-500"),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:p:836:36",children:e.description}),r&&h.jsx("p",{className:"text-xs text-default-400 mt-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:p:840:38",children:a})]}),r&&h.jsx(G,{icon:"lucide:check-circle",className:"w-4 h-4 text-success flex-shrink-0","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Icon:846:36"})]},e.id)})})]})},"milestones-content")})},"milestones")]})]}),h.jsx(b,{className:"flex-shrink-0 border-t border-divider/50 px-6 py-3 bg-gradient-to-r from-background/50 to-content1/30","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:ModalFooter:859:12",children:h.jsx(j,{variant:"flat",onPress:e,size:"sm",className:"w-full sm:w-auto min-w-20",startContent:h.jsx(G,{icon:"lucide:x",className:"w-3 h-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Icon:865:30"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:Button:860:14",children:"Close"})}),h.jsx(_e,{isOpen:X,onOpenChange:Z,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ProfileSettingsModal.tsx:YearlyStartingCapitalModal:872:12"})]})})})},kt=[{key:"all",label:"All Time"},{key:"week",label:"Past 1 Week"},{key:"month",label:"Past 1 Month"},{key:"fy",label:"This FY"},{key:"cy",label:"This CY"},{key:"pick-month",label:"Pick Month/Year"},{key:"custom",label:"Custom Range"}],Ct=["January","February","March","April","May","June","July","August","September","October","November","December"],Dt=Array.from({length:10},(e,t)=>(new Date).getFullYear()-t),St=()=>{var e;const{filter:t,setFilter:r}=Se(),{clearAllTrades:a}=yt(),{clearAccountingMethodData:n}=ve(),s=o.useCallback(async()=>{if(window.confirm("⚠️ WARNING: This will permanently delete ALL data including:\n\n• All trades and trade data\n• Portfolio settings and capital changes\n• Custom setups and growth areas\n• All cached and backup data\n• User preferences and settings\n\nThis action CANNOT be undone!\n\nAre you absolutely sure you want to continue?")){if(window.confirm('🚨 FINAL CONFIRMATION\n\nYou are about to delete ALL application data.\nThis includes everything you have entered.\n\nType "DELETE" in the next prompt to confirm.')){if("DELETE"===window.prompt('Type "DELETE" (in capital letters) to confirm deletion of all data:'))try{await a(),n();const t=[];for(let e=0;e<localStorage.length;e++){const r=localStorage.key(e);r&&t.push(r)}t.forEach(e=>{try{localStorage.removeItem(e)}catch(t){}});try{sessionStorage.clear()}catch(e){}if("indexedDB"in window)try{["trades","portfolio","settings","cache"].forEach(e=>{indexedDB.deleteDatabase(e)})}catch(e){}alert("✅ All data has been successfully cleared!\n\nThe page will now reload to reset the application."),window.location.reload()}catch(e){alert("❌ An error occurred while clearing data. Please try again or refresh the page manually.")}else alert('❌ Deletion cancelled. You must type "DELETE" exactly to confirm.')}}},[a,n]);return h.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-divider bg-background/80","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:div:118:4",children:[h.jsxs(B,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:Dropdown:119:6",children:[h.jsx(F,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:DropdownTrigger:120:8",children:h.jsx(j,{variant:"flat",className:"font-medium","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:Button:121:10",children:(null==(e=kt.find(e=>e.key===t.type))?void 0:e.label)||"All Time"})}),h.jsx(q,{"aria-label":"Global Filter",selectionMode:"single",selectedKeys:["month"===t.type?"pick-month":"custom"===t.type?"custom":t.type],onSelectionChange:e=>{const t=Array.from(e)[0];r("pick-month"===t?{type:"month",month:(new Date).getMonth(),year:(new Date).getFullYear()}:"custom"===t?{type:"custom",startDate:new Date,endDate:new Date}:{type:t})},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:DropdownMenu:125:8",children:kt.map(e=>h.jsx(R,{textValue:e.label,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:DropdownItem:141:12",children:e.label},e.key))})]}),"month"===t.type&&h.jsxs(h.Fragment,{children:[h.jsxs(B,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:Dropdown:148:10",children:[h.jsx(F,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:DropdownTrigger:149:12",children:h.jsx(j,{variant:"flat","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:Button:150:14",children:Ct[t.month??(new Date).getMonth()]})}),h.jsx(q,{"aria-label":"Select Month",selectionMode:"single",selectedKeys:[String(t.month??(new Date).getMonth())],onSelectionChange:e=>{const t=Number(Array.from(e)[0]);r(e=>({...e,type:"month",month:t}))},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:DropdownMenu:154:12",children:Ct.map((e,t)=>h.jsx(R,{textValue:e,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:DropdownItem:164:16",children:e},t))})]}),h.jsxs(B,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:Dropdown:168:10",children:[h.jsx(F,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:DropdownTrigger:169:12",children:h.jsx(j,{variant:"flat","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:Button:170:14",children:t.year??(new Date).getFullYear()})}),h.jsx(q,{"aria-label":"Select Year",selectionMode:"single",selectedKeys:[String(t.year??(new Date).getFullYear())],onSelectionChange:e=>{const t=Number(Array.from(e)[0]);r(e=>({...e,type:"month",year:t}))},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:DropdownMenu:174:12",children:Dt.map(e=>h.jsx(R,{textValue:String(e),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:DropdownItem:184:16",children:e},e))})]})]}),"custom"===t.type&&h.jsxs("div",{className:"flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:div:192:8",children:[h.jsx(v,{type:"date",label:"Start Date",value:t.startDate?new Date(t.startDate).toISOString().slice(0,10):"",onChange:e=>{const t=e.target.value?new Date(e.target.value):void 0;r(e=>({...e,startDate:t}))},size:"sm","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:Input:193:10"}),h.jsx("span",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:span:203:10",children:"-"}),h.jsx(v,{type:"date",label:"End Date",value:t.endDate?new Date(t.endDate).toISOString().slice(0,10):"",onChange:e=>{const t=e.target.value?new Date(e.target.value):void 0;r(e=>({...e,endDate:t}))},size:"sm","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:Input:204:10"})]}),h.jsx("div",{className:"flex-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:div:216:6"}),h.jsxs(B,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:Dropdown:217:6",children:[h.jsx(F,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:DropdownTrigger:218:8",children:h.jsx(j,{isIconOnly:!0,size:"sm",variant:"bordered",className:"ml-auto hover:bg-danger/10 transition","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:Button:219:10",children:h.jsx(G,{icon:"lucide:settings",className:"text-lg","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:Icon:225:12"})})}),h.jsx(q,{"aria-label":"Settings options",onAction:e=>{"clear-all"===e&&s()},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:DropdownMenu:228:8",children:h.jsx(R,{startContent:h.jsx(G,{icon:"lucide:trash-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:Icon:238:26"}),className:"text-danger",color:"danger",textValue:"Clear All Data","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\GlobalFilterBar.tsx:DropdownItem:236:10",children:"Clear All Data"},"clear-all")})]})]})},Mt=({className:e=""})=>h.jsxs("div",{className:`hidden sm:flex items-center overflow-hidden ${e}`,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\AnimatedBrandName.tsx:div:9:4",children:[h.jsx("style",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\AnimatedBrandName.tsx:style:10:6",children:"\n          @keyframes slideUp {\n            0% {\n              transform: translateY(100%);\n              opacity: 0;\n            }\n            100% {\n              transform: translateY(0);\n              opacity: 1;\n            }\n          }\n\n          @keyframes glowPulse {\n            0%, 100% {\n              text-shadow: 0 0 0 rgba(255, 255, 255, 0);\n            }\n            50% {\n              text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);\n            }\n          }\n\n          .animate-letter {\n            display: inline-block;\n            animation: slideUp 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;\n            opacity: 0;\n          }\n\n          .premium-text {\n            animation: glowPulse 3s infinite;\n          }\n        "}),h.jsxs("div",{className:"flex items-center gap-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\AnimatedBrandName.tsx:div:43:6",children:[h.jsx("div",{className:"flex","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\AnimatedBrandName.tsx:div:44:8",children:"NEXUS".split("").map((e,t)=>h.jsx("span",{className:"animate-letter text-black dark:text-white font-bold text-lg tracking-wider",style:{animationDelay:.1*t+"s"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\AnimatedBrandName.tsx:span:46:12",children:e},t))}),h.jsx("div",{className:"w-px h-6 bg-gradient-to-b from-gray-400 to-gray-600 mx-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\AnimatedBrandName.tsx:div:55:8"}),h.jsx("div",{className:"flex","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\AnimatedBrandName.tsx:div:56:8",children:"TRADE".split("").map((e,t)=>h.jsx("span",{className:"animate-letter text-gray-600 dark:text-gray-400 font-medium premium-text",style:{animationDelay:.1*(t+6)+"s"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\AnimatedBrandName.tsx:span:58:12",children:e},t))})]})]});class Nt extends o.Component{constructor(e){super(e),t(this,"resetError",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})}),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){var e;if(this.state.hasError){if(this.props.fallback){const e=this.props.fallback;return h.jsx(e,{error:this.state.error,resetError:this.resetError,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ErrorBoundary.tsx:FallbackComponent:43:15"})}return h.jsx("div",{className:"min-h-screen flex items-center justify-center p-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ErrorBoundary.tsx:div:48:8",children:h.jsx(D,{className:"max-w-md w-full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ErrorBoundary.tsx:Card:49:10",children:h.jsxs(S,{className:"text-center space-y-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ErrorBoundary.tsx:CardBody:50:12",children:[h.jsx("div",{className:"text-6xl","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ErrorBoundary.tsx:div:51:14",children:"💥"}),h.jsx("h2",{className:"text-xl font-semibold text-danger","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ErrorBoundary.tsx:h2:52:14",children:"Something went wrong"}),h.jsx("p",{className:"text-default-600","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ErrorBoundary.tsx:p:53:14",children:"The application encountered an unexpected error. Please try refreshing the page."}),this.state.error&&h.jsxs("details",{className:"text-left text-sm bg-default-100 p-3 rounded","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ErrorBoundary.tsx:details:58:16",children:[h.jsx("summary",{className:"cursor-pointer font-medium","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ErrorBoundary.tsx:summary:59:18",children:"Error Details"}),h.jsxs("pre",{className:"mt-2 text-xs overflow-auto","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ErrorBoundary.tsx:pre:60:18",children:[this.state.error.toString(),null==(e=this.state.errorInfo)?void 0:e.componentStack]})]}),h.jsxs("div",{className:"flex gap-2 justify-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ErrorBoundary.tsx:div:67:14",children:[h.jsx(j,{color:"primary",onPress:this.resetError,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ErrorBoundary.tsx:Button:68:16",children:"Try Again"}),h.jsx(j,{variant:"bordered",onPress:()=>window.location.reload(),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\ErrorBoundary.tsx:Button:74:16",children:"Refresh Page"})]})]})})})}return this.props.children}}var Ut={};function zt(){return"undefined"!=typeof window}function Pt(){try{const e="development";if("development"===e||"test"===e)return"development"}catch(e){}return"production"}function At(){return"development"===((zt()?window.vam:Pt())||"production")}function It(e={debug:!0}){var t;if(!zt())return;!function(e="auto"){window.vam="auto"!==e?e:Pt()}(e.mode),window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)}),e.beforeSend&&(null==(t=window.va)||t.call(window,"beforeSend",e.beforeSend));const r=function(e){return e.scriptSrc?e.scriptSrc:At()?"https://va.vercel-scripts.com/v1/script.debug.js":e.basePath?`${e.basePath}/insights/script.js`:"/_vercel/insights/script.js"}(e);if(document.head.querySelector(`script[src*="${r}"]`))return;const a=document.createElement("script");a.src=r,a.defer=!0,a.dataset.sdkn="@vercel/analytics"+(e.framework?`/${e.framework}`:""),a.dataset.sdkv="1.5.0",e.disableAutoTrack&&(a.dataset.disableAutoTrack="1"),e.endpoint?a.dataset.endpoint=e.endpoint:e.basePath&&(a.dataset.endpoint=`${e.basePath}/insights`),e.dsn&&(a.dataset.dsn=e.dsn),a.onerror=()=>{const e=At()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${r}. ${e}`)},At()&&!1===e.debug&&(a.dataset.debug="false"),document.head.appendChild(a)}function Tt(){if("undefined"!=typeof process)return Ut.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function Et(e){return n.useEffect(()=>{var t;e.beforeSend&&(null==(t=window.va)||t.call(window,"beforeSend",e.beforeSend))},[e.beforeSend]),n.useEffect(()=>{It({framework:e.framework||"react",basePath:e.basePath??Tt(),...void 0!==e.route&&{disableAutoTrack:!0},...e})},[]),n.useEffect(()=>{e.route&&e.path&&function({route:e,path:t}){var r;null==(r=window.va)||r.call(window,"pageview",{route:e,path:t})}({route:e.route,path:e.path})},[e.route,e.path]),null}const Ot=o.memo(({size:e="md",message:t="Loading...",fullScreen:r=!1,className:a=""})=>{const n=r?"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm gpu-accelerated":"flex flex-col items-center justify-center min-h-[200px] gpu-accelerated";return h.jsxs(Q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,ease:"easeOut"},className:`${n} ${a}`,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\Loader.tsx:div:24:4",children:[h.jsx(Q.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.4,delay:.1},className:"mb-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\Loader.tsx:div:30:6",children:h.jsxs("div",{className:"relative gpu-accelerated","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\Loader.tsx:div:36:8",children:[h.jsx(Q.div,{animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"},className:"w-10 h-10 border-2 border-foreground/20 border-t-foreground rounded-full loading-spinner","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\Loader.tsx:div:37:10"}),h.jsx(Q.div,{animate:{scale:[1,1.2,1],opacity:[.3,.8,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 w-10 h-10 border border-foreground/10 rounded-full gpu-accelerated","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\Loader.tsx:div:42:10"})]})}),h.jsxs(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\Loader.tsx:div:57:6",children:[h.jsx("p",{className:"text-sm font-medium text-foreground/80 mb-2 font-sans optimized-text","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\Loader.tsx:p:62:8",children:t}),h.jsx("div",{className:"flex items-center justify-center gap-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\Loader.tsx:div:63:8",children:[0,1,2].map(e=>h.jsx(Q.div,{className:"w-1 h-1 bg-foreground rounded-full gpu-accelerated",animate:{scale:[1,1.4,1],opacity:[.4,1,.4],y:[0,-2,0]},transition:{duration:1.2,repeat:1/0,delay:.15*e,ease:"easeInOut"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\Loader.tsx:div:65:12"},e))})]})]})});Ot.displayName="Loader";const Bt=({isOpen:e=!0,onClose:t,onGuestMode:r,onShowAuth:a})=>{const[o,s]=n.useState("signin"),[i,l]=n.useState(""),[c,d]=n.useState(""),[u,p]=n.useState(""),[m,f]=n.useState(""),[g,y]=n.useState(""),[_,x]=n.useState(!1),[w,v]=n.useState(!1),[b,j]=n.useState(!1),[k,C]=n.useState(""),[D,S]=n.useState(""),[M,N]=n.useState(null),[U,z]=n.useState(!1);n.useEffect(()=>{const e=setTimeout(()=>z(!0),50);return()=>clearTimeout(e)},[]);const{signIn:P,signUp:A,signInWithProvider:I,resetPassword:T,resendVerification:E}=he(),O=e=>{s(e),l(""),d(""),p(""),f(""),y(""),C(""),S(""),x(!1)},B=async e=>{j(!0),C(""),S("");const{error:t}=await I(e);t&&(C(t),j(!1))};return h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:div:238:4",children:[h.jsx(Q.div,{className:"auth-modal-backdrop absolute inset-0 bg-black/15",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:div:240:6"}),h.jsx(Q.div,{variants:{hidden:{opacity:0,scale:.98,y:10,filter:"blur(4px)"},visible:{opacity:1,scale:1,y:0,filter:"blur(0px)",transition:{duration:.25,ease:[.25,.46,.45,.94],filter:{duration:.15}}},exit:{opacity:0,scale:.98,y:-10,filter:"blur(4px)",transition:{duration:.2,ease:[.25,.46,.45,.94]}}},initial:"hidden",animate:U?"visible":"hidden",exit:"exit",className:"auth-modal-container relative w-full max-w-sm z-10","data-loading":!U,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:div:248:6",children:h.jsx("div",{className:"auth-modal-card relative bg-white/98 dark:bg-black/98 border border-gray-200/30 dark:border-gray-700/30 rounded-xl shadow-xl overflow-hidden","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:div:257:8",children:h.jsxs("div",{className:"p-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:div:259:10",children:[h.jsxs("div",{className:"text-center mb-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:div:261:12",children:[h.jsx("div",{className:"flex items-center justify-center mb-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:div:262:14",children:h.jsxs("svg",{viewBox:"0 0 24 24",className:"h-6 w-6 text-black dark:text-white",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:svg:263:16",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"1.5",fill:"none","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:circle:269:18"}),h.jsx("path",{d:"M12 6L16 10L12 18L8 10L12 6Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.5",strokeLinejoin:"round","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:path:277:18"})]})}),h.jsxs("h1",{className:"text-lg font-semibold text-black dark:text-white mb-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:h1:287:14",children:["signin"===o&&"Sign In","signup"===o&&"Sign Up","forgot-password"===o&&"Reset Password"]}),h.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:p:293:14",children:["signin"===o&&"Welcome back","signup"===o&&"Create your account","forgot-password"===o&&"Enter your email"]})]}),k&&h.jsxs("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:div:302:14",children:[h.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 leading-relaxed","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:p:303:16",children:k}),(k.includes("Email not verified")||k.includes("Sign in failed"))&&h.jsxs("div",{className:"mt-2 flex justify-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:div:307:18",children:[k.includes("Email not verified")&&h.jsx("button",{onClick:async()=>{if(i){j(!0),C(""),S("");try{const{error:e}=await E(i);e?C(e):S("Verification email sent! Check your inbox.")}catch(e){C("Failed to resend verification email. Please try again.")}finally{j(!1)}}else C("Please enter your email address first")},disabled:b||!i,className:"text-xs text-red-600 dark:text-red-400 underline hover:no-underline disabled:opacity-50","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:button:309:22",children:"Resend Email"}),k.includes("Sign in failed")&&"signin"===o&&h.jsx("button",{onClick:()=>O("signup"),className:"text-xs text-red-600 dark:text-red-400 underline hover:no-underline","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:button:318:22",children:"Sign Up Instead"})]})]}),D&&h.jsx("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-900/20 border border-gray-200 dark:border-gray-700 rounded text-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:div:334:14",children:h.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 leading-relaxed","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:p:335:16",children:D})}),h.jsxs("form",{onSubmit:async e=>{e.preventDefault(),e.stopPropagation(),console.log("🔐 Form submitted, mode:",o,"email:",i),C(""),S(""),j(!0),e.target&&e.target.setAttribute("data-submitting","true");try{if("signin"===o){console.log("🔐 Attempting sign in...");const{error:e}=await P(i,c);if(e){console.error("❌ Sign in error received:",e);const t=ue({message:e});if(console.log("📝 Error code mapped to:",t),"INVALID_CREDENTIALS"===t){const e='❌ Incorrect email or password!\n\n💡 New user? Click "Sign Up Instead" below to create an account.';console.log("🔴 Setting error message:",e),C(e),console.log("🔴 Error state should now be:",e)}else if("EMAIL_NOT_CONFIRMED"===t){C("❌ Email not verified! Check your inbox and click the verification link.")}else C(t);console.log("❌ Error set in UI:",t)}else console.log("✅ Sign in successful!")}else if("signup"===o){if(c!==u)return void C("Passwords do not match");if(c.length<6)return void C("Password must be at least 6 characters long");const{error:e}=await A(i,c,m,g);e?C(ue({message:e})):(S(`✅ Account created successfully!\n\n📧 Please check your email (${i}) for a verification link.\n\n⚠️ You must verify your email before you can sign in.\n\n💡 Check your spam folder if you don't see the email within a few minutes.`),s("signin"),d(""),p(""))}else if("forgot-password"===o){const{error:e}=await T(i);e?C(ue({message:e})):(S("If this email exists, a reset link was sent."),s("signin"))}}catch(t){console.error("❌ Unexpected error in handleSubmit:",t),C("An unexpected error occurred. Please try again.")}finally{j(!1),console.log("🔄 Form submission completed, loading set to false"),e.target&&e.target.removeAttribute("data-submitting")}},className:"auth-form-container space-y-3",noValidate:!0,autoComplete:"off","data-testid":"auth-form","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:form:342:12",children:["signup"===o&&h.jsxs("div",{className:"grid grid-cols-2 gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:div:351:16",children:[h.jsx("input",{type:"text",placeholder:"First",value:m,onChange:e=>f(e.target.value),className:"auth-input w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded text-sm focus:outline-none focus:border-black dark:focus:border-white","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:input:352:18"}),h.jsx("input",{type:"text",placeholder:"Last",value:g,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded text-sm focus:outline-none focus:border-black dark:focus:border-white transition-colors","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:input:359:18"})]}),h.jsx("input",{type:"email",placeholder:"Email",value:i,onChange:e=>l(e.target.value),required:!0,className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded text-sm focus:outline-none focus:border-black dark:focus:border-white transition-colors","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:input:370:14"}),"forgot-password"!==o&&h.jsxs("div",{className:"relative","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:div:381:16",children:[h.jsx("input",{type:_?"text":"password",placeholder:"Password",value:c,onChange:e=>d(e.target.value),required:!0,className:"w-full px-3 py-2 pr-8 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded text-sm focus:outline-none focus:border-black dark:focus:border-white transition-colors","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:input:382:18"}),h.jsx("button",{type:"button",onClick:()=>x(!_),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:button:390:18",children:h.jsx(G,{icon:_?"mdi:eye-off":"mdi:eye",className:"text-sm","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:Icon:395:20"})})]}),"signup"===o&&h.jsxs("div",{className:"relative","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:div:402:16",children:[h.jsx("input",{type:w?"text":"password",placeholder:"Confirm Password",value:u,onChange:e=>p(e.target.value),required:!0,className:"w-full px-3 py-2 pr-8 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded text-sm focus:outline-none focus:border-black dark:focus:border-white transition-colors","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:input:403:18"}),h.jsx("button",{type:"button",onClick:()=>v(!w),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:button:411:18",children:h.jsx(G,{icon:w?"mdi:eye-off":"mdi:eye",className:"text-sm","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:Icon:416:20"})})]}),"signin"===o&&h.jsx("div",{className:"text-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:div:423:16",children:h.jsx("button",{type:"button",onClick:()=>O("forgot-password"),className:"text-xs text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white transition-colors underline","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:button:424:18",children:"Forgot your password?"})}),h.jsx("button",{type:"submit",disabled:b,className:"auth-button w-full py-2 px-4 bg-black dark:bg-white text-white dark:text-black text-sm font-medium rounded hover:bg-gray-800 dark:hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:button:435:14",children:b?h.jsx("div",{className:"flex items-center justify-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:div:441:18",children:h.jsx("div",{className:"auth-spinner w-4 h-4 border-2 border-white/30 dark:border-black/30 border-t-white dark:border-t-black rounded-full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:div:442:20"})}):h.jsxs(h.Fragment,{children:["signin"===o&&"Sign In","signup"===o&&"Sign Up","forgot-password"===o&&"Send Reset Email"]})})]}),"forgot-password"!==o&&h.jsxs("div",{className:"mt-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:div:456:14",children:[h.jsxs("div",{className:"relative","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:div:457:16",children:[h.jsx("div",{className:"absolute inset-0 flex items-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:div:458:18",children:h.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:div:459:20"})}),h.jsx("div",{className:"relative flex justify-center text-xs","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:div:461:18",children:h.jsx("span",{className:"bg-white dark:bg-black px-2 text-gray-500 dark:text-gray-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:span:462:20",children:"OR CONTINUE WITH"})})]}),h.jsxs("div",{className:"mt-4 space-y-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:div:468:16",children:[h.jsxs("button",{type:"button",onClick:()=>B("twitter"),disabled:b,className:"social-auth-button w-full flex items-center justify-center px-3 py-2 border border-gray-200 dark:border-gray-700 rounded text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-black hover:bg-gray-50 dark:hover:bg-gray-900 disabled:opacity-50 disabled:cursor-not-allowed","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:button:470:18",children:[h.jsx(G,{icon:"mdi:twitter",className:"w-4 h-4 mr-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:Icon:476:20"}),"Continue with X"]}),h.jsxs("button",{type:"button",onClick:()=>B("google"),disabled:b,className:"w-full flex items-center justify-center px-3 py-2 border border-gray-200 dark:border-gray-700 rounded text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-black hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors disabled:opacity-50 disabled:cursor-not-allowed","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:button:481:18",children:[h.jsx(G,{icon:"mdi:google",className:"w-4 h-4 mr-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:Icon:487:20"}),"Continue with Google"]}),h.jsxs("button",{type:"button",onClick:()=>B("github"),disabled:b,className:"w-full flex items-center justify-center px-3 py-2 border border-gray-200 dark:border-gray-700 rounded text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-black hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors disabled:opacity-50 disabled:cursor-not-allowed","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:button:492:18",children:[h.jsx(G,{icon:"mdi:github",className:"w-4 h-4 mr-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:Icon:498:20"}),"Continue with GitHub"]})]})]}),h.jsxs("div",{className:"mt-4 text-center space-y-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:div:506:12",children:["signin"===o&&h.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:p:508:16",children:["Don't have an account?"," ",h.jsx("button",{onClick:()=>O("signup"),className:"text-black dark:text-white underline hover:no-underline transition-colors","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:button:510:18",children:"Sign up"})]}),"signup"===o&&h.jsxs("div",{className:"space-y-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:div:520:16",children:[h.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:p:521:18",children:["Already have an account?"," ",h.jsx("button",{onClick:()=>O("signin"),className:"text-black dark:text-white underline hover:no-underline transition-colors","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:button:523:20",children:"Sign in"})]}),h.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:p:530:18",children:["Forgot your password?"," ",h.jsx("button",{onClick:()=>O("forgot-password"),className:"text-black dark:text-white underline hover:no-underline transition-colors","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:button:532:20",children:"Reset it"})]})]}),"forgot-password"===o&&h.jsxs("div",{className:"space-y-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:div:543:16",children:[h.jsx("button",{onClick:()=>O("signin"),className:"text-xs text-gray-600 dark:text-gray-400 hover:text-black dark:hover:text-white transition-colors underline","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:button:544:18",children:"← Back to sign in"}),h.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:p:550:18",children:["Don't have an account?"," ",h.jsx("button",{onClick:()=>O("signup"),className:"text-black dark:text-white underline hover:no-underline transition-colors","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:button:552:20",children:"Sign up"})]})]})]}),r&&h.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 text-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:div:565:14",children:[h.jsx("button",{onClick:r,className:"text-xs text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:button:566:16",children:"Continue as Guest"}),h.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthModal.tsx:p:572:16",children:"Limited features available"})]})]})})})]})},Ft=({children:e,fallback:t})=>{const{user:r,session:a,loading:o,error:s}=he(),[i,l]=n.useState(!1),[c,d]=n.useState(!1),[u,p]=n.useState(!1),[m,f]=n.useState(null);return n.useEffect(()=>{l(!0)},[]),n.useEffect(()=>{s&&(console.log("🔐 AuthGuard detected auth error:",s),f(s))},[s]),!i||o?h.jsxs("div",{className:"min-h-screen bg-background font-sans antialiased","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:div:37:6",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background via-background to-background","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:div:39:8",children:h.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(17,24,28,0.03),transparent_70%)] dark:bg-[radial-gradient(circle_at_50%_50%,rgba(236,237,238,0.02),transparent_70%)]","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:div:40:10"})}),h.jsx("div",{className:"relative z-10 min-h-screen flex items-center justify-center px-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:div:44:8",children:h.jsxs(Q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,ease:"easeOut"},className:"flex flex-col items-center justify-center text-center max-w-sm mx-auto","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:div:45:10",children:[h.jsx(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"mb-16","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:div:52:12",children:h.jsxs("div",{className:"flex flex-col items-center justify-center space-y-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:div:58:14",children:[h.jsxs(Q.div,{animate:{rotate:360,scale:[1,1.02,1]},transition:{rotate:{duration:20,repeat:1/0,ease:"linear"},scale:{duration:4,repeat:1/0,ease:"easeInOut"}},className:"relative","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:div:60:16",children:[h.jsx(Q.div,{animate:{scale:[1,1.1,1],opacity:[.1,.3,.1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 w-16 h-16 border border-foreground/10 rounded-full -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:div:72:18"}),h.jsxs("svg",{viewBox:"0 0 24 24",className:"h-16 w-16 text-foreground relative z-10",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:svg:85:18",children:[h.jsx(Q.circle,{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"1",fill:"none",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:1},transition:{duration:2,ease:"easeInOut"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:circle:91:20"}),h.jsx(Q.path,{d:"M12 6L16 10L12 18L8 10L12 6Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.2",strokeLinejoin:"round",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{duration:1,delay:.8,ease:"backOut"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:path:102:20"}),h.jsx(Q.path,{d:"M8 10L12 14L16 10",stroke:"currentColor",strokeWidth:"0.2",fill:"none",opacity:"0.5",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:.5},transition:{duration:1.2,delay:1.2,ease:"easeInOut"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:path:112:20"})]})]}),h.jsxs(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"text-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:div:126:16",children:[h.jsx(Q.h1,{className:"text-3xl font-bold tracking-wider text-foreground font-sans",initial:{letterSpacing:"0.3em",opacity:0},animate:{letterSpacing:"0.15em",opacity:1},transition:{duration:1,delay:.6},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:h1:132:18",children:"NEXUS"}),h.jsx(Q.div,{initial:{width:0,opacity:0},animate:{width:"100%",opacity:.3},transition:{duration:1,delay:1},className:"h-px bg-foreground mt-3 mx-auto","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:div:140:18"})]})]})}),h.jsx(Q.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.4,delay:.2},className:"mb-8 flex justify-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:div:151:12",children:h.jsxs("div",{className:"relative flex items-center justify-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:div:157:14",children:[h.jsx(Q.div,{animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-2 border-foreground/15 border-t-foreground rounded-full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:div:158:16"}),h.jsx(Q.div,{animate:{scale:[1,1.15,1],opacity:[.2,.6,.2]},transition:{duration:2.5,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 w-12 h-12 border border-foreground/8 rounded-full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:div:163:16"}),h.jsx(Q.div,{animate:{scale:[1,1.3,1],opacity:[.1,.4,.1]},transition:{duration:3,repeat:1/0,ease:"easeInOut",delay:.5},className:"absolute inset-0 w-12 h-12 border border-foreground/5 rounded-full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:div:175:16"})]})}),h.jsxs(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,delay:.3},className:"text-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:div:192:12",children:[h.jsx(Q.p,{className:"text-sm font-medium text-foreground/70 mb-4 font-sans tracking-wide",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.5},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:p:198:14",children:i?"Checking authentication...":"Initializing..."}),h.jsx("div",{className:"flex items-center justify-center gap-1.5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:div:207:14",children:[0,1,2].map(e=>h.jsx(Q.div,{className:"w-1.5 h-1.5 bg-foreground/60 rounded-full",animate:{scale:[1,1.3,1],opacity:[.3,1,.3],y:[0,-3,0]},transition:{duration:1.4,repeat:1/0,delay:.2*e,ease:"easeInOut"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:div:209:18"},e))})]})]})})]}):r&&a?h.jsx(h.Fragment,{children:e}):u?h.jsxs(h.Fragment,{children:[e,c&&h.jsx(Bt,{isOpen:c,onClose:()=>d(!1),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:AuthModal:244:10"})]}):h.jsxs(h.Fragment,{children:[e,h.jsx(Bt,{isOpen:!0,onClose:()=>p(!0),onGuestMode:()=>p(!0),onShowAuth:()=>d(!0),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\auth\\AuthGuard.tsx:AuthModal:257:6"})]})};var qt,Rt={exports:{}};const Lt=a((qt||(qt=1,Rt.exports=function(){
/*! *****************************************************************************
      Copyright (c) Microsoft Corporation.
      Permission to use, copy, modify, and/or distribute this software for any
      purpose with or without fee is hereby granted.
      THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
      REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
      AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
      INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
      LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
      OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
      PERFORMANCE OF THIS SOFTWARE.
      ***************************************************************************** */
var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};function t(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function a(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}var r=function(){return r=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},r.apply(this,arguments)};function a(e,t,r){for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:s,o=Object.keys,i=Array.isArray;function l(e,t){return"object"!=typeof t||o(t).forEach(function(r){e[r]=t[r]}),e}"undefined"==typeof Promise||n.Promise||(n.Promise=Promise);var c=Object.getPrototypeOf,d={}.hasOwnProperty;function u(e,t){return d.call(e,t)}function p(e,t){"function"==typeof t&&(t=t(c(e))),("undefined"==typeof Reflect?o:Reflect.ownKeys)(t).forEach(function(r){h(e,r,t[r])})}var m=Object.defineProperty;function h(e,t,r,a){m(e,t,l(r&&u(r,"get")&&"function"==typeof r.get?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},a))}function f(e){return{from:function(t){return e.prototype=Object.create(t.prototype),h(e.prototype,"constructor",e),{extend:p.bind(null,e.prototype)}}}}var g=Object.getOwnPropertyDescriptor;function y(e,t){var r;return g(e,t)||(r=c(e))&&y(r,t)}var _=[].slice;function x(e,t,r){return _.call(e,t,r)}function w(e,t){return t(e)}function v(e){if(!e)throw new Error("Assertion Failed")}function b(e){n.setImmediate?setImmediate(e):setTimeout(e,0)}function j(e,t){return e.reduce(function(e,r,a){var n=t(r,a);return n&&(e[n[0]]=n[1]),e},{})}function k(e,t){if("string"==typeof t&&u(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var r=[],a=0,n=t.length;a<n;++a){var o=k(e,t[a]);r.push(o)}return r}var s=t.indexOf(".");if(-1!==s){var i=e[t.substr(0,s)];return null==i?void 0:k(i,t.substr(s+1))}}function C(e,t,r){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){v("string"!=typeof r&&"length"in r);for(var a=0,n=t.length;a<n;++a)C(e,t[a],r[a])}else{var o=t.indexOf(".");if(-1!==o){var s=t.substr(0,o),l=t.substr(o+1);if(""===l)void 0===r?i(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=r;else{var c=e[s];c&&u(e,s)||(c=e[s]={}),C(c,l,r)}}else void 0===r?i(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}function D(e,t){"string"==typeof t?C(e,t,void 0):"length"in t&&[].map.call(t,function(t){C(e,t,void 0)})}function S(e){var t={};for(var r in e)u(e,r)&&(t[r]=e[r]);return t}var M=[].concat;function N(e){return M.apply([],e)}var U="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(N([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return n[e]}),z=new Set(U.map(function(e){return n[e]}));function P(e){var t={};for(var r in e)if(u(e,r)){var a=e[r];t[r]=!a||"object"!=typeof a||z.has(a.constructor)?a:P(a)}return t}function A(e){for(var t in e)if(u(e,t))return!1;return!0}var I=null;function T(e){I=new WeakMap;var t=E(e);return I=null,t}function E(e){if(!e||"object"!=typeof e)return e;var t=I.get(e);if(t)return t;if(i(e)){t=[],I.set(e,t);for(var r=0,a=e.length;r<a;++r)t.push(E(e[r]))}else if(z.has(e.constructor))t=e;else{var n=c(e);for(var o in t=n===Object.prototype?{}:Object.create(n),I.set(e,t),e)u(e,o)&&(t[o]=E(e[o]))}return t}var O={}.toString;function B(e){return O.call(e).slice(8,-1)}var F="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",q="symbol"==typeof F?function(e){var t;return null!=e&&(t=e[F])&&t.apply(e)}:function(){return null};function R(e,t){var r=e.indexOf(t);return r>=0&&e.splice(r,1),r>=0}var L={};function K(e){var t,r,a,n;if(1===arguments.length){if(i(e))return e.slice();if(this===L&&"string"==typeof e)return[e];if(n=q(e)){for(r=[];!(a=n.next()).done;)r.push(a.value);return r}if(null==e)return[e];if("number"==typeof(t=e.length)){for(r=new Array(t);t--;)r[t]=e[t];return r}return[e]}for(t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return r}var Y="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},G=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Q=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(G),$={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function W(e,t){this.name=e,this.message=t}function J(e,t){return e+". Errors: "+Object.keys(t).map(function(e){return t[e].toString()}).filter(function(e,t,r){return r.indexOf(e)===t}).join("\n")}function V(e,t,r,a){this.failures=t,this.failedKeys=a,this.successCount=r,this.message=J(e,t)}function H(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(e){return t[e]}),this.failuresByPos=t,this.message=J(e,this.failures)}f(W).from(Error).extend({toString:function(){return this.name+": "+this.message}}),f(V).from(W),f(H).from(W);var X=Q.reduce(function(e,t){return e[t]=t+"Error",e},{}),Z=W,ee=Q.reduce(function(e,t){var r=t+"Error";function a(e,a){this.name=r,e?"string"==typeof e?(this.message="".concat(e).concat(a?"\n "+a:""),this.inner=a||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=$[t]||r,this.inner=null)}return f(a).from(Z),e[t]=a,e},{});ee.Syntax=SyntaxError,ee.Type=TypeError,ee.Range=RangeError;var te=G.reduce(function(e,t){return e[t+"Error"]=ee[t],e},{});function re(e,t){if(!e||e instanceof W||e instanceof TypeError||e instanceof SyntaxError||!e.name||!te[e.name])return e;var r=new te[e.name](t||e.message,e);return"stack"in e&&h(r,"stack",{get:function(){return this.inner.stack}}),r}var ae=Q.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=ee[t]),e},{});function ne(){}function oe(e){return e}function se(e,t){return null==e||e===oe?t:function(r){return t(e(r))}}function ie(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function le(e,t){return e===ne?t:function(){var r=e.apply(this,arguments);void 0!==r&&(arguments[0]=r);var a=this.onsuccess,n=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?ie(a,this.onsuccess):a),n&&(this.onerror=this.onerror?ie(n,this.onerror):n),void 0!==o?o:r}}function ce(e,t){return e===ne?t:function(){e.apply(this,arguments);var r=this.onsuccess,a=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?ie(r,this.onsuccess):r),a&&(this.onerror=this.onerror?ie(a,this.onerror):a)}}function de(e,t){return e===ne?t:function(r){var a=e.apply(this,arguments);l(r,a);var n=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?ie(n,this.onsuccess):n),o&&(this.onerror=this.onerror?ie(o,this.onerror):o),void 0===a?void 0===s?void 0:s:l(a,s)}}function ue(e,t){return e===ne?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function pe(e,t){return e===ne?t:function(){var r=e.apply(this,arguments);if(r&&"function"==typeof r.then){for(var a=this,n=arguments.length,o=new Array(n);n--;)o[n]=arguments[n];return r.then(function(){return t.apply(a,o)})}return t.apply(this,arguments)}}ae.ModifyError=V,ae.DexieError=W,ae.BulkError=H;var me="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function he(e,t){me=e}var fe={},ge=100,ye="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,c(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,c(t),e]}(),_e=ye[0],xe=ye[1],we=ye[2],ve=xe&&xe.then,be=_e&&_e.constructor,je=!!we;function ke(){queueMicrotask(Ye)}var Ce=function(e,t){Ae.push([e,t]),Se&&(ke(),Se=!1)},De=!0,Se=!0,Me=[],Ne=[],Ue=oe,ze={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ne,pgp:!1,env:{},finalize:ne},Pe=ze,Ae=[],Ie=0,Te=[];function Ee(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=Pe;if("function"!=typeof e){if(e!==fe)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&qe(this,this._value))}this._state=null,this._value=null,++t.ref,Fe(this,e)}var Oe={get:function(){var e=Pe,t=at;function r(r,a){var n=this,o=!e.global&&(e!==Pe||t!==at),s=o&&!it(),i=new Ee(function(t,i){Le(n,new Be(ht(r,e,o,s),ht(a,e,o,s),t,i,e))});return this._consoleTask&&(i._consoleTask=this._consoleTask),i}return r.prototype=fe,r},set:function(e){h(this,"then",e&&e.prototype===fe?Oe:{get:function(){return e},set:Oe.set})}};function Be(e,t,r,a,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=r,this.reject=a,this.psd=n}function Fe(e,t){try{t(function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&Ge();t&&"function"==typeof t.then?Fe(e,function(e,r){t instanceof Ee?t._then(e,r):t.then(e,r)}):(e._state=!0,e._value=t,Re(e)),r&&Qe()}},qe.bind(null,e))}catch(r){qe(e,r)}}function qe(e,t){if(Ne.push(t),null===e._state){var r=e._lib&&Ge();t=Ue(t),e._state=!1,e._value=t,Je(e),Re(e),r&&Qe()}}function Re(e){var t=e._listeners;e._listeners=[];for(var r=0,a=t.length;r<a;++r)Le(e,t[r]);var n=e._PSD;--n.ref||n.finalize(),0===Ie&&(++Ie,Ce(function(){0===--Ie&&$e()},[]))}function Le(e,t){if(null!==e._state){var r=e._state?t.onFulfilled:t.onRejected;if(null===r)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ie,Ce(Ke,[r,e,t])}else e._listeners.push(t)}function Ke(e,t,r){try{var a,n=t._value;!t._state&&Ne.length&&(Ne=[]),a=me&&t._consoleTask?t._consoleTask.run(function(){return e(n)}):e(n),t._state||-1!==Ne.indexOf(n)||Ve(t),r.resolve(a)}catch(o){r.reject(o)}finally{0===--Ie&&$e(),--r.psd.ref||r.psd.finalize()}}function Ye(){mt(ze,function(){Ge()&&Qe()})}function Ge(){var e=De;return De=!1,Se=!1,e}function Qe(){var e,t,r;do{for(;Ae.length>0;)for(e=Ae,Ae=[],r=e.length,t=0;t<r;++t){var a=e[t];a[0].apply(null,a[1])}}while(Ae.length>0);De=!0,Se=!0}function $e(){var e=Me;Me=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=Te.slice(0),r=t.length;r;)t[--r]()}function We(e){function t(){e(),Te.splice(Te.indexOf(t),1)}Te.push(t),++Ie,Ce(function(){0===--Ie&&$e()},[])}function Je(e){Me.some(function(t){return t._value===e._value})||Me.push(e)}function Ve(e){for(var t=Me.length;t;)if(Me[--t]._value===e._value)return void Me.splice(t,1)}function He(e){return new Ee(fe,!1,e)}function Xe(e,t){var r=Pe;return function(){var a=Ge(),n=Pe;try{return ut(r,!0),e.apply(this,arguments)}catch(o){t&&t(o)}finally{ut(n,!1),a&&Qe()}}}p(Ee.prototype,{then:Oe,_then:function(e,t){Le(this,new Be(null,null,e,t,Pe))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],r=arguments[1];return"function"==typeof t?this.then(null,function(e){return e instanceof t?r(e):He(e)}):this.then(null,function(e){return e&&e.name===t?r(e):He(e)})},finally:function(e){return this.then(function(t){return Ee.resolve(e()).then(function(){return t})},function(t){return Ee.resolve(e()).then(function(){return He(t)})})},timeout:function(e,t){var r=this;return e<1/0?new Ee(function(a,n){var o=setTimeout(function(){return n(new ee.Timeout(t))},e);r.then(a,n).finally(clearTimeout.bind(null,o))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&h(Ee.prototype,Symbol.toStringTag,"Dexie.Promise"),ze.env=pt(),p(Ee,{all:function(){var e=K.apply(null,arguments).map(lt);return new Ee(function(t,r){0===e.length&&t([]);var a=e.length;e.forEach(function(n,o){return Ee.resolve(n).then(function(r){e[o]=r,--a||t(e)},r)})})},resolve:function(e){return e instanceof Ee?e:e&&"function"==typeof e.then?new Ee(function(t,r){e.then(t,r)}):new Ee(fe,!0,e)},reject:He,race:function(){var e=K.apply(null,arguments).map(lt);return new Ee(function(t,r){e.map(function(e){return Ee.resolve(e).then(t,r)})})},PSD:{get:function(){return Pe},set:function(e){return Pe=e}},totalEchoes:{get:function(){return at}},newPSD:ot,usePSD:mt,scheduler:{get:function(){return Ce},set:function(e){Ce=e}},rejectionMapper:{get:function(){return Ue},set:function(e){Ue=e}},follow:function(e,t){return new Ee(function(r,a){return ot(function(t,r){var a=Pe;a.unhandleds=[],a.onunhandled=r,a.finalize=ie(function(){var e=this;We(function(){0===e.unhandleds.length?t():r(e.unhandleds[0])})},a.finalize),e()},t,r,a)})}}),be&&(be.allSettled&&h(Ee,"allSettled",function(){var e=K.apply(null,arguments).map(lt);return new Ee(function(t){0===e.length&&t([]);var r=e.length,a=new Array(r);e.forEach(function(e,n){return Ee.resolve(e).then(function(e){return a[n]={status:"fulfilled",value:e}},function(e){return a[n]={status:"rejected",reason:e}}).then(function(){return--r||t(a)})})})}),be.any&&"undefined"!=typeof AggregateError&&h(Ee,"any",function(){var e=K.apply(null,arguments).map(lt);return new Ee(function(t,r){0===e.length&&r(new AggregateError([]));var a=e.length,n=new Array(a);e.forEach(function(e,o){return Ee.resolve(e).then(function(e){return t(e)},function(e){n[o]=e,--a||r(new AggregateError(n))})})})}),be.withResolvers&&(Ee.withResolvers=be.withResolvers));var Ze={awaits:0,echoes:0,id:0},et=0,tt=[],rt=0,at=0,nt=0;function ot(e,t,r,a){var n=Pe,o=Object.create(n);o.parent=n,o.ref=0,o.global=!1,o.id=++nt,ze.env,o.env=je?{Promise:Ee,PromiseProp:{value:Ee,configurable:!0,writable:!0},all:Ee.all,race:Ee.race,allSettled:Ee.allSettled,any:Ee.any,resolve:Ee.resolve,reject:Ee.reject}:{},t&&l(o,t),++n.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=mt(o,e,r,a);return 0===o.ref&&o.finalize(),s}function st(){return Ze.id||(Ze.id=++et),++Ze.awaits,Ze.echoes+=ge,Ze.id}function it(){return!!Ze.awaits&&(0===--Ze.awaits&&(Ze.id=0),Ze.echoes=Ze.awaits*ge,!0)}function lt(e){return Ze.echoes&&e&&e.constructor===be?(st(),e.then(function(e){return it(),e},function(e){return it(),gt(e)})):e}function ct(e){++at,Ze.echoes&&0!==--Ze.echoes||(Ze.echoes=Ze.awaits=Ze.id=0),tt.push(Pe),ut(e,!0)}function dt(){var e=tt[tt.length-1];tt.pop(),ut(e,!1)}function ut(e,t){var r=Pe;if((t?!Ze.echoes||rt++&&e===Pe:!rt||--rt&&e===Pe)||queueMicrotask(t?ct.bind(null,e):dt),e!==Pe&&(Pe=e,r===ze&&(ze.env=pt()),je)){var a=ze.env.Promise,o=e.env;(r.global||e.global)&&(Object.defineProperty(n,"Promise",o.PromiseProp),a.all=o.all,a.race=o.race,a.resolve=o.resolve,a.reject=o.reject,o.allSettled&&(a.allSettled=o.allSettled),o.any&&(a.any=o.any))}}function pt(){var e=n.Promise;return je?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(n,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function mt(e,t,r,a,n){var o=Pe;try{return ut(e,!0),t(r,a,n)}finally{ut(o,!1)}}function ht(e,t,r,a){return"function"!=typeof e?e:function(){var n=Pe;r&&st(),ut(t,!0);try{return e.apply(this,arguments)}finally{ut(n,!1),a&&queueMicrotask(it)}}}function ft(e){Promise===be&&0===Ze.echoes?0===rt?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+ve).indexOf("[native code]")&&(st=it=ne);var gt=Ee.reject;function yt(e,t,r,a){if(e.idbdb&&(e._state.openComplete||Pe.letThrough||e._vip)){var n=e._createTransaction(t,r,e._dbSchema);try{n.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===X.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return yt(e,t,r,a)})):gt(o)}return n._promise(t,function(e,t){return ot(function(){return Pe.trans=n,a(e,t,n)})}).then(function(e){if("readwrite"===t)try{n.idbtrans.commit()}catch(r){}return"readonly"===t?e:n._completion.then(function(){return e})})}if(e._state.openComplete)return gt(new ee.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return gt(new ee.DatabaseClosed);e.open().catch(ne)}return e._state.dbReadyPromise.then(function(){return yt(e,t,r,a)})}var _t="4.0.11",xt=String.fromCharCode(65535),wt=-1/0,vt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",bt="String expected.",jt=[],kt="__dbnames",Ct="readonly",Dt="readwrite";function St(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Mt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Nt(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=T(t))[e],t}}function Ut(){throw ee.Type()}function zt(e,t){try{var r=It(e),a=It(t);if(r!==a)return"Array"===r?1:"Array"===a?-1:"binary"===r?1:"binary"===a?-1:"string"===r?1:"string"===a?-1:"Date"===r?1:"Date"!==a?NaN:-1;switch(r){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return At(Tt(e),Tt(t));case"Array":return Pt(e,t)}}catch(n){}return NaN}function Pt(e,t){for(var r=e.length,a=t.length,n=r<a?r:a,o=0;o<n;++o){var s=zt(e[o],t[o]);if(0!==s)return s}return r===a?0:r<a?-1:1}function At(e,t){for(var r=e.length,a=t.length,n=r<a?r:a,o=0;o<n;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return r===a?0:r<a?-1:1}function It(e){var t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";var r=B(e);return"ArrayBuffer"===r?"binary":r}function Tt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Et=function(){function e(){}return e.prototype._trans=function(e,t,r){var a=this._tx||Pe.trans,n=this.name,o=me&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===e?"read":"write"," ").concat(this.name));function s(e,r,a){if(!a.schema[n])throw new ee.NotFound("Table "+n+" not part of transaction");return t(a.idbtrans,a)}var i=Ge();try{var l=a&&a.db._novip===this.db._novip?a===Pe.trans?a._promise(e,s,r):ot(function(){return a._promise(e,s,r)},{trans:a,transless:Pe.transless||Pe}):yt(this.db,e,[this.name],s);return o&&(l._consoleTask=o,l=l.catch(function(e){return console.trace(e),gt(e)})),l}finally{i&&Qe()}},e.prototype.get=function(e,t){var r=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?gt(new ee.Type("Invalid argument to Table.get()")):this._trans("readonly",function(t){return r.core.get({trans:t,key:e}).then(function(e){return r.hook.reading.fire(e)})}).then(t)},e.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(i(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=o(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(e){if(e.compound&&t.every(function(t){return e.keyPath.indexOf(t)>=0})){for(var r=0;r<t.length;++r)if(-1===t.indexOf(e.keyPath[r]))return!1;return!0}return!1}).sort(function(e,t){return e.keyPath.length-t.keyPath.length})[0];if(r&&this.db._maxKey!==xt){var a=r.keyPath.slice(0,t.length);return this.where(a).equals(a.map(function(t){return e[t]}))}!r&&me&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var n=this.schema.idxByName;function s(e,t){return 0===zt(e,t)}var l=t.reduce(function(t,r){var a=t[0],o=t[1],l=n[r],c=e[r];return[a||l,a||!l?St(o,l&&l.multi?function(e){var t=k(e,r);return i(t)&&t.some(function(e){return s(c,e)})}:function(e){return s(c,k(e,r))}):o]},[null,null]),c=l[0],d=l[1];return c?this.where(c.name).equals(e[c.keyPath]).filter(d):r?this.filter(d):this.where(t).equals("")},e.prototype.filter=function(e){return this.toCollection().and(e)},e.prototype.count=function(e){return this.toCollection().count(e)},e.prototype.offset=function(e){return this.toCollection().offset(e)},e.prototype.limit=function(e){return this.toCollection().limit(e)},e.prototype.each=function(e){return this.toCollection().each(e)},e.prototype.toArray=function(e){return this.toCollection().toArray(e)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,i(e)?"[".concat(e.join("+"),"]"):e))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(e){var r=this,a=r.db,n=r.name;this.schema.mappedClass=e,e.prototype instanceof Ut&&(e=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),Object.defineProperty(r.prototype,"db",{get:function(){return a},enumerable:!1,configurable:!0}),r.prototype.table=function(){return n},r}(e));for(var o=new Set,s=e.prototype;s;s=c(s))Object.getOwnPropertyNames(s).forEach(function(e){return o.add(e)});var i=function(t){if(!t)return t;var r=Object.create(e.prototype);for(var a in t)if(!o.has(a))try{r[a]=t[a]}catch(n){}return r};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=i,this.hook("reading",i),e},e.prototype.defineClass=function(){function e(e){l(this,e)}return this.mapToClass(e)},e.prototype.add=function(e,t){var r=this,a=this.schema.primKey,n=a.auto,o=a.keyPath,s=e;return o&&n&&(s=Nt(o)(e)),this._trans("readwrite",function(e){return r.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[s]})}).then(function(e){return e.numFailures?Ee.reject(e.failures[0]):e.lastResult}).then(function(t){if(o)try{C(e,o,t)}catch(r){}return t})},e.prototype.update=function(e,t){if("object"!=typeof e||i(e))return this.where(":id").equals(e).modify(t);var r=k(e,this.schema.primKey.keyPath);return void 0===r?gt(new ee.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(r).modify(t)},e.prototype.put=function(e,t){var r=this,a=this.schema.primKey,n=a.auto,o=a.keyPath,s=e;return o&&n&&(s=Nt(o)(e)),this._trans("readwrite",function(e){return r.core.mutate({trans:e,type:"put",values:[s],keys:null!=t?[t]:null})}).then(function(e){return e.numFailures?Ee.reject(e.failures[0]):e.lastResult}).then(function(t){if(o)try{C(e,o,t)}catch(r){}return t})},e.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:[e]})}).then(function(e){return e.numFailures?Ee.reject(e.failures[0]):void 0})},e.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Mt})}).then(function(e){return e.numFailures?Ee.reject(e.failures[0]):void 0})},e.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(r){return t.core.getMany({keys:e,trans:r}).then(function(e){return e.map(function(e){return t.hook.reading.fire(e)})})})},e.prototype.bulkAdd=function(e,t,r){var a=this,n=Array.isArray(t)?t:void 0,o=(r=r||(n?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",function(t){var r=a.schema.primKey,s=r.auto,i=r.keyPath;if(i&&n)throw new ee.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(n&&n.length!==e.length)throw new ee.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,c=i&&s?e.map(Nt(i)):e;return a.core.mutate({trans:t,type:"add",keys:n,values:c,wantResults:o}).then(function(e){var t=e.numFailures,r=e.results,n=e.lastResult,s=e.failures;if(0===t)return o?r:n;throw new H("".concat(a.name,".bulkAdd(): ").concat(t," of ").concat(l," operations failed"),s)})})},e.prototype.bulkPut=function(e,t,r){var a=this,n=Array.isArray(t)?t:void 0,o=(r=r||(n?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",function(t){var r=a.schema.primKey,s=r.auto,i=r.keyPath;if(i&&n)throw new ee.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(n&&n.length!==e.length)throw new ee.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,c=i&&s?e.map(Nt(i)):e;return a.core.mutate({trans:t,type:"put",keys:n,values:c,wantResults:o}).then(function(e){var t=e.numFailures,r=e.results,n=e.lastResult,s=e.failures;if(0===t)return o?r:n;throw new H("".concat(a.name,".bulkPut(): ").concat(t," of ").concat(l," operations failed"),s)})})},e.prototype.bulkUpdate=function(e){var t=this,r=this.core,a=e.map(function(e){return e.key}),n=e.map(function(e){return e.changes}),o=[];return this._trans("readwrite",function(s){return r.getMany({trans:s,keys:a,cache:"clone"}).then(function(i){var l=[],c=[];e.forEach(function(e,r){var a=e.key,n=e.changes,s=i[r];if(s){for(var d=0,u=Object.keys(n);d<u.length;d++){var p=u[d],m=n[p];if(p===t.schema.primKey.keyPath){if(0!==zt(m,a))throw new ee.Constraint("Cannot update primary key in bulkUpdate()")}else C(s,p,m)}o.push(r),l.push(a),c.push(s)}});var d=l.length;return r.mutate({trans:s,type:"put",keys:l,values:c,updates:{keys:a,changeSpecs:n}}).then(function(e){var r=e.numFailures,a=e.failures;if(0===r)return d;for(var n=0,s=Object.keys(a);n<s.length;n++){var i=s[n],l=o[Number(i)];if(null!=l){var c=a[i];delete a[i],a[l]=c}}throw new H("".concat(t.name,".bulkUpdate(): ").concat(r," of ").concat(d," operations failed"),a)})})})},e.prototype.bulkDelete=function(e){var t=this,r=e.length;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:e})}).then(function(e){var a=e.numFailures,n=e.lastResult,o=e.failures;if(0===a)return n;throw new H("".concat(t.name,".bulkDelete(): ").concat(a," of ").concat(r," operations failed"),o)})},e}();function Ot(e){var t={},r=function(r,a){if(a){for(var n=arguments.length,o=new Array(n-1);--n;)o[n-1]=arguments[n];return t[r].subscribe.apply(null,o),e}if("string"==typeof r)return t[r]};r.addEventType=s;for(var a=1,n=arguments.length;a<n;++a)s(arguments[a]);return r;function s(e,a,n){if("object"==typeof e)return l(e);a||(a=ue),n||(n=ne);var o={subscribers:[],fire:n,subscribe:function(e){-1===o.subscribers.indexOf(e)&&(o.subscribers.push(e),o.fire=a(o.fire,e))},unsubscribe:function(e){o.subscribers=o.subscribers.filter(function(t){return t!==e}),o.fire=o.subscribers.reduce(a,n)}};return t[e]=r[e]=o,o}function l(e){o(e).forEach(function(t){var r=e[t];if(i(r))s(t,e[t][0],e[t][1]);else{if("asap"!==r)throw new ee.InvalidArgument("Invalid event config");var a=s(t,oe,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];a.subscribers.forEach(function(e){b(function(){e.apply(null,t)})})})}})}}function Bt(e,t){return f(t).from({prototype:e}),t}function Ft(e){return Bt(Et.prototype,function(t,r,a){this.db=e,this._tx=a,this.name=t,this.schema=r,this.hook=e._allTables[t]?e._allTables[t].hook:Ot(null,{creating:[le,ne],reading:[se,oe],updating:[de,ne],deleting:[ce,ne]})})}function qt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Rt(e,t){e.filter=St(e.filter,t)}function Lt(e,t,r){var a=e.replayFilter;e.replayFilter=a?function(){return St(a(),t())}:t,e.justLimit=r&&!a}function Kt(e,t){e.isMatch=St(e.isMatch,t)}function Yt(e,t){if(e.isPrimKey)return t.primaryKey;var r=t.getIndexByKeyPath(e.index);if(!r)throw new ee.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return r}function Gt(e,t,r){var a=Yt(e,t.schema);return t.openCursor({trans:r,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:a,range:e.range}})}function Qt(e,t,r,a){var n=e.replayFilter?St(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},s=function(e,r,a){if(!n||n(r,a,function(e){return r.stop(e)},function(e){return r.fail(e)})){var s=r.primaryKey,i=""+s;"[object ArrayBuffer]"===i&&(i=""+new Uint8Array(s)),u(o,i)||(o[i]=!0,t(e,r,a))}};return Promise.all([e.or._iterate(s,r),$t(Gt(e,a,r),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}return $t(Gt(e,a,r),St(e.algorithm,n),t,!e.keysOnly&&e.valueMapper)}function $t(e,t,r,a){var n=Xe(a?function(e,t,n){return r(a(e),t,n)}:r);return e.then(function(e){if(e)return e.start(function(){var r=function(){return e.continue()};t&&!t(e,function(e){return r=e},function(t){e.stop(t),r=ne},function(t){e.fail(t),r=ne})||n(e.value,e,function(e){return r=e}),r()})})}var Wt=function(){function e(e){this["@@propmod"]=e}return e.prototype.execute=function(e){var t,r=this["@@propmod"];if(void 0!==r.add){var n=r.add;if(i(n))return a(a([],i(e)?e:[],!0),n).sort();if("number"==typeof n)return(Number(e)||0)+n;if("bigint"==typeof n)try{return BigInt(e)+n}catch(l){return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(void 0!==r.remove){var o=r.remove;if(i(o))return i(e)?e.filter(function(e){return!o.includes(e)}).sort():[];if("number"==typeof o)return Number(e)-o;if("bigint"==typeof o)try{return BigInt(e)-o}catch(c){return BigInt(0)-o}throw new TypeError("Invalid subtrahend ".concat(o))}var s=null===(t=r.replacePrefix)||void 0===t?void 0:t[0];return s&&"string"==typeof e&&e.startsWith(s)?r.replacePrefix[1]+e.substring(s.length):e},e}(),Jt=function(){function e(){}return e.prototype._read=function(e,t){var r=this._ctx;return r.error?r.table._trans(null,gt.bind(null,r.error)):r.table._trans("readonly",e).then(t)},e.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,gt.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},e.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=St(t.algorithm,e)},e.prototype._iterate=function(e,t){return Qt(this._ctx,e,t,this._ctx.table.core)},e.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&l(r,e),t._ctx=r,t},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(e){var t=this._ctx;return this._read(function(r){return Qt(t,e,r,t.table.core)})},e.prototype.count=function(e){var t=this;return this._read(function(e){var r=t._ctx,a=r.table.core;if(qt(r,!0))return a.count({trans:e,query:{index:Yt(r,a.schema),range:r.range}}).then(function(e){return Math.min(e,r.limit)});var n=0;return Qt(r,function(){return++n,!1},e,a).then(function(){return n})}).then(e)},e.prototype.sortBy=function(e,t){var r=e.split(".").reverse(),a=r[0],n=r.length-1;function o(e,t){return t?o(e[r[t]],t-1):e[a]}var s="next"===this._ctx.dir?1:-1;function i(e,t){return zt(o(e,n),o(t,n))*s}return this.toArray(function(e){return e.sort(i)}).then(t)},e.prototype.toArray=function(e){var t=this;return this._read(function(e){var r=t._ctx;if("next"===r.dir&&qt(r,!0)&&r.limit>0){var a=r.valueMapper,n=Yt(r,r.table.core.schema);return r.table.core.query({trans:e,limit:r.limit,values:!0,query:{index:n,range:r.range}}).then(function(e){var t=e.result;return a?t.map(a):t})}var o=[];return Qt(r,function(e){return o.push(e)},e,r.table.core).then(function(){return o})},e)},e.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,qt(t)?Lt(t,function(){var t=e;return function(e,r){return 0===t||(1===t?(--t,!1):(r(function(){e.advance(t),t=0}),!1))}}):Lt(t,function(){var t=e;return function(){return--t<0}})),this},e.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Lt(this._ctx,function(){var t=e;return function(e,r,a){return--t<=0&&r(a),t>=0}},!0),this},e.prototype.until=function(e,t){return Rt(this._ctx,function(r,a,n){return!e(r.value)||(a(n),t)}),this},e.prototype.first=function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},e.prototype.last=function(e){return this.reverse().first(e)},e.prototype.filter=function(e){return Rt(this._ctx,function(t){return e(t.value)}),Kt(this._ctx,e),this},e.prototype.and=function(e){return this.filter(e)},e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},e.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,r){e(r.key,r)})},e.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},e.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,r){e(r.primaryKey,r)})},e.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.key)}).then(function(){return r}).then(e)},e.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&qt(t,!0)&&t.limit>0)return this._read(function(e){var r=Yt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:r,range:t.range}})}).then(function(e){return e.result}).then(e);t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.primaryKey)}).then(function(){return r}).then(e)},e.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},e.prototype.firstKey=function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},e.prototype.lastKey=function(e){return this.reverse().firstKey(e)},e.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var r={};return Rt(this._ctx,function(e){var t=e.primaryKey.toString(),a=u(r,t);return r[t]=!0,!a}),this},e.prototype.modify=function(e){var t=this,r=this._ctx;return this._write(function(a){var n;if("function"==typeof e)n=e;else{var s=o(e),i=s.length;n=function(t){for(var r=!1,a=0;a<i;++a){var n=s[a],o=e[n],l=k(t,n);o instanceof Wt?(C(t,n,o.execute(l)),r=!0):l!==o&&(C(t,n,o),r=!0)}return r}}var l=r.table.core,c=l.schema.primaryKey,d=c.outbound,u=c.extractKey,p=200,m=t.db._options.modifyChunkSize;m&&(p="object"==typeof m?m[l.name]||m["*"]||200:m);var h=[],f=0,g=[],y=function(e,t){var r=t.failures,a=t.numFailures;f+=e-a;for(var n=0,s=o(r);n<s.length;n++){var i=s[n];h.push(r[i])}};return t.clone().primaryKeys().then(function(t){var o=qt(r)&&r.limit===1/0&&("function"!=typeof e||e===Vt)&&{index:r.index,range:r.range},s=function(r){var i=Math.min(p,t.length-r);return l.getMany({trans:a,keys:t.slice(r,r+i),cache:"immutable"}).then(function(c){for(var m=[],h=[],f=d?[]:null,g=[],_=0;_<i;++_){var x=c[_],w={value:T(x),primKey:t[r+_]};!1!==n.call(w,w.value,w)&&(null==w.value?g.push(t[r+_]):d||0===zt(u(x),u(w.value))?(h.push(w.value),d&&f.push(t[r+_])):(g.push(t[r+_]),m.push(w.value)))}return Promise.resolve(m.length>0&&l.mutate({trans:a,type:"add",values:m}).then(function(e){for(var t in e.failures)g.splice(parseInt(t),1);y(m.length,e)})).then(function(){return(h.length>0||o&&"object"==typeof e)&&l.mutate({trans:a,type:"put",keys:f,values:h,criteria:o,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:r>0}).then(function(e){return y(h.length,e)})}).then(function(){return(g.length>0||o&&e===Vt)&&l.mutate({trans:a,type:"delete",keys:g,criteria:o,isAdditionalChunk:r>0}).then(function(e){return y(g.length,e)})}).then(function(){return t.length>r+i&&s(r+p)})})};return s(0).then(function(){if(h.length>0)throw new V("Error modifying one or more objects",h,f,g);return t.length})})})},e.prototype.delete=function(){var e=this._ctx,t=e.range;return qt(e)&&(e.isPrimKey||3===t.type)?this._write(function(r){var a=e.table.core.schema.primaryKey,n=t;return e.table.core.count({trans:r,query:{index:a,range:n}}).then(function(t){return e.table.core.mutate({trans:r,type:"deleteRange",range:n}).then(function(e){var r=e.failures;e.lastResult,e.results;var a=e.numFailures;if(a)throw new V("Could not delete some values",Object.keys(r).map(function(e){return r[e]}),t-a);return t-a})})}):this.modify(Vt)},e}(),Vt=function(e,t){return t.value=null};function Ht(e){return Bt(Jt.prototype,function(t,r){this.db=e;var a=Mt,n=null;if(r)try{a=r()}catch(l){n=l}var o=t._ctx,s=o.table,i=s.hook.reading.fire;this._ctx={table:s,index:o.index,isPrimKey:!o.index||s.schema.primKey.keyPath&&o.index===s.schema.primKey.name,range:a,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:n,or:o.or,valueMapper:i!==oe?i:null}})}function Xt(e,t){return e<t?-1:e===t?0:1}function Zt(e,t){return e>t?-1:e===t?0:1}function er(e,t,r){var a=e instanceof lr?new e.Collection(e):e;return a._ctx.error=r?new r(t):new TypeError(t),a}function tr(e){return new e.Collection(e,function(){return ir("")}).limit(0)}function rr(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function ar(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function nr(e,t,r,a,n,o){for(var s=Math.min(e.length,a.length),i=-1,l=0;l<s;++l){var c=t[l];if(c!==a[l])return n(e[l],r[l])<0?e.substr(0,l)+r[l]+r.substr(l+1):n(e[l],a[l])<0?e.substr(0,l)+a[l]+r.substr(l+1):i>=0?e.substr(0,i)+t[i]+r.substr(i+1):null;n(e[l],c)<0&&(i=l)}return s<a.length&&"next"===o?e+r.substr(e.length):s<e.length&&"prev"===o?e.substr(0,r.length):i<0?null:e.substr(0,i)+a[i]+r.substr(i+1)}function or(e,t,r,a){var n,o,s,i,l,c,d,u=r.length;if(!r.every(function(e){return"string"==typeof e}))return er(e,bt);function p(e){n=rr(e),o=ar(e),s="next"===e?Xt:Zt;var t=r.map(function(e){return{lower:o(e),upper:n(e)}}).sort(function(e,t){return s(e.lower,t.lower)});i=t.map(function(e){return e.upper}),l=t.map(function(e){return e.lower}),c=e,d="next"===e?"":a}p("next");var m=new e.Collection(e,function(){return sr(i[0],l[u-1]+a)});m._ondirectionchange=function(e){p(e)};var h=0;return m._addAlgorithm(function(e,r,a){var n=e.key;if("string"!=typeof n)return!1;var p=o(n);if(t(p,l,h))return!0;for(var m=null,f=h;f<u;++f){var g=nr(n,p,i[f],l[f],s,c);null===g&&null===m?h=f+1:(null===m||s(m,g)>0)&&(m=g)}return r(null!==m?function(){e.continue(m+d)}:a),!1}),m}function sr(e,t,r,a){return{type:2,lower:e,upper:t,lowerOpen:r,upperOpen:a}}function ir(e){return{type:1,lower:e,upper:e}}var lr=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(e,t,r,a){r=!1!==r,a=!0===a;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(r||a)&&(!r||!a)?tr(this):new this.Collection(this,function(){return sr(e,t,!r,!a)})}catch(n){return er(this,vt)}},e.prototype.equals=function(e){return null==e?er(this,vt):new this.Collection(this,function(){return ir(e)})},e.prototype.above=function(e){return null==e?er(this,vt):new this.Collection(this,function(){return sr(e,void 0,!0)})},e.prototype.aboveOrEqual=function(e){return null==e?er(this,vt):new this.Collection(this,function(){return sr(e,void 0,!1)})},e.prototype.below=function(e){return null==e?er(this,vt):new this.Collection(this,function(){return sr(void 0,e,!1,!0)})},e.prototype.belowOrEqual=function(e){return null==e?er(this,vt):new this.Collection(this,function(){return sr(void 0,e)})},e.prototype.startsWith=function(e){return"string"!=typeof e?er(this,bt):this.between(e,e+xt,!0,!0)},e.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):or(this,function(e,t){return 0===e.indexOf(t[0])},[e],xt)},e.prototype.equalsIgnoreCase=function(e){return or(this,function(e,t){return e===t[0]},[e],"")},e.prototype.anyOfIgnoreCase=function(){var e=K.apply(L,arguments);return 0===e.length?tr(this):or(this,function(e,t){return-1!==t.indexOf(e)},e,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var e=K.apply(L,arguments);return 0===e.length?tr(this):or(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,xt)},e.prototype.anyOf=function(){var e=this,t=K.apply(L,arguments),r=this._cmp;try{t.sort(r)}catch(o){return er(this,vt)}if(0===t.length)return tr(this);var a=new this.Collection(this,function(){return sr(t[0],t[t.length-1])});a._ondirectionchange=function(a){r="next"===a?e._ascending:e._descending,t.sort(r)};var n=0;return a._addAlgorithm(function(e,a,o){for(var s=e.key;r(s,t[n])>0;)if(++n===t.length)return a(o),!1;return 0===r(s,t[n])||(a(function(){e.continue(t[n])}),!1)}),a},e.prototype.notEqual=function(e){return this.inAnyRange([[wt,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var e=K.apply(L,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(r){return er(this,vt)}var t=e.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[wt,t]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(e,t){var r=this,a=this._cmp,n=this._ascending,o=this._descending,s=this._min,i=this._max;if(0===e.length)return tr(this);if(!e.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&n(e[0],e[1])<=0}))return er(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ee.InvalidArgument);var l=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers;function d(e,t){for(var r=0,n=e.length;r<n;++r){var o=e[r];if(a(t[0],o[1])<0&&a(t[1],o[0])>0){o[0]=s(o[0],t[0]),o[1]=i(o[1],t[1]);break}}return r===n&&e.push(t),e}var u,p=n;function m(e,t){return p(e[0],t[0])}try{(u=e.reduce(d,[])).sort(m)}catch(w){return er(this,vt)}var h=0,f=c?function(e){return n(e,u[h][1])>0}:function(e){return n(e,u[h][1])>=0},g=l?function(e){return o(e,u[h][0])>0}:function(e){return o(e,u[h][0])>=0};function y(e){return!f(e)&&!g(e)}var _=f,x=new this.Collection(this,function(){return sr(u[0][0],u[u.length-1][1],!l,!c)});return x._ondirectionchange=function(e){"next"===e?(_=f,p=n):(_=g,p=o),u.sort(m)},x._addAlgorithm(function(e,t,a){for(var o=e.key;_(o);)if(++h===u.length)return t(a),!1;return!!y(o)||(0===r._cmp(o,u[h][1])||0===r._cmp(o,u[h][0])||t(function(){p===n?e.continue(u[h][0]):e.continue(u[h][1])}),!1)}),x},e.prototype.startsWithAnyOf=function(){var e=K.apply(L,arguments);return e.every(function(e){return"string"==typeof e})?0===e.length?tr(this):this.inAnyRange(e.map(function(e){return[e,e+xt]})):er(this,"startsWithAnyOf() only works with strings")},e}();function cr(e){return Bt(lr.prototype,function(t,r,a){if(this.db=e,this._ctx={table:t,index:":id"===r?null:r,or:a},this._cmp=this._ascending=zt,this._descending=function(e,t){return zt(t,e)},this._max=function(e,t){return zt(e,t)>0?e:t},this._min=function(e,t){return zt(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange,!this._IDBKeyRange)throw new ee.MissingAPI})}function dr(e){return Xe(function(t){return ur(t),e(t.target.error),!1})}function ur(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var pr="storagemutated",mr="x-storagemutated-1",hr=Ot(null,pr),fr=function(){function e(){}return e.prototype._lock=function(){return v(!Pe.global),++this._reculock,1!==this._reculock||Pe.global||(Pe.lockOwnerFor=this),this},e.prototype._unlock=function(){if(v(!Pe.global),0===--this._reculock)for(Pe.global||(Pe.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{mt(e[1],e[0])}catch(t){}}return this},e.prototype._locked=function(){return this._reculock&&Pe.lockOwnerFor!==this},e.prototype.create=function(e){var t=this;if(!this.mode)return this;var r=this.db.idbdb,a=this.db._state.dbOpenError;if(v(!this.idbtrans),!e&&!r)switch(a&&a.name){case"DatabaseClosedError":throw new ee.DatabaseClosed(a);case"MissingAPIError":throw new ee.MissingAPI(a.message,a);default:throw new ee.OpenFailed(a)}if(!this.active)throw new ee.TransactionInactive;return v(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Xe(function(r){ur(r),t._reject(e.error)}),e.onabort=Xe(function(r){ur(r),t.active&&t._reject(new ee.Abort(e.error)),t.active=!1,t.on("abort").fire(r)}),e.oncomplete=Xe(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&hr.storagemutated.fire(e.mutatedParts)}),this},e.prototype._promise=function(e,t,r){var a=this;if("readwrite"===e&&"readwrite"!==this.mode)return gt(new ee.ReadOnly("Transaction is readonly"));if(!this.active)return gt(new ee.TransactionInactive);if(this._locked())return new Ee(function(n,o){a._blockedFuncs.push([function(){a._promise(e,t,r).then(n,o)},Pe])});if(r)return ot(function(){var e=new Ee(function(e,r){a._lock();var n=t(e,r,a);n&&n.then&&n.then(e,r)});return e.finally(function(){return a._unlock()}),e._lib=!0,e});var n=new Ee(function(e,r){var n=t(e,r,a);n&&n.then&&n.then(e,r)});return n._lib=!0,n},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(e){var t=this._root(),r=Ee.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then(function(){return r});else{t._waitingFor=r,t._waitingQueue=[];var a=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(a.get(-1/0).onsuccess=e)}()}var n=t._waitingFor;return new Ee(function(e,a){r.then(function(r){return t._waitingQueue.push(Xe(e.bind(null,r)))},function(e){return t._waitingQueue.push(Xe(a.bind(null,e)))}).finally(function(){t._waitingFor===n&&(t._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ee.Abort))},e.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(u(t,e))return t[e];var r=this.schema[e];if(!r)throw new ee.NotFound("Table "+e+" not part of transaction");var a=new this.db.Table(e,r,this);return a.core=this.db.core.table(e),t[e]=a,a},e}();function gr(e){return Bt(fr.prototype,function(t,r,a,n,o){var s=this;this.db=e,this.mode=t,this.storeNames=r,this.schema=a,this.chromeTransactionDurability=n,this.idbtrans=null,this.on=Ot(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ee(function(e,t){s._resolve=e,s._reject=t}),this._completion.then(function(){s.active=!1,s.on.complete.fire()},function(e){var t=s.active;return s.active=!1,s.on.error.fire(e),s.parent?s.parent._reject(e):t&&s.idbtrans&&s.idbtrans.abort(),gt(e)})})}function yr(e,t,r,a,n,o,s){return{name:e,keyPath:t,unique:r,multi:a,auto:n,compound:o,src:(r&&!s?"&":"")+(a?"*":"")+(n?"++":"")+_r(t)}}function _r(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function xr(e,t,r){return{name:e,primKey:t,indexes:r,mappedClass:null,idxByName:j(r,function(e){return[e.name,e]})}}function wr(e){return 1===e.length?e[0]:e}var vr=function(e){try{return e.only([[]]),vr=function(){return[[]]},[[]]}catch(t){return vr=function(){return xt},xt}};function br(e){return null==e?function(){}:"string"==typeof e?jr(e):function(t){return k(t,e)}}function jr(e){return 1===e.split(".").length?function(t){return t[e]}:function(t){return k(t,e)}}function kr(e){return[].slice.call(e)}var Cr=0;function Dr(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function Sr(e,t,r){function a(e,t){var r=kr(e.objectStoreNames);return{schema:{name:e.name,tables:r.map(function(e){return t.objectStore(e)}).map(function(e){var t=e.keyPath,r=e.autoIncrement,a=i(t),n=null==t,o={},s={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:n,compound:a,keyPath:t,autoIncrement:r,unique:!0,extractKey:br(t)},indexes:kr(e.indexNames).map(function(t){return e.index(t)}).map(function(e){var t=e.name,r=e.unique,a=e.multiEntry,n=e.keyPath,s={name:t,compound:i(n),keyPath:n,unique:r,multiEntry:a,extractKey:br(n)};return o[Dr(n)]=s,s}),getIndexByKeyPath:function(e){return o[Dr(e)]}};return o[":id"]=s.primaryKey,null!=t&&(o[Dr(t)]=s.primaryKey),s})},hasGetAll:r.length>0&&"getAll"in t.objectStore(r[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function n(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var r=e.lower,a=e.upper,n=e.lowerOpen,o=e.upperOpen;return void 0===r?void 0===a?null:t.upperBound(a,!!o):void 0===a?t.lowerBound(r,!!n):t.bound(r,a,!!n,!!o)}function o(e){var t=e.name;function r(e){var r=e.trans,a=e.type,o=e.keys,s=e.values,i=e.range;return new Promise(function(e,l){e=Xe(e);var c=r.objectStore(t),d=null==c.keyPath,u="put"===a||"add"===a;if(!u&&"delete"!==a&&"deleteRange"!==a)throw new Error("Invalid operation type: "+a);var p,m=(o||s||{length:1}).length;if(o&&s&&o.length!==s.length)throw new Error("Given keys array must have same length as given values array.");if(0===m)return e({numFailures:0,failures:{},results:[],lastResult:void 0});var h=[],f=[],g=0,y=function(e){++g,ur(e)};if("deleteRange"===a){if(4===i.type)return e({numFailures:g,failures:f,results:[],lastResult:void 0});3===i.type?h.push(p=c.clear()):h.push(p=c.delete(n(i)))}else{var _=u?d?[s,o]:[s,null]:[o,null],x=_[0],w=_[1];if(u)for(var v=0;v<m;++v)h.push(p=w&&void 0!==w[v]?c[a](x[v],w[v]):c[a](x[v])),p.onerror=y;else for(v=0;v<m;++v)h.push(p=c[a](x[v])),p.onerror=y}var b=function(t){var r=t.target.result;h.forEach(function(e,t){return null!=e.error&&(f[t]=e.error)}),e({numFailures:g,failures:f,results:"delete"===a?o:h.map(function(e){return e.result}),lastResult:r})};p.onerror=function(e){y(e),b(e)},p.onsuccess=b})}function a(e){var r=e.trans,a=e.values,o=e.query,s=e.reverse,i=e.unique;return new Promise(function(e,l){e=Xe(e);var c=o.index,d=o.range,u=r.objectStore(t),p=c.isPrimaryKey?u:u.index(c.name),m=s?i?"prevunique":"prev":i?"nextunique":"next",h=a||!("openKeyCursor"in p)?p.openCursor(n(d),m):p.openKeyCursor(n(d),m);h.onerror=dr(l),h.onsuccess=Xe(function(t){var a=h.result;if(a){a.___id=++Cr,a.done=!1;var n=a.continue.bind(a),o=a.continuePrimaryKey;o&&(o=o.bind(a));var s=a.advance.bind(a),i=function(){throw new Error("Cursor not started")},c=function(){throw new Error("Cursor not stopped")};a.trans=r,a.stop=a.continue=a.continuePrimaryKey=a.advance=i,a.fail=Xe(l),a.next=function(){var e=this,t=1;return this.start(function(){return t--?e.continue():e.stop()}).then(function(){return e})},a.start=function(e){var t=new Promise(function(e,t){e=Xe(e),h.onerror=dr(t),a.fail=t,a.stop=function(t){a.stop=a.continue=a.continuePrimaryKey=a.advance=c,e(t)}}),r=function(){if(h.result)try{e()}catch(t){a.fail(t)}else a.done=!0,a.start=function(){throw new Error("Cursor behind last entry")},a.stop()};return h.onsuccess=Xe(function(e){h.onsuccess=r,r()}),a.continue=n,a.continuePrimaryKey=o,a.advance=s,r(),t},e(a)}else e(null)},l)})}function o(e){return function(r){return new Promise(function(a,o){a=Xe(a);var s=r.trans,i=r.values,l=r.limit,c=r.query,d=l===1/0?void 0:l,u=c.index,p=c.range,m=s.objectStore(t),h=u.isPrimaryKey?m:m.index(u.name),f=n(p);if(0===l)return a({result:[]});if(e){var g=i?h.getAll(f,d):h.getAllKeys(f,d);g.onsuccess=function(e){return a({result:e.target.result})},g.onerror=dr(o)}else{var y=0,_=i||!("openKeyCursor"in h)?h.openCursor(f):h.openKeyCursor(f),x=[];_.onsuccess=function(e){var t=_.result;return t?(x.push(i?t.value:t.primaryKey),++y===l?a({result:x}):void t.continue()):a({result:x})},_.onerror=dr(o)}})}}return{name:t,schema:e,mutate:r,getMany:function(e){var r=e.trans,a=e.keys;return new Promise(function(e,n){e=Xe(e);for(var o,s=r.objectStore(t),i=a.length,l=new Array(i),c=0,d=0,u=function(t){var r=t.target;l[r._pos]=r.result,++d===c&&e(l)},p=dr(n),m=0;m<i;++m)null!=a[m]&&((o=s.get(a[m]))._pos=m,o.onsuccess=u,o.onerror=p,++c);0===c&&e(l)})},get:function(e){var r=e.trans,a=e.key;return new Promise(function(e,n){e=Xe(e);var o=r.objectStore(t).get(a);o.onsuccess=function(t){return e(t.target.result)},o.onerror=dr(n)})},query:o(c),openCursor:a,count:function(e){var r=e.query,a=e.trans,o=r.index,s=r.range;return new Promise(function(e,r){var i=a.objectStore(t),l=o.isPrimaryKey?i:i.index(o.name),c=n(s),d=c?l.count(c):l.count();d.onsuccess=Xe(function(t){return e(t.target.result)}),d.onerror=dr(r)})}}}var s=a(e,r),l=s.schema,c=s.hasGetAll,d=l.tables.map(function(e){return o(e)}),u={};return d.forEach(function(e){return u[e.name]=e}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!u[e])throw new Error("Table '".concat(e,"' not found"));return u[e]},MIN_KEY:-1/0,MAX_KEY:vr(t),schema:l}}function Mr(e,t){return t.reduce(function(e,t){var a=t.create;return r(r({},e),a(e))},e)}function Nr(e,t,r,a){var n=r.IDBKeyRange;return r.indexedDB,{dbcore:Mr(Sr(t,n,a),e.dbcore)}}function Ur(e,t){var r=t.db,a=Nr(e._middlewares,r,e._deps,t);e.core=a.dbcore,e.tables.forEach(function(t){var r=t.name;e.core.schema.tables.some(function(e){return e.name===r})&&(t.core=e.core.table(r),e[r]instanceof e.Table&&(e[r].core=t.core))})}function zr(e,t,r,a){r.forEach(function(r){var n=a[r];t.forEach(function(t){var a=y(t,r);(!a||"value"in a&&void 0===a.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?h(t,r,{get:function(){return this.table(r)},set:function(e){m(this,r,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[r]=new e.Table(r,n))})})}function Pr(e,t){t.forEach(function(t){for(var r in t)t[r]instanceof e.Table&&delete t[r]})}function Ar(e,t){return e._cfg.version-t._cfg.version}function Ir(e,t,r,a){var n=e._dbSchema;r.objectStoreNames.contains("$meta")&&!n.$meta&&(n.$meta=xr("$meta",$r("")[0],[]),e._storeNames.push("$meta"));var s=e._createTransaction("readwrite",e._storeNames,n);s.create(r),s._completion.catch(a);var i=s._reject.bind(s),l=Pe.transless||Pe;ot(function(){if(Pe.trans=s,Pe.transless=l,0!==t)return Ur(e,r),Er(e,s,t).then(function(t){return Or(e,t,s,r)}).catch(i);o(n).forEach(function(e){Fr(r,e,n[e].primKey,n[e].indexes)}),Ur(e,r),Ee.follow(function(){return e.on.populate.fire(s)}).catch(i)})}function Tr(e,t){qr(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var r=Kr(e,e.idbdb,t);Qr(e,e._dbSchema,t);for(var a=function(e){if(e.change.length||e.recreate)return console.warn("Unable to patch indexes of table ".concat(e.name," because it has changes on the type of index or primary key.")),{value:void 0};var r=t.objectStore(e.name);e.add.forEach(function(t){me&&"Dexie upgrade patch: Creating missing index ".concat(e.name,".").concat(t.src),Lr(r,t)})},n=0,o=Br(r,e._dbSchema).change;n<o.length;n++){var s=a(o[n]);if("object"==typeof s)return s.value}}function Er(e,t,r){return t.storeNames.includes("$meta")?t.table("$meta").get("version").then(function(e){return null!=e?e:r}):Ee.resolve(r)}function Or(e,t,r,a){var n=[],s=e._versions,i=e._dbSchema=Kr(e,e.idbdb,a),l=s.filter(function(e){return e._cfg.version>=t});if(0===l.length)return Ee.resolve();function c(){return n.length?Ee.resolve(n.shift()(r.idbtrans)).then(c):Ee.resolve()}return l.forEach(function(s){n.push(function(){var n=i,l=s._cfg.dbschema;Qr(e,n,a),Qr(e,l,a),i=e._dbSchema=l;var c=Br(n,l);c.add.forEach(function(e){Fr(a,e[0],e[1].primKey,e[1].indexes)}),c.change.forEach(function(e){if(e.recreate)throw new ee.Upgrade("Not yet support for changing primary key");var t=a.objectStore(e.name);e.add.forEach(function(e){return Lr(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),Lr(t,e)}),e.del.forEach(function(e){return t.deleteIndex(e)})});var d=s._cfg.contentUpgrade;if(d&&s._cfg.version>t){Ur(e,a),r._memoizedTables={};var u=S(l);c.del.forEach(function(e){u[e]=n[e]}),Pr(e,[e.Transaction.prototype]),zr(e,[e.Transaction.prototype],o(u),u),r.schema=u;var p,m=Y(d);m&&st();var h=Ee.follow(function(){if((p=d(r))&&m){var e=it.bind(null,null);p.then(e,e)}});return p&&"function"==typeof p.then?Ee.resolve(p):h.then(function(){return p})}}),n.push(function(t){Rr(s._cfg.dbschema,t),Pr(e,[e.Transaction.prototype]),zr(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),r.schema=e._dbSchema}),n.push(function(t){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===s._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter(function(e){return"$meta"!==e})):t.objectStore("$meta").put(s._cfg.version,"version"))})}),c().then(function(){qr(i,a)})}function Br(e,t){var r,a={del:[],add:[],change:[]};for(r in e)t[r]||a.del.push(r);for(r in t){var n=e[r],o=t[r];if(n){var s={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(n.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||n.primKey.auto!==o.primKey.auto)s.recreate=!0,a.change.push(s);else{var i=n.idxByName,l=o.idxByName,c=void 0;for(c in i)l[c]||s.del.push(c);for(c in l){var d=i[c],u=l[c];d?d.src!==u.src&&s.change.push(u):s.add.push(u)}(s.del.length>0||s.add.length>0||s.change.length>0)&&a.change.push(s)}}else a.add.push([r,o])}return a}function Fr(e,t,r,a){var n=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return a.forEach(function(e){return Lr(n,e)}),n}function qr(e,t){o(e).forEach(function(r){t.db.objectStoreNames.contains(r)||Fr(t,r,e[r].primKey,e[r].indexes)})}function Rr(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(r){return null==e[r]&&t.db.deleteObjectStore(r)})}function Lr(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Kr(e,t,r){var a={};return x(t.objectStoreNames,0).forEach(function(e){for(var t=r.objectStore(e),n=t.keyPath,o=yr(_r(n),n||"",!0,!1,!!t.autoIncrement,n&&"string"!=typeof n,!0),s=[],i=0;i<t.indexNames.length;++i){var l=t.index(t.indexNames[i]);n=l.keyPath;var c=yr(l.name,n,!!l.unique,!!l.multiEntry,!1,n&&"string"!=typeof n,!1);s.push(c)}a[e]=xr(e,o,s)}),a}function Yr(e,t,r){e.verno=t.version/10;var a=e._dbSchema=Kr(e,t,r);e._storeNames=x(t.objectStoreNames,0),zr(e,[e._allTables],o(a),a)}function Gr(e,t){var r=Br(Kr(e,e.idbdb,t),e._dbSchema);return!(r.add.length||r.change.some(function(e){return e.add.length||e.change.length}))}function Qr(e,t,r){for(var a=r.db.objectStoreNames,o=0;o<a.length;++o){var s=a[o],i=r.objectStore(s);e._hasGetAll="getAll"in i;for(var l=0;l<i.indexNames.length;++l){var c=i.indexNames[l],d=i.index(c).keyPath,u="string"==typeof d?d:"["+x(d).join("+")+"]";if(t[s]){var p=t[s].idxByName[u];p&&(p.name=c,delete t[s].idxByName[u],t[s].idxByName[c]=p)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&n.WorkerGlobalScope&&n instanceof n.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function $r(e){return e.split(",").map(function(e,t){var r=(e=e.trim()).replace(/([&*]|\+\+)/g,""),a=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return yr(r,a||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),i(a),0===t)})}var Wr,Jr=function(){function e(){}return e.prototype._parseStoresSpec=function(e,t){o(e).forEach(function(r){if(null!==e[r]){var a=$r(e[r]),n=a.shift();if(n.unique=!0,n.multi)throw new ee.Schema("Primary key cannot be multi-valued");a.forEach(function(e){if(e.auto)throw new ee.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new ee.Schema("Index must have a name and cannot be an empty string")}),t[r]=xr(r,n,a)}})},e.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,e):e;var r=t._versions,a={},n={};return r.forEach(function(e){l(a,e._cfg.storesSource),n=e._cfg.dbschema={},e._parseStoresSpec(a,n)}),t._dbSchema=n,Pr(t,[t._allTables,t,t.Transaction.prototype]),zr(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],o(n),n),t._storeNames=o(n),this},e.prototype.upgrade=function(e){return this._cfg.contentUpgrade=pe(this._cfg.contentUpgrade||ne,e),this},e}();function Vr(e){return Bt(Jr.prototype,function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Hr(e,t){var r=e._dbNamesDB;return r||(r=e._dbNamesDB=new Xa(kt,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),r.table("dbnames")}function Xr(e){return e&&"function"==typeof e.databases}function Zr(e){var t=e.indexedDB,r=e.IDBKeyRange;return Xr(t)?Promise.resolve(t.databases()).then(function(e){return e.map(function(e){return e.name}).filter(function(e){return e!==kt})}):Hr(t,r).toCollection().primaryKeys()}function ea(e,t){var r=e.indexedDB,a=e.IDBKeyRange;!Xr(r)&&t!==kt&&Hr(r,a).put({name:t}).catch(ne)}function ta(e,t){var r=e.indexedDB,a=e.IDBKeyRange;!Xr(r)&&t!==kt&&Hr(r,a).delete(t).catch(ne)}function ra(e){return ot(function(){return Pe.letThrough=!0,e()})}function aa(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var r=function(){return indexedDB.databases().finally(t)};e=setInterval(r,100),r()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function na(e){return!("from"in e)}var oa=function(e,t){if(!this){var r=new oa;return e&&"d"in e&&l(r,e),r}l(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function sa(e,t,r){var a=zt(t,r);if(!isNaN(a)){if(a>0)throw RangeError();if(na(e))return l(e,{from:t,to:r,d:1});var n=e.l,o=e.r;if(zt(r,e.from)<0)return n?sa(n,t,r):e.l={from:t,to:r,d:1,l:null,r:null},da(e);if(zt(t,e.to)>0)return o?sa(o,t,r):e.r={from:t,to:r,d:1,l:null,r:null},da(e);zt(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),zt(r,e.to)>0&&(e.to=r,e.r=null,e.d=e.l?e.l.d+1:1);var s=!e.r;n&&!e.l&&ia(e,n),o&&s&&ia(e,o)}}function ia(e,t){function r(e,t){var a=t.from,n=t.to,o=t.l,s=t.r;sa(e,a,n),o&&r(e,o),s&&r(e,s)}na(t)||r(e,t)}function la(e,t){var r=ca(t),a=r.next();if(a.done)return!1;for(var n=a.value,o=ca(e),s=o.next(n.from),i=s.value;!a.done&&!s.done;){if(zt(i.from,n.to)<=0&&zt(i.to,n.from)>=0)return!0;zt(n.from,i.from)<0?n=(a=r.next(i.from)).value:i=(s=o.next(n.from)).value}return!1}function ca(e){var t=na(e)?null:{s:0,n:e};return{next:function(e){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&zt(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||zt(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function da(e){var t,a,n=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(a=e.l)||void 0===a?void 0:a.d)||0),o=n>1?"r":n<-1?"l":"";if(o){var s="r"===o?"l":"r",i=r({},e),l=e[o];e.from=l.from,e.to=l.to,e[o]=l[o],i[o]=l[s],e[s]=i,i.d=ua(i)}e.d=ua(e)}function ua(e){var t=e.r,r=e.l;return(t?r?Math.max(t.d,r.d):t.d:r?r.d:0)+1}function pa(e,t){return o(t).forEach(function(r){e[r]?ia(e[r],t[r]):e[r]=P(t[r])}),e}function ma(e,t){return e.all||t.all||Object.keys(e).some(function(r){return t[r]&&la(t[r],e[r])})}p(oa.prototype,((Wr={add:function(e){return ia(this,e),this},addKey:function(e){return sa(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(e){return sa(t,e,e)}),this},hasKey:function(e){var t=ca(this).next(e).value;return t&&zt(t.from,e)<=0&&zt(t.to,e)>=0}})[F]=function(){return ca(this)},Wr));var ha={},fa={},ga=!1;function ya(e,t){pa(fa,e),ga||(ga=!0,setTimeout(function(){ga=!1;var e=fa;fa={},_a(e,!1)},0))}function _a(e,t){void 0===t&&(t=!1);var r=new Set;if(e.all)for(var a=0,n=Object.values(ha);a<n.length;a++)xa(i=n[a],e,r,t);else for(var o in e){var s=/^idb\:\/\/(.*)\/(.*)\//.exec(o);if(s){var i,l=s[1],c=s[2];(i=ha["idb://".concat(l,"/").concat(c)])&&xa(i,e,r,t)}}r.forEach(function(e){return e()})}function xa(e,t,r,a){for(var n=[],o=0,s=Object.entries(e.queries.query);o<s.length;o++){for(var i=s[o],l=i[0],c=[],d=0,u=i[1];d<u.length;d++){var p=u[d];ma(t,p.obsSet)?p.subscribers.forEach(function(e){return r.add(e)}):a&&c.push(p)}a&&n.push([l,c])}if(a)for(var m=0,h=n;m<h.length;m++){var f=h[m];l=f[0],c=f[1],e.queries.query[l]=c}}function wa(e){var t=e._state,r=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?gt(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var a=t.openCanceller,n=Math.round(10*e.verno),o=!1;function s(){if(t.openCanceller!==a)throw new ee.DatabaseClosed("db.open() was cancelled")}var i=t.dbReadyResolve,l=null,c=!1,d=function(){return new Ee(function(a,i){if(s(),!r)throw new ee.MissingAPI;var u=e.name,p=t.autoSchema||!n?r.open(u):r.open(u,n);if(!p)throw new ee.MissingAPI;p.onerror=dr(i),p.onblocked=Xe(e._fireOnBlocked),p.onupgradeneeded=Xe(function(a){if(l=p.transaction,t.autoSchema&&!e._options.allowEmptyDB){p.onerror=ur,l.abort(),p.result.close();var n=r.deleteDatabase(u);n.onsuccess=n.onerror=Xe(function(){i(new ee.NoSuchDatabase("Database ".concat(u," doesnt exist")))})}else{l.onerror=dr(i);var s=a.oldVersion>Math.pow(2,62)?0:a.oldVersion;c=s<1,e.idbdb=p.result,o&&Tr(e,l),Ir(e,s/10,l,i)}},i),p.onsuccess=Xe(function(){l=null;var r=e.idbdb=p.result,s=x(r.objectStoreNames);if(s.length>0)try{var i=r.transaction(wr(s),"readonly");if(t.autoSchema)Yr(e,r,i);else if(Qr(e,e._dbSchema,i),!Gr(e,i)&&!o)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),r.close(),n=r.version+1,o=!0,a(d());Ur(e,i)}catch(m){}jt.push(e),r.onversionchange=Xe(function(r){t.vcFired=!0,e.on("versionchange").fire(r)}),r.onclose=Xe(function(t){e.on("close").fire(t)}),c&&ea(e._deps,u),a()},i)}).catch(function(e){switch(null==e?void 0:e.name){case"UnknownError":if(t.PR1398_maxLoop>0)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),d();break;case"VersionError":if(n>0)return n=0,d()}return Ee.reject(e)})};return Ee.race([a,("undefined"==typeof navigator?Ee.resolve():aa()).then(d)]).then(function(){return s(),t.onReadyBeingFired=[],Ee.resolve(ra(function(){return e.on.ready.fire(e.vip)})).then(function r(){if(t.onReadyBeingFired.length>0){var a=t.onReadyBeingFired.reduce(pe,ne);return t.onReadyBeingFired=[],Ee.resolve(ra(function(){return a(e.vip)})).then(r)}})}).finally(function(){t.openCanceller===a&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(r){t.dbOpenError=r;try{l&&l.abort()}catch(n){}return a===t.openCanceller&&e._close(),gt(r)}).finally(function(){t.openComplete=!0,i()}).then(function(){if(c){var t={};e.tables.forEach(function(r){r.schema.indexes.forEach(function(a){a.name&&(t["idb://".concat(e.name,"/").concat(r.name,"/").concat(a.name)]=new oa(-1/0,[[[]]]))}),t["idb://".concat(e.name,"/").concat(r.name,"/")]=t["idb://".concat(e.name,"/").concat(r.name,"/:dels")]=new oa(-1/0,[[[]]])}),hr(pr).fire(t),_a(t,!0)}return e})}function va(e){var t=function(t){return e.next(t)},r=function(t){return e.throw(t)},a=o(t),n=o(r);function o(e){return function(t){var r=e(t),o=r.value;return r.done?o:o&&"function"==typeof o.then?o.then(a,n):i(o)?Promise.all(o).then(a,n):a(o)}}return o(t)()}function ba(e,t,r){var a=arguments.length;if(a<2)throw new ee.InvalidArgument("Too few arguments");for(var n=new Array(a-1);--a;)n[a-1]=arguments[a];return r=n.pop(),[e,N(n),r]}function ja(e,t,r,a,n){return Ee.resolve().then(function(){var o=Pe.transless||Pe,s=e._createTransaction(t,r,e._dbSchema,a);s.explicit=!0;var i={trans:s,transless:o};if(a)s.idbtrans=a.idbtrans;else try{s.create(),s.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(u){return u.name===X.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return ja(e,t,r,null,n)})):gt(u)}var l,c=Y(n);c&&st();var d=Ee.follow(function(){if(l=n.call(s,s))if(c){var e=it.bind(null,null);l.then(e,e)}else"function"==typeof l.next&&"function"==typeof l.throw&&(l=va(l))},i);return(l&&"function"==typeof l.then?Ee.resolve(l).then(function(e){return s.active?e:gt(new ee.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):d.then(function(){return l})).then(function(e){return a&&s._resolve(),s._completion.then(function(){return e})}).catch(function(e){return s._reject(e),gt(e)})})}function ka(e,t,r){for(var a=i(e)?e.slice():[e],n=0;n<r;++n)a.push(t);return a}function Ca(e){return r(r({},e),{table:function(t){var a=e.table(t),n=a.schema,o={},s=[];function i(e,t,a){var n=Dr(e),l=o[n]=o[n]||[],c=null==e?0:"string"==typeof e?1:e.length,d=t>0,u=r(r({},a),{name:d?"".concat(n,"(virtual-from:").concat(a.name,")"):a.name,lowLevelIndex:a,isVirtual:d,keyTail:t,keyLength:c,extractKey:br(e),unique:!d&&a.unique});return l.push(u),u.isPrimaryKey||s.push(u),c>1&&i(2===c?e[0]:e.slice(0,c-1),t+1,a),l.sort(function(e,t){return e.keyTail-t.keyTail}),u}var l=i(n.primaryKey.keyPath,0,n.primaryKey);o[":id"]=[l];for(var c=0,d=n.indexes;c<d.length;c++){var u=d[c];i(u.keyPath,0,u)}function p(e){var t=o[Dr(e)];return t&&t[0]}function m(t,r){return{type:1===t.type?2:t.type,lower:ka(t.lower,t.lowerOpen?e.MAX_KEY:e.MIN_KEY,r),lowerOpen:!0,upper:ka(t.upper,t.upperOpen?e.MIN_KEY:e.MAX_KEY,r),upperOpen:!0}}function h(e){var t=e.query.index;return t.isVirtual?r(r({},e),{query:{index:t.lowLevelIndex,range:m(e.query.range,t.keyTail)}}):e}return r(r({},a),{schema:r(r({},n),{primaryKey:l,indexes:s,getIndexByKeyPath:p}),count:function(e){return a.count(h(e))},query:function(e){return a.query(h(e))},openCursor:function(t){var r=t.query.index,n=r.keyTail,o=r.isVirtual,s=r.keyLength;if(!o)return a.openCursor(t);function i(r){function a(a){null!=a?r.continue(ka(a,t.reverse?e.MAX_KEY:e.MIN_KEY,n)):t.unique?r.continue(r.key.slice(0,s).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,n)):r.continue()}return Object.create(r,{continue:{value:a},continuePrimaryKey:{value:function(t,a){r.continuePrimaryKey(ka(t,e.MAX_KEY,n),a)}},primaryKey:{get:function(){return r.primaryKey}},key:{get:function(){var e=r.key;return 1===s?e[0]:e.slice(0,s)}},value:{get:function(){return r.value}}})}return a.openCursor(h(t)).then(function(e){return e&&i(e)})}})}})}var Da={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Ca};function Sa(e,t,r,a){return r=r||{},a=a||"",o(e).forEach(function(n){if(u(t,n)){var o=e[n],s=t[n];if("object"==typeof o&&"object"==typeof s&&o&&s){var i=B(o);i!==B(s)?r[a+n]=t[n]:"Object"===i?Sa(o,s,r,a+n+"."):o!==s&&(r[a+n]=t[n])}else o!==s&&(r[a+n]=t[n])}else r[a+n]=void 0}),o(t).forEach(function(n){u(e,n)||(r[a+n]=t[n])}),r}function Ma(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var Na={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return r(r({},e),{table:function(t){var n=e.table(t),o=n.schema.primaryKey;return r(r({},n),{mutate:function(e){var s=Pe.trans,i=s.table(t).hook,l=i.deleting,c=i.creating,d=i.updating;switch(e.type){case"add":if(c.fire===ne)break;return s._promise("readwrite",function(){return p(e)},!0);case"put":if(c.fire===ne&&d.fire===ne)break;return s._promise("readwrite",function(){return p(e)},!0);case"delete":if(l.fire===ne)break;return s._promise("readwrite",function(){return p(e)},!0);case"deleteRange":if(l.fire===ne)break;return s._promise("readwrite",function(){return m(e)},!0)}return n.mutate(e);function p(e){var t=Pe.trans,s=e.keys||Ma(o,e);if(!s)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?r(r({},e),{keys:s}):r({},e)).type&&(e.values=a([],e.values)),e.keys&&(e.keys=a([],e.keys)),Ua(n,e,s).then(function(r){var a=s.map(function(a,n){var s=r[n],i={onerror:null,onsuccess:null};if("delete"===e.type)l.fire.call(i,a,s,t);else if("add"===e.type||void 0===s){var p=c.fire.call(i,a,e.values[n],t);null==a&&null!=p&&(a=p,e.keys[n]=a,o.outbound||C(e.values[n],o.keyPath,a))}else{var m=Sa(s,e.values[n]),h=d.fire.call(i,m,a,s,t);if(h){var f=e.values[n];Object.keys(h).forEach(function(e){u(f,e)?f[e]=h[e]:C(f,e,h[e])})}}return i});return n.mutate(e).then(function(t){for(var n=t.failures,o=t.results,i=t.numFailures,l=t.lastResult,c=0;c<s.length;++c){var d=o?o[c]:s[c],u=a[c];null==d?u.onerror&&u.onerror(n[c]):u.onsuccess&&u.onsuccess("put"===e.type&&r[c]?e.values[c]:d)}return{failures:n,results:o,numFailures:i,lastResult:l}}).catch(function(e){return a.forEach(function(t){return t.onerror&&t.onerror(e)}),Promise.reject(e)})})}function m(e){return h(e.trans,e.range,1e4)}function h(e,t,a){return n.query({trans:e,values:!1,query:{index:o,range:t},limit:a}).then(function(n){var o=n.result;return p({type:"delete",keys:o,trans:e}).then(function(n){return n.numFailures>0?Promise.reject(n.failures[0]):o.length<a?{failures:[],numFailures:0,lastResult:void 0}:h(e,r(r({},t),{lower:o[o.length-1],lowerOpen:!0}),a)})})}}})}})}};function Ua(e,t,r){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:r,cache:"immutable"})}function za(e,t,r){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var a=[],n=0,o=0;n<t.keys.length&&o<e.length;++n)0===zt(t.keys[n],e[o])&&(a.push(r?T(t.values[n]):t.values[n]),++o);return a.length===e.length?a:null}catch(s){return null}}var Pa={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var a=e.table(t);return r(r({},a),{getMany:function(e){if(!e.cache)return a.getMany(e);var t=za(e.keys,e.trans._cache,"clone"===e.cache);return t?Ee.resolve(t):a.getMany(e).then(function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?T(t):t},t})},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),a.mutate(e)}})}}}};function Aa(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function Ia(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Ta={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,a=new oa(e.MIN_KEY,e.MAX_KEY);return r(r({},e),{transaction:function(t,r,a){if(Pe.subscr&&"readonly"!==r)throw new ee.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Pe.querier));return e.transaction(t,r,a)},table:function(n){var s=e.table(n),l=s.schema,c=l.primaryKey,d=l.indexes,u=c.extractKey,p=c.outbound,m=c.autoIncrement&&d.filter(function(e){return e.compound&&e.keyPath.includes(c.keyPath)}),h=r(r({},s),{mutate:function(r){var o,d,u=r.trans,p=r.mutatedParts||(r.mutatedParts={}),h=function(e){var r="idb://".concat(t,"/").concat(n,"/").concat(e);return p[r]||(p[r]=new oa)},f=h(""),g=h(":dels"),y=r.type,_="deleteRange"===r.type?[r.range]:"delete"===r.type?[r.keys]:r.values.length<50?[Ma(c,r).filter(function(e){return e}),r.values]:[],x=_[0],w=_[1],v=r.trans._cache;if(i(x)){f.addKeys(x);var b="delete"===y||x.length===w.length?za(x,v):null;b||g.addKeys(x),(b||w)&&Ea(h,l,b,w)}else if(x){var j={from:null!==(o=x.lower)&&void 0!==o?o:e.MIN_KEY,to:null!==(d=x.upper)&&void 0!==d?d:e.MAX_KEY};g.add(j),f.add(j)}else f.add(a),g.add(a),l.indexes.forEach(function(e){return h(e.name).add(a)});return s.mutate(r).then(function(e){return!x||"add"!==r.type&&"put"!==r.type||(f.addKeys(e.results),m&&m.forEach(function(t){for(var a=r.values.map(function(e){return t.extractKey(e)}),n=t.keyPath.findIndex(function(e){return e===c.keyPath}),o=0,s=e.results.length;o<s;++o)a[o][n]=e.results[o];h(t.name).addKeys(a)})),u.mutatedParts=pa(u.mutatedParts||{},p),e})}}),f=function(t){var r,a,n=t.query,o=n.index,s=n.range;return[o,new oa(null!==(r=s.lower)&&void 0!==r?r:e.MIN_KEY,null!==(a=s.upper)&&void 0!==a?a:e.MAX_KEY)]},g={get:function(e){return[c,new oa(e.key)]},getMany:function(e){return[c,(new oa).addKeys(e.keys)]},count:f,query:f,openCursor:f};return o(g).forEach(function(e){h[e]=function(o){var i=Pe.subscr,l=!!i,c=Aa(Pe,s)&&Ia(e,o)?o.obsSet={}:i;if(l){var d=function(e){var r="idb://".concat(t,"/").concat(n,"/").concat(e);return c[r]||(c[r]=new oa)},m=d(""),h=d(":dels"),f=g[e](o),y=f[0],_=f[1];if("query"===e&&y.isPrimaryKey&&!o.values?h.add(_):d(y.name||"").add(_),!y.isPrimaryKey){if("count"!==e){var x="query"===e&&p&&o.values&&s.query(r(r({},o),{values:!1}));return s[e].apply(this,arguments).then(function(t){if("query"===e){if(p&&o.values)return x.then(function(e){var r=e.result;return m.addKeys(r),t});var r=o.values?t.result.map(u):t.result;o.values?m.addKeys(r):h.addKeys(r)}else if("openCursor"===e){var a=t,n=o.values;return a&&Object.create(a,{key:{get:function(){return h.addKey(a.primaryKey),a.key}},primaryKey:{get:function(){var e=a.primaryKey;return h.addKey(e),e}},value:{get:function(){return n&&m.addKey(a.primaryKey),a.value}}})}return t})}h.add(a)}}return s[e].apply(this,arguments)}}),h}})}};function Ea(e,t,r,a){function n(t){var n=e(t.name||"");function o(e){return null!=e?t.extractKey(e):null}var s=function(e){return t.multiEntry&&i(e)?e.forEach(function(e){return n.addKey(e)}):n.addKey(e)};(r||a).forEach(function(e,t){var n=r&&o(r[t]),i=a&&o(a[t]);0!==zt(n,i)&&(null!=n&&s(n),null!=i&&s(i))})}t.indexes.forEach(n)}function Oa(e,t,a){if(0===a.numFailures)return t;if("deleteRange"===t.type)return null;var n=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;if(a.numFailures===n)return null;var o=r({},t);return i(o.keys)&&(o.keys=o.keys.filter(function(e,t){return!(t in a.failures)})),"values"in o&&i(o.values)&&(o.values=o.values.filter(function(e,t){return!(t in a.failures)})),o}function Ba(e,t){return void 0===t.lower||(t.lowerOpen?zt(e,t.lower)>0:zt(e,t.lower)>=0)}function Fa(e,t){return void 0===t.upper||(t.upperOpen?zt(e,t.upper)<0:zt(e,t.upper)<=0)}function qa(e,t){return Ba(e,t)&&Fa(e,t)}function Ra(e,t,r,a,n,o){if(!r||0===r.length)return e;var s=t.query.index,l=s.multiEntry,c=t.query.range,d=a.schema.primaryKey.extractKey,u=s.extractKey,p=(s.lowLevelIndex||s).extractKey,m=r.reduce(function(e,r){var a=e,n=[];if("add"===r.type||"put"===r.type)for(var o=new oa,s=r.values.length-1;s>=0;--s){var p=r.values[s],m=d(p);if(!o.hasKey(m)){var h=u(p);(l&&i(h)?h.some(function(e){return qa(e,c)}):qa(h,c))&&(o.addKey(m),n.push(p))}}switch(r.type){case"add":var f=(new oa).addKeys(t.values?e.map(function(e){return d(e)}):e);a=e.concat(t.values?n.filter(function(e){var t=d(e);return!f.hasKey(t)&&(f.addKey(t),!0)}):n.map(function(e){return d(e)}).filter(function(e){return!f.hasKey(e)&&(f.addKey(e),!0)}));break;case"put":var g=(new oa).addKeys(r.values.map(function(e){return d(e)}));a=e.filter(function(e){return!g.hasKey(t.values?d(e):e)}).concat(t.values?n:n.map(function(e){return d(e)}));break;case"delete":var y=(new oa).addKeys(r.keys);a=e.filter(function(e){return!y.hasKey(t.values?d(e):e)});break;case"deleteRange":var _=r.range;a=e.filter(function(e){return!qa(d(e),_)})}return a},e);return m===e?e:(m.sort(function(e,t){return zt(p(e),p(t))||zt(d(e),d(t))}),t.limit&&t.limit<1/0&&(m.length>t.limit?m.length=t.limit:e.length===t.limit&&m.length<t.limit&&(n.dirty=!0)),o?Object.freeze(m):m)}function La(e,t){return 0===zt(e.lower,t.lower)&&0===zt(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Ka(e,t,r,a){if(void 0===e)return void 0!==t?-1:0;if(void 0===t)return 1;var n=zt(e,t);if(0===n){if(r&&a)return 0;if(r)return 1;if(a)return-1}return n}function Ya(e,t,r,a){if(void 0===e)return void 0!==t?1:0;if(void 0===t)return-1;var n=zt(e,t);if(0===n){if(r&&a)return 0;if(r)return-1;if(a)return 1}return n}function Ga(e,t){return Ka(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&Ya(e.upper,t.upper,e.upperOpen,t.upperOpen)>=0}function Qa(e,t,r,a){var n=ha["idb://".concat(e,"/").concat(t)];if(!n)return[];var o=n.queries[r];if(!o)return[null,!1,n,null];var s=o[(a.query?a.query.index.name:null)||""];if(!s)return[null,!1,n,null];switch(r){case"query":var i=s.find(function(e){return e.req.limit===a.limit&&e.req.values===a.values&&La(e.req.query.range,a.query.range)});return i?[i,!0,n,s]:[s.find(function(e){return("limit"in e.req?e.req.limit:1/0)>=a.limit&&(!a.values||e.req.values)&&Ga(e.req.query.range,a.query.range)}),!1,n,s];case"count":var l=s.find(function(e){return La(e.req.query.range,a.query.range)});return[l,!!l,n,s]}}function $a(e,t,r,a){e.subscribers.add(r),a.addEventListener("abort",function(){e.subscribers.delete(r),0===e.subscribers.size&&Wa(e,t)})}function Wa(e,t){setTimeout(function(){0===e.subscribers.size&&R(t,e)},3e3)}var Ja={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return r(r({},e),{transaction:function(r,a,n){var o=e.transaction(r,a,n);if("readwrite"===a){var s=new AbortController,i=s.signal,l=function(n){return function(){if(s.abort(),"readwrite"===a){for(var i=new Set,l=0,c=r;l<c.length;l++){var d=c[l],u=ha["idb://".concat(t,"/").concat(d)];if(u){var p=e.table(d),m=u.optimisticOps.filter(function(e){return e.trans===o});if(o._explicit&&n&&o.mutatedParts)for(var h=0,f=Object.values(u.queries.query);h<f.length;h++)for(var g=0,y=(w=f[h]).slice();g<y.length;g++)ma((j=y[g]).obsSet,o.mutatedParts)&&(R(w,j),j.subscribers.forEach(function(e){return i.add(e)}));else if(m.length>0){u.optimisticOps=u.optimisticOps.filter(function(e){return e.trans!==o});for(var _=0,x=Object.values(u.queries.query);_<x.length;_++)for(var w,v=0,b=(w=x[_]).slice();v<b.length;v++){var j;if(null!=(j=b[v]).res&&o.mutatedParts)if(n&&!j.dirty){var k=Object.isFrozen(j.res),C=Ra(j.res,j.req,m,p,j,k);j.dirty?(R(w,j),j.subscribers.forEach(function(e){return i.add(e)})):C!==j.res&&(j.res=C,j.promise=Ee.resolve({result:C}))}else j.dirty&&R(w,j),j.subscribers.forEach(function(e){return i.add(e)})}}}}i.forEach(function(e){return e()})}}};o.addEventListener("abort",l(!1),{signal:i}),o.addEventListener("error",l(!1),{signal:i}),o.addEventListener("complete",l(!0),{signal:i})}return o},table:function(a){var n=e.table(a),o=n.schema.primaryKey;return r(r({},n),{mutate:function(e){var s=Pe.trans;if(o.outbound||"disabled"===s.db._options.cache||s.explicit||"readwrite"!==s.idbtrans.mode)return n.mutate(e);var i=ha["idb://".concat(t,"/").concat(a)];if(!i)return n.mutate(e);var l=n.mutate(e);return"add"!==e.type&&"put"!==e.type||!(e.values.length>=50||Ma(o,e).some(function(e){return null==e}))?(i.optimisticOps.push(e),e.mutatedParts&&ya(e.mutatedParts),l.then(function(t){if(t.numFailures>0){R(i.optimisticOps,e);var r=Oa(i,e,t);r&&i.optimisticOps.push(r),e.mutatedParts&&ya(e.mutatedParts)}}),l.catch(function(){R(i.optimisticOps,e),e.mutatedParts&&ya(e.mutatedParts)})):l.then(function(t){var a=r(r({},e),{values:e.values.map(function(e,a){var n;if(t.failures[a])return e;var s=(null===(n=o.keyPath)||void 0===n?void 0:n.includes("."))?T(e):r({},e);return C(s,o.keyPath,t.results[a]),s})}),n=Oa(i,a,t);i.optimisticOps.push(n),queueMicrotask(function(){return e.mutatedParts&&ya(e.mutatedParts)})}),l},query:function(e){var r;if(!Aa(Pe,n)||!Ia("query",e))return n.query(e);var o="immutable"===(null===(r=Pe.trans)||void 0===r?void 0:r.db._options.cache),s=Pe,i=s.requery,l=s.signal,c=Qa(t,a,"query",e),d=c[0],u=c[1],p=c[2],m=c[3];if(d&&u)d.obsSet=e.obsSet;else{var h=n.query(e).then(function(e){var t=e.result;if(d&&(d.res=t),o){for(var r=0,a=t.length;r<a;++r)Object.freeze(t[r]);Object.freeze(t)}else e.result=T(t);return e}).catch(function(e){return m&&d&&R(m,d),Promise.reject(e)});d={obsSet:e.obsSet,promise:h,subscribers:new Set,type:"query",req:e,dirty:!1},m?m.push(d):(m=[d],p||(p=ha["idb://".concat(t,"/").concat(a)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),p.queries.query[e.query.index.name||""]=m)}return $a(d,m,i,l),d.promise.then(function(t){return{result:Ra(t.result,e,null==p?void 0:p.optimisticOps,n,d,o)}})}})}})}};function Va(e,t){return new Proxy(e,{get:function(e,r,a){return"db"===r?t:Reflect.get(e,r,a)}})}var Ha,Xa=function(){function e(t,a){var n=this;this._middlewares={},this.verno=0;var o=e.dependencies;this._options=a=r({addons:e.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange,cache:"cloned"},a),this._deps={indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange};var s=a.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ne,dbReadyPromise:null,cancelOpen:ne,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:a.autoOpen};i.dbReadyPromise=new Ee(function(e){i.dbReadyResolve=e}),i.openCanceller=new Ee(function(e,t){i.cancelOpen=t}),this._state=i,this.name=t,this.on=Ot(this,"populate","blocked","versionchange","close",{ready:[pe,ne]}),this.on.ready.subscribe=w(this.on.ready.subscribe,function(t){return function(r,a){e.vip(function(){var e=n._state;if(e.openComplete)e.dbOpenError||Ee.resolve().then(r),a&&t(r);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(r),a&&t(r);else{t(r);var o=n;a||t(function e(){o.on.ready.unsubscribe(r),o.on.ready.unsubscribe(e)})}})}}),this.Collection=Ht(this),this.Table=Ft(this),this.Transaction=gr(this),this.Version=Vr(this),this.WhereClause=cr(this),this.on("versionchange",function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))}),this._maxKey=vr(a.IDBKeyRange),this._createTransaction=function(e,t,r,a){return new n.Transaction(e,t,r,n._options.chromeTransactionDurability,a)},this._fireOnBlocked=function(e){n.on("blocked").fire(e),jt.filter(function(e){return e.name===n.name&&e!==n&&!e._state.vcFired}).map(function(t){return t.on("versionchange").fire(e)})},this.use(Pa),this.use(Ja),this.use(Ta),this.use(Da),this.use(Na);var l=new Proxy(this,{get:function(e,t,r){if("_vip"===t)return!0;if("table"===t)return function(e){return Va(n.table(e),l)};var a=Reflect.get(e,t,r);return a instanceof Et?Va(a,l):"tables"===t?a.map(function(e){return Va(e,l)}):"_createTransaction"===t?function(){return Va(a.apply(this,arguments),l)}:a}});this.vip=l,s.forEach(function(e){return e(n)})}return e.prototype.version=function(e){if(isNaN(e)||e<.1)throw new ee.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new ee.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,r=t.filter(function(t){return t._cfg.version===e})[0];return r||(r=new this.Version(e),t.push(r),t.sort(Ar),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||Pe.letThrough||this._vip)?e():new Ee(function(e,r){if(t._state.openComplete)return r(new ee.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void r(new ee.DatabaseClosed);t.open().catch(ne)}t._state.dbReadyPromise.then(e,r)}).then(e)},e.prototype.use=function(e){var t=e.stack,r=e.create,a=e.level,n=e.name;n&&this.unuse({stack:t,name:n});var o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:r,level:null==a?10:a,name:n}),o.sort(function(e,t){return e.level-t.level}),this},e.prototype.unuse=function(e){var t=e.stack,r=e.name,a=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(e){return a?e.create!==a:!!r&&e.name!==r})),this},e.prototype.open=function(){var e=this;return mt(ze,function(){return wa(e)})},e.prototype._close=function(){var e=this._state,t=jt.indexOf(this);if(t>=0&&jt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(r){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new Ee(function(t){e.dbReadyResolve=t}),e.openCanceller=new Ee(function(t,r){e.cancelOpen=r}))},e.prototype.close=function(e){var t=(void 0===e?{disableAutoOpen:!0}:e).disableAutoOpen,r=this._state;t?(r.isBeingOpened&&r.cancelOpen(new ee.DatabaseClosed),this._close(),r.autoOpen=!1,r.dbOpenError=new ee.DatabaseClosed):(this._close(),r.autoOpen=this._options.autoOpen||r.isBeingOpened,r.openComplete=!1,r.dbOpenError=null)},e.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var r=arguments.length>0&&"object"!=typeof arguments[0],a=this._state;return new Ee(function(n,o){var s=function(){t.close(e);var r=t._deps.indexedDB.deleteDatabase(t.name);r.onsuccess=Xe(function(){ta(t._deps,t.name),n()}),r.onerror=dr(o),r.onblocked=t._fireOnBlocked};if(r)throw new ee.InvalidArgument("Invalid closeOptions argument to db.delete()");a.isBeingOpened?a.dbReadyPromise.then(s):s()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return null!==this.idbdb},e.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},e.prototype.hasFailed=function(){return null!==this._state.dbOpenError},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var e=this;return o(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var e=ba.apply(this,arguments);return this._transaction.apply(this,e)},e.prototype._transaction=function(e,t,r){var a=this,n=Pe.trans;n&&n.db===this&&-1===e.indexOf("!")||(n=null);var o,s,i=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(s=t.map(function(e){var t=e instanceof a.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t}),"r"==e||e===Ct)o=Ct;else{if("rw"!=e&&e!=Dt)throw new ee.InvalidArgument("Invalid transaction mode: "+e);o=Dt}if(n){if(n.mode===Ct&&o===Dt){if(!i)throw new ee.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");n=null}n&&s.forEach(function(e){if(n&&-1===n.storeNames.indexOf(e)){if(!i)throw new ee.SubTransaction("Table "+e+" not included in parent transaction.");n=null}}),i&&n&&!n.active&&(n=null)}}catch(c){return n?n._promise(null,function(e,t){t(c)}):gt(c)}var l=ja.bind(null,this,o,s,n,r);return n?n._promise(o,l,"lock"):Pe.trans?mt(Pe.transless,function(){return a._whenReady(l)}):this._whenReady(l)},e.prototype.table=function(e){if(!u(this._allTables,e))throw new ee.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},e}(),Za="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",en=function(){function e(e){this._subscribe=e}return e.prototype.subscribe=function(e,t,r){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:r})},e.prototype[Za]=function(){return this},e}();try{Ha={indexedDB:n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB,IDBKeyRange:n.IDBKeyRange||n.webkitIDBKeyRange}}catch(un){Ha={indexedDB:null,IDBKeyRange:null}}function tn(e){var t,r=!1,a=new en(function(a){var n=Y(e);function o(t){var r=Ge();try{n&&st();var a=ot(e,t);return n&&(a=a.finally(it)),a}finally{r&&Qe()}}var s,i=!1,l={},c={},d={get closed(){return i},unsubscribe:function(){i||(i=!0,s&&s.abort(),u&&hr.storagemutated.unsubscribe(h))}};a.start&&a.start(d);var u=!1,p=function(){return ft(f)};function m(){return ma(c,l)}var h=function(e){pa(l,e),m()&&p()},f=function(){if(!i&&Ha.indexedDB){l={};var n={};s&&s.abort(),s=new AbortController;var d={subscr:n,signal:s.signal,requery:p,querier:e,trans:null},m=o(d);Promise.resolve(m).then(function(e){r=!0,t=e,i||d.signal.aborted||(l={},A(c=n)||u||(hr(pr,h),u=!0),ft(function(){return!i&&a.next&&a.next(e)}))},function(e){r=!1,["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||i||ft(function(){i||a.error&&a.error(e)})})}};return setTimeout(p,0),d});return a.hasValue=function(){return r},a.getValue=function(){return t},a}var rn=Xa;function an(e){var t=on;try{on=!0,hr.storagemutated.fire(e),_a(e,!0)}finally{on=t}}p(rn,r(r({},ae),{delete:function(e){return new rn(e,{addons:[]}).delete()},exists:function(e){return new rn(e,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return Zr(rn.dependencies).then(e)}catch(t){return gt(new ee.MissingAPI)}},defineClass:function(){function e(e){l(this,e)}return e},ignoreTransaction:function(e){return Pe.trans?mt(Pe.transless,e):e()},vip:ra,async:function(e){return function(){try{var t=va(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Ee.resolve(t)}catch(un){return gt(un)}}},spawn:function(e,t,r){try{var a=va(e.apply(r,t||[]));return a&&"function"==typeof a.then?a:Ee.resolve(a)}catch(un){return gt(un)}},currentTransaction:{get:function(){return Pe.trans||null}},waitFor:function(e,t){var r=Ee.resolve("function"==typeof e?rn.ignoreTransaction(e):e).timeout(t||6e4);return Pe.trans?Pe.trans.waitFor(r):r},Promise:Ee,debug:{get:function(){return me},set:function(e){he(e)}},derive:f,extend:l,props:p,override:w,Events:Ot,on:hr,liveQuery:tn,extendObservabilitySet:pa,getByKeyPath:k,setByKeyPath:C,delByKeyPath:D,shallowClone:S,deepClone:T,getObjectDiff:Sa,cmp:zt,asap:b,minKey:wt,addons:[],connections:jt,errnames:X,dependencies:Ha,cache:ha,semVer:_t,version:_t.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,r){return e+t/Math.pow(10,2*r)})})),rn.maxKey=vr(rn.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(hr(pr,function(e){var t;on||(t=new CustomEvent(mr,{detail:e}),on=!0,dispatchEvent(t),on=!1)}),addEventListener(mr,function(e){var t=e.detail;on||an(t)}));var nn,on=!1,sn=function(){};function ln(e){return new Wt({add:e})}function cn(e){return new Wt({remove:e})}function dn(e,t){return new Wt({replacePrefix:[e,t]})}return"undefined"!=typeof BroadcastChannel&&((sn=function(){(nn=new BroadcastChannel(mr)).onmessage=function(e){return e.data&&an(e.data)}})(),"function"==typeof nn.unref&&nn.unref(),hr(pr,function(e){on||nn.postMessage(e)})),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",function(e){if(!Xa.disableBfCache&&e.persisted){null==nn||nn.close();for(var t=0,r=jt;t<r.length;t++)r[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Xa.disableBfCache&&e.persisted&&(sn(),an({all:new oa(-1/0,[[]])}))})),Ee.rejectionMapper=re,he(me),r(Xa,Object.freeze({__proto__:null,Dexie:Xa,liveQuery:tn,Entity:Ut,cmp:zt,PropModification:Wt,replacePrefix:dn,add:ln,remove:cn,default:Xa,RangeSet:oa,mergeRanges:ia,rangesOverlap:la}),{default:Xa}),Xa}()),Rt.exports)),Kt=Symbol.for("Dexie"),Yt=globalThis[Kt]||(globalThis[Kt]=Lt);if(Lt.semVer!==Yt.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Lt.semVer} and ${Yt.semVer}`);const{liveQuery:Gt,mergeRanges:Qt,rangesOverlap:$t,RangeSet:Wt,cmp:Jt,Entity:Vt,PropModification:Ht,replacePrefix:Xt,add:Zt,remove:er}=Yt;const tr=new class extends Yt{constructor(){super("TradeJournalDB"),t(this,"trades"),t(this,"tradeSettings"),t(this,"userPreferences"),t(this,"portfolioData"),t(this,"taxData"),t(this,"commentaryData"),t(this,"dashboardConfig"),t(this,"milestonesData"),t(this,"miscData"),t(this,"backups"),t(this,"chartImageBlobs"),this.version(1).stores({trades:"id, name, date, tradeNo, positionStatus, buySell, setup, createdAt, updatedAt",tradeSettings:"++id, updatedAt",userPreferences:"++id, updatedAt",portfolioData:"++id, type, year, month, date, updatedAt",taxData:"++id, year, updatedAt",commentaryData:"++id, year, updatedAt",dashboardConfig:"++id, updatedAt",milestonesData:"++id, updatedAt",miscData:"++id, key, updatedAt",backups:"++id, type, createdAt"}),this.version(2).stores({trades:"id, name, date, tradeNo, positionStatus, buySell, setup, createdAt, updatedAt",tradeSettings:"++id, updatedAt",userPreferences:"++id, updatedAt",portfolioData:"++id, type, year, month, date, updatedAt",taxData:"++id, year, updatedAt",commentaryData:"++id, year, updatedAt",dashboardConfig:"++id, updatedAt",milestonesData:"++id, updatedAt",miscData:"++id, key, updatedAt",backups:"++id, type, createdAt",chartImageBlobs:"id, tradeId, imageType, uploadedAt"}).upgrade(e=>e.trades.toCollection().modify(e=>{void 0===e.chartAttachments&&(e.chartAttachments=void 0)})),this.trades.hook("creating",function(e,t,r){t.createdAt=new Date,t.updatedAt=new Date}),this.trades.hook("updating",function(e,t,r,a){e.updatedAt=new Date}),[this.tradeSettings,this.userPreferences,this.portfolioData,this.taxData,this.commentaryData,this.dashboardConfig,this.milestonesData,this.miscData,this.backups].forEach(e=>{e.hook("creating",function(e,t,r){t.updatedAt=new Date}),e.hook("updating",function(e,t,r,a){e.updatedAt=new Date})})}};function rr(e){if(null==e)return e;if("function"!=typeof e){if("object"==typeof e){if(Array.isArray(e))return e.map(e=>rr(e)).filter(e=>void 0!==e);{const t={};for(const[r,a]of Object.entries(e)){const e=rr(a);void 0!==e&&(t[r]=e)}return t}}return e}}class ar{static async getAllTrades(){try{return await tr.trades.orderBy("tradeNo").toArray()}catch(e){return[]}}static async getTrade(e){try{return await tr.trades.get(e)||null}catch(t){return null}}static async saveTrade(e){try{const t=rr(e);return await tr.trades.put(t),!0}catch(t){return!1}}static async saveAllTrades(e){try{const t=e.map(e=>rr(e));return await tr.transaction("rw",tr.trades,async()=>{await tr.trades.clear(),await tr.trades.bulkAdd(t)}),!0}catch(t){return!1}}static async deleteTrade(e){try{return await tr.trades.delete(e),!0}catch(t){return!1}}static async getTradeSettings(){try{const e=await tr.tradeSettings.toArray();return 0===e.length?null:(e.sort((e,t)=>{var r,a;return((null==(r=t.updatedAt)?void 0:r.getTime())||0)-((null==(a=e.updatedAt)?void 0:a.getTime())||0)}),e[0])}catch(e){return null}}static async saveTradeSettings(e){try{return await tr.transaction("rw",tr.tradeSettings,async()=>{await tr.tradeSettings.clear(),await tr.tradeSettings.add(e)}),!0}catch(t){return!1}}static async getUserPreferences(){try{const e=await tr.userPreferences.toArray();return 0===e.length?null:(e.sort((e,t)=>{var r,a;return((null==(r=t.updatedAt)?void 0:r.getTime())||0)-((null==(a=e.updatedAt)?void 0:a.getTime())||0)}),e[0])}catch(e){return null}}static async saveUserPreferences(e){try{return await tr.transaction("rw",tr.userPreferences,async()=>{await tr.userPreferences.clear(),await tr.userPreferences.add(e)}),!0}catch(t){return!1}}static async getPortfolioData(){try{return await tr.portfolioData.toArray()}catch(e){return[]}}static async savePortfolioData(e){try{return await tr.transaction("rw",tr.portfolioData,async()=>{await tr.portfolioData.clear(),await tr.portfolioData.bulkAdd(e)}),!0}catch(t){return!1}}static async createBackup(e,t,r){try{const a=rr(t);await tr.backups.add({type:e,data:a,createdAt:new Date,description:r});const n=await tr.backups.where("type").equals(e).toArray();if(n.sort((e,t)=>e.createdAt.getTime()-t.createdAt.getTime()),n.length>5){const e=n.slice(0,-5);await tr.backups.bulkDelete(e.map(e=>e.id))}return!0}catch(a){return!1}}static async getLatestBackup(e){try{const t=await tr.backups.where("type").equals(e).toArray();return 0===t.length?null:(t.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()),t[0])}catch(t){return null}}static async getTaxData(e){try{return await tr.taxData.where("year").equals(e).first()||null}catch(t){return null}}static async saveTaxData(e,t){try{return await tr.taxData.put({year:e,data:t}),!0}catch(r){return!1}}static async getCommentaryData(e){try{return await tr.commentaryData.where("year").equals(e).first()||null}catch(t){return null}}static async saveCommentaryData(e,t){try{return await tr.commentaryData.put({year:e,data:t}),!0}catch(r){return!1}}static async getDashboardConfig(){try{const e=await tr.dashboardConfig.toArray();return 0===e.length?null:(e.sort((e,t)=>{var r,a;return((null==(r=t.updatedAt)?void 0:r.getTime())||0)-((null==(a=e.updatedAt)?void 0:a.getTime())||0)}),e[0])}catch(e){return null}}static async saveDashboardConfig(e){try{return await tr.transaction("rw",tr.dashboardConfig,async()=>{await tr.dashboardConfig.clear(),await tr.dashboardConfig.add({config:e})}),!0}catch(t){return!1}}static async getMilestonesData(){try{const e=await tr.milestonesData.toArray();return 0===e.length?null:(e.sort((e,t)=>{var r,a;return((null==(r=t.updatedAt)?void 0:r.getTime())||0)-((null==(a=e.updatedAt)?void 0:a.getTime())||0)}),e[0])}catch(e){return null}}static async saveMilestonesData(e){try{const t=rr(e);return await tr.transaction("rw",tr.milestonesData,async()=>{await tr.milestonesData.clear(),await tr.milestonesData.add({achievements:t})}),!0}catch(t){return!1}}static async getMiscData(e){try{const t=await tr.miscData.where("key").equals(e).first();return t?t.value:null}catch(t){return null}}static async saveMiscData(e,t){try{const r=rr(t);return void 0!==r&&(await tr.miscData.put({key:e,value:r}),!0)}catch(r){return!1}}static async deleteMiscData(e){try{return await tr.miscData.where("key").equals(e).delete(),!0}catch(t){return!1}}static async saveChartImageBlob(e){try{return!!(e.data&&e.data instanceof Blob)&&(0!==e.data.size&&(await tr.chartImageBlobs.put(e),!0))}catch(t){return!1}}static async getChartImageBlob(e){try{const t=await tr.chartImageBlobs.get(e);if(t){if(!(t.data&&t.data instanceof Blob))return null;if(0===t.data.size)return null}return t||null}catch(t){return null}}static async getAllChartImageBlobs(){try{return await tr.chartImageBlobs.toArray()}catch(e){return[]}}static async getTradeChartImageBlobs(e){try{return await tr.chartImageBlobs.where("tradeId").equals(e).toArray()}catch(t){return[]}}static async deleteChartImageBlob(e){try{return await tr.chartImageBlobs.delete(e),!0}catch(t){return!1}}static async updateChartImageBlobTradeId(e,t){try{return!!(await tr.chartImageBlobs.get(e))&&(await tr.chartImageBlobs.update(e,{tradeId:t}),!0)}catch(r){return!1}}static async deleteTradeChartImageBlobs(e){try{await tr.chartImageBlobs.where("tradeId").equals(e).delete();return!0}catch(t){return!1}}static async getChartImageBlobsSize(){try{return(await tr.chartImageBlobs.toArray()).reduce((e,t)=>e+t.size,0)}catch(e){return 0}}static async clearAllChartImages(){try{return await tr.chartImageBlobs.clear(),!0}catch(e){return!1}}static async getOrphanedChartImages(){try{const[e,t]=await Promise.all([tr.chartImageBlobs.toArray(),tr.trades.toArray()]),r=new Set(t.map(e=>e.id));return e.filter(e=>!r.has(e.tradeId))}catch(e){return[]}}static async cleanupOrphanedChartImages(){try{const e=await this.getOrphanedChartImages();if(0===e.length)return 0;const t=e.map(e=>e.id);return await tr.chartImageBlobs.bulkDelete(t),e.length}catch(e){return 0}}static async inspectChartImageDatabase(){try{const[e,t]=await Promise.all([tr.chartImageBlobs.toArray(),tr.trades.toArray()]),r=new Set(t.map(e=>e.id)),a=e.filter(e=>!r.has(e.tradeId)),n=e.filter(e=>r.has(e.tradeId));a.length,n.length>0&&n.forEach(e=>{t.find(t=>t.id===e.tradeId)})}catch(e){}}static async getAllChartImageBlobsWithTradeInfo(){try{const[e,t]=await Promise.all([tr.chartImageBlobs.orderBy("uploadedAt").toArray(),tr.trades.toArray()]),r=new Map(t.map(e=>[e.id,{name:e.name,date:e.date,tradeNo:e.tradeNo}]));return e.map(e=>{const t=r.get(e.tradeId);return{...e,tradeName:null==t?void 0:t.name,tradeDate:null==t?void 0:t.date,tradeNo:null==t?void 0:t.tradeNo}})}catch(e){return[]}}static async getFilteredChartImageBlobs(e){try{let t=await this.getAllChartImageBlobsWithTradeInfo();return e.imageType&&(t=t.filter(t=>t.imageType===e.imageType)),(e.dateFrom||e.dateTo)&&(t=t.filter(t=>{if(!t.tradeDate)return!1;const r=new Date(t.tradeDate);return!(e.dateFrom&&r<new Date(e.dateFrom))&&!(e.dateTo&&r>new Date(e.dateTo))})),e.tradeIds&&e.tradeIds.length>0&&(t=t.filter(t=>e.tradeIds.includes(t.tradeId))),t}catch(t){return[]}}static async clearAllData(){try{return await tr.transaction("rw",[tr.trades,tr.tradeSettings,tr.userPreferences,tr.portfolioData,tr.taxData,tr.commentaryData,tr.dashboardConfig,tr.milestonesData,tr.miscData,tr.chartImageBlobs],async()=>{await tr.trades.clear(),await tr.tradeSettings.clear(),await tr.userPreferences.clear(),await tr.portfolioData.clear(),await tr.taxData.clear(),await tr.commentaryData.clear(),await tr.dashboardConfig.clear(),await tr.milestonesData.clear(),await tr.miscData.clear(),await tr.chartImageBlobs.clear()}),!0}catch(e){return!1}}static async getDatabaseSize(){try{const e=await tr.trades.count(),t=await tr.tradeSettings.count(),r=await tr.userPreferences.count(),a=await tr.portfolioData.count(),n=await tr.taxData.count(),o=await tr.commentaryData.count(),s=await tr.dashboardConfig.count(),i=await tr.milestonesData.count(),l=await tr.miscData.count(),c=await tr.backups.count(),d=await tr.chartImageBlobs.count();return{trades:e,chartImages:d,total:e+t+r+a+n+o+s+i+l+c+d}}catch(e){return{trades:0,chartImages:0,total:0}}}}class nr{static async migrateToSupabase(e){try{if(!(await ce.isAuthenticated()))return{success:!1,error:"User must be authenticated to migrate data"};let r=0;const a=["trades","userPreferences","portfolioData","taxData","milestonesData","miscData","chartImageBlobs"].length,n=(t,n,o)=>{e&&e({step:t,current:r,total:a,message:n,completed:r===a,error:o})};r++,n("trades","Migrating trades...");try{const e=await ar.getAllTrades();if(e.length>0){if(!(await dt.saveAllTrades(e)))throw new Error("Failed to save trades to Supabase")}}catch(t){const e=`Failed to migrate trades: ${t}`;return n("trades",e,e),{success:!1,error:e}}r++,n("userPreferences","Migrating user preferences...");try{const e=await ar.getUserPreferences();if(e){if(!(await dt.saveUserPreferences(e)))throw new Error("Failed to save user preferences to Supabase")}}catch(t){const e=`Failed to migrate user preferences: ${t}`;return n("userPreferences",e,e),{success:!1,error:e}}r++,n("portfolioData","Migrating portfolio data...");try{const e=await ar.getPortfolioData();if(e&&e.length>0){if(!(await dt.savePortfolioData(e)))throw new Error("Failed to save portfolio data to Supabase")}}catch(t){const e=`Failed to migrate portfolio data: ${t}`;return n("portfolioData",e,e),{success:!1,error:e}}r++,n("taxData","Migrating tax data...");try{const e=await ar.getTaxData((new Date).getFullYear());if(e){if(!(await dt.saveTaxData(e.year,e.data)))throw new Error(`Failed to save tax data for year ${e.year}`)}}catch(t){const e=`Failed to migrate tax data: ${t}`;return n("taxData",e,e),{success:!1,error:e}}r++,n("milestonesData","Migrating milestones data...");try{const e=await ar.getMilestonesData();if(e&&e.achievements){if(!(await dt.saveMilestonesData(e.achievements)))throw new Error("Failed to save milestones data to Supabase")}}catch(t){const e=`Failed to migrate milestones data: ${t}`;return n("milestonesData",e,e),{success:!1,error:e}}r++,n("miscData","Migrating miscellaneous data...");try{const e=["tradeSettings","dashboardConfig","commentaryData","globalFilters","chartSettings"];for(const r of e)try{const e=await ar.getMiscData(r);if(null!==e){await dt.saveMiscData(r,e)}}catch(t){}}catch(t){const e=`Failed to migrate miscellaneous data: ${t}`;return n("miscData",e,e),{success:!1,error:e}}r++,n("chartImageBlobs","Migrating chart images...");try{const e=await ar.getAllChartImageBlobs();for(const t of e){await dt.saveChartImageBlob(t)}}catch(t){const e=`Failed to migrate chart images: ${t}`;return n("chartImageBlobs",e,e),{success:!1,error:e}}return n("completed","Migration completed successfully!"),{success:!0}}catch(t){const r=`Migration failed: ${t}`;return e&&e({step:"error",current:0,total:0,message:r,completed:!1,error:r}),{success:!1,error:r}}}static async hasDataToMigrate(){try{const[e,t,r]=await Promise.all([ar.getAllTrades(),ar.getAllChartImageBlobs(),ar.getPortfolioData()]),a=e.length>0,n=t.length>0,o=r.length>0;return a||n||o}catch(e){return!1}}static async getMigrationSummary(){try{const[e,t,r,a]=await Promise.all([ar.getAllTrades(),ar.getAllChartImageBlobs(),ar.getUserPreferences(),ar.getPortfolioData()]);return{trades:e.length,chartImages:t.length,hasPreferences:!!r,hasPortfolioData:a.length>0}}catch(e){return{trades:0,chartImages:0,hasPreferences:!1,hasPortfolioData:!1}}}static async clearIndexedDBData(){try{return await ar.clearAllData(),!0}catch(e){return!1}}}const or=({isOpen:e,onClose:t,onMigrationComplete:r,onNeverShowAgain:a})=>{const[o,s]=n.useState(null),[i,l]=n.useState(!1),[c,d]=n.useState(null),[u,p]=n.useState(!1),[m,f]=n.useState(null);n.useEffect(()=>{e&&g()},[e]);const g=async()=>{try{const e=await nr.getMigrationSummary();s(e)}catch(e){}},v=c?Math.round(c.current/c.total*100):0;return h.jsx(y,{isOpen:e,onClose:t,size:"lg",isDismissable:!i,hideCloseButton:i,classNames:{base:"bg-transparent",backdrop:"bg-black/50 backdrop-blur-md",wrapper:"items-center justify-center",body:"p-0",header:"p-0",footer:"p-0"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:Modal:81:4",children:h.jsxs(_,{className:"bg-white dark:bg-black border border-gray-200 dark:border-gray-700 shadow-2xl","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:ModalContent:96:6",children:[h.jsx(x,{className:"p-6 pb-0","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:ModalHeader:97:8",children:h.jsxs("div",{className:"flex items-center justify-between","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:98:10",children:[h.jsxs("div",{className:"flex items-center gap-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:99:12",children:[h.jsx("div",{className:"w-10 h-10 bg-foreground/5 rounded-full flex items-center justify-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:100:14",children:h.jsx(G,{icon:"lucide:cloud-upload",className:"w-5 h-5 text-foreground","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:Icon:101:16"})}),h.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:103:14",children:[h.jsx("h2",{className:"text-lg font-semibold text-foreground tracking-tight","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:h2:104:16",children:"Migrate to Cloud Storage"}),h.jsx("p",{className:"text-xs text-foreground/60 mt-0.5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:p:107:16",children:"Move your trading data to secure cloud storage"})]})]}),!i&&h.jsx("button",{onClick:t,className:"w-8 h-8 rounded-full bg-foreground/5 hover:bg-foreground/10 flex items-center justify-center transition-colors","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:button:113:14",children:h.jsx(G,{icon:"lucide:x",className:"w-4 h-4 text-foreground/60","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:Icon:117:16"})})]})}),h.jsx(w,{className:"px-6 py-0","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:ModalBody:123:8",children:h.jsxs($,{mode:"wait","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:AnimatePresence:124:10",children:[!u&&!m&&h.jsxs(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.15},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:126:14",children:[o&&h.jsxs("div",{className:"mb-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:133:16",children:[h.jsx("h3",{className:"text-sm font-medium text-foreground mb-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:h3:134:18",children:"Data to be migrated:"}),h.jsxs("div",{className:"grid grid-cols-2 gap-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:135:18",children:[h.jsxs("div",{className:"flex items-center justify-between p-3 bg-foreground/3 rounded-lg","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:136:20",children:[h.jsx("span",{className:"text-sm text-foreground/80","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:span:137:22",children:"Trades"}),h.jsx("span",{className:"text-sm font-medium text-foreground bg-foreground/10 px-2 py-1 rounded-full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:span:138:22",children:o.trades})]}),h.jsxs("div",{className:"flex items-center justify-between p-3 bg-foreground/3 rounded-lg","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:142:20",children:[h.jsx("span",{className:"text-sm text-foreground/80","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:span:143:22",children:"Chart Images"}),h.jsx("span",{className:"text-sm font-medium text-foreground bg-foreground/10 px-2 py-1 rounded-full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:span:144:22",children:o.chartImages})]}),h.jsxs("div",{className:"flex items-center justify-between p-3 bg-foreground/3 rounded-lg","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:148:20",children:[h.jsx("span",{className:"text-sm text-foreground/80","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:span:149:22",children:"User Preferences"}),h.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full "+(o.hasPreferences?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-foreground/10 text-foreground/60"),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:span:150:22",children:o.hasPreferences?"Yes":"No"})]}),h.jsxs("div",{className:"flex items-center justify-between p-3 bg-foreground/3 rounded-lg","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:158:20",children:[h.jsx("span",{className:"text-sm text-foreground/80","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:span:159:22",children:"Portfolio Data"}),h.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full "+(o.hasPortfolioData?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-foreground/10 text-foreground/60"),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:span:160:22",children:o.hasPortfolioData?"Yes":"No"})]})]})]}),h.jsxs("div",{className:"space-y-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:173:14",children:[h.jsxs("div",{className:"flex items-center gap-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:174:16",children:[h.jsx("div",{className:"w-6 h-6 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:175:18",children:h.jsx(G,{icon:"lucide:shield-check",className:"w-3 h-3 text-green-600 dark:text-green-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:Icon:176:20"})}),h.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:178:18",children:[h.jsx("span",{className:"text-sm font-medium text-foreground","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:span:179:20",children:"Secure & Private"}),h.jsx("p",{className:"text-xs text-foreground/60","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:p:180:20",children:"Your data is encrypted and only accessible by you"})]})]}),h.jsxs("div",{className:"flex items-center gap-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:184:16",children:[h.jsx("div",{className:"w-6 h-6 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:185:18",children:h.jsx(G,{icon:"lucide:refresh-cw",className:"w-3 h-3 text-blue-600 dark:text-blue-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:Icon:186:20"})}),h.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:188:18",children:[h.jsx("span",{className:"text-sm font-medium text-foreground","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:span:189:20",children:"Automatic Sync"}),h.jsx("p",{className:"text-xs text-foreground/60","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:p:190:20",children:"Access your data from any device, always up to date"})]})]}),h.jsxs("div",{className:"flex items-center gap-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:194:16",children:[h.jsx("div",{className:"w-6 h-6 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:195:18",children:h.jsx(G,{icon:"lucide:hard-drive",className:"w-3 h-3 text-purple-600 dark:text-purple-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:Icon:196:20"})}),h.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:198:18",children:[h.jsx("span",{className:"text-sm font-medium text-foreground","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:span:199:20",children:"Backup & Recovery"}),h.jsx("p",{className:"text-xs text-foreground/60","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:p:200:20",children:"Never lose your trading data with automatic backups"})]})]})]}),c&&h.jsx(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-3 mt-4 pt-4 border-t border-foreground/10","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:206:16",children:h.jsxs("div",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:211:18",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:212:20",children:[h.jsx("span",{className:"text-sm font-medium text-foreground","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:span:213:22",children:"Migration Progress"}),h.jsxs("span",{className:"text-sm font-medium text-foreground","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:span:214:22",children:[v,"%"]})]}),h.jsx("div",{className:"relative","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:216:20",children:h.jsx(L,{value:v,className:"mb-2",classNames:{base:"max-w-full",track:"bg-foreground/10",indicator:"bg-foreground"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:Progress:217:22"})}),h.jsx("p",{className:"text-xs text-foreground/60","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:p:227:20",children:c.message})]})})]}),u&&h.jsxs(Q.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:237:12",children:[h.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:242:14",children:h.jsx(G,{icon:"lucide:check-circle",className:"w-8 h-8 text-green-600 dark:text-green-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:Icon:243:16"})}),h.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:h3:245:14",children:"Migration Completed!"}),h.jsx("p",{className:"text-sm text-foreground/60 mb-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:p:246:14",children:"Your trading data has been successfully migrated to cloud storage."}),h.jsx("div",{className:"inline-flex items-center px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-full text-xs font-medium","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:249:14",children:"All data migrated successfully"})]}),m&&h.jsxs(Q.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:256:12",children:[h.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:261:14",children:h.jsx(G,{icon:"lucide:alert-circle",className:"w-8 h-8 text-red-600 dark:text-red-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:Icon:262:16"})}),h.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:h3:264:14",children:"Migration Failed"}),h.jsx("p",{className:"text-sm text-foreground/60 mb-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:p:265:14",children:m}),h.jsx("div",{className:"inline-flex items-center px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-full text-xs font-medium","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:268:14",children:"Please try again or contact support"})]})]})}),h.jsx(b,{className:"px-6 pb-6 pt-0","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:ModalFooter:276:8",children:h.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-foreground/10 w-full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:277:10",children:[!u&&!m&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:280:16",children:[h.jsx("button",{onClick:t,disabled:i,className:"px-4 py-2 text-sm font-medium text-foreground/60 hover:text-foreground transition-colors disabled:opacity-50","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:button:281:18",children:"Cancel"}),a&&h.jsx("button",{onClick:a,disabled:i,className:"px-4 py-2 text-sm font-medium text-orange-600 dark:text-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-lg transition-colors disabled:opacity-50","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:button:289:20",children:"Never show again"})]}),h.jsx("button",{onClick:async()=>{l(!0),f(null),p(!1);const{success:e,error:t}=await nr.migrateToSupabase(e=>{d(e),e.completed&&(p(!0),l(!1)),e.error&&(f(e.error),l(!1))});!e&&t&&(f(t),l(!1))},disabled:i,className:"px-6 py-2 bg-foreground text-background text-sm font-medium rounded-lg hover:bg-foreground/90 transition-colors disabled:opacity-50 flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:button:298:16",children:i?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-4 h-4 border-2 border-background/30 border-t-background rounded-full animate-spin","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:305:22"}),"Migrating..."]}):h.jsxs(h.Fragment,{children:[h.jsx(G,{icon:"lucide:cloud-upload",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:Icon:310:22"}),"Start Migration"]})})]}),u&&h.jsxs("button",{onClick:()=>{r(),t()},className:"w-full px-6 py-2 bg-foreground text-background text-sm font-medium rounded-lg hover:bg-foreground/90 transition-colors flex items-center justify-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:button:319:14",children:[h.jsx(G,{icon:"lucide:arrow-right",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:Icon:323:16"}),"Continue to App"]}),m&&h.jsxs("div",{className:"flex gap-2 w-full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:div:329:14",children:[h.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 text-sm font-medium text-foreground/60 hover:text-foreground transition-colors","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:button:330:16",children:"Close"}),h.jsxs("button",{onClick:()=>{f(null),d(null)},className:"flex-1 px-6 py-2 bg-foreground text-background text-sm font-medium rounded-lg hover:bg-foreground/90 transition-colors flex items-center justify-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:button:336:16",children:[h.jsx(G,{icon:"lucide:refresh-cw",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\migration\\MigrationModal.tsx:Icon:343:18"}),"Try Again"]})]})]})})]})})},sr=()=>{const e=i(),t=l(),[r,a]=n.useState("loading"),[o,s]=n.useState("");return n.useEffect(()=>{(async()=>{try{const n=new URLSearchParams(t.search),o=new URLSearchParams(t.hash.substring(1)),i=n.get("error")||o.get("error"),l=n.get("error_description")||o.get("error_description"),c=o.get("access_token"),d=o.get("refresh_token");o.get("expires_in"),o.get("token_type");if(i)return s(l||i),void a("error");if(c)try{const{data:t,error:r}=await le.auth.setSession({access_token:c,refresh_token:d||""});if(r);else if(t.session)return a("success"),void setTimeout(()=>{e.replace("/")},1500)}catch(r){}(window.location.hash||window.location.search)&&await new Promise(e=>setTimeout(e,3e3));let u=null,p=null;for(let t=1;t<=5;t++){const r=await le.auth.getSession();if(p=r.error,u=r.data.session,u)return a("success"),void setTimeout(()=>{e.replace("/")},1500);p&&console.error("Session error on attempt",t,":",p),t<5&&await new Promise(e=>setTimeout(e,1e3))}s(p?p.message:"Authentication failed - no session established"),a("error")}catch(n){s("An unexpected error occurred during authentication"),a("error")}})()},[t.search,t.hash,e]),"loading"===r?h.jsxs("div",{className:"min-h-screen bg-background font-sans antialiased","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:110:6",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background via-background to-background","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:111:8",children:h.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(17,24,28,0.03),transparent_70%)] dark:bg-[radial-gradient(circle_at_50%_50%,rgba(236,237,238,0.02),transparent_70%)]","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:112:10"})}),h.jsx("div",{className:"relative z-10 min-h-screen flex items-center justify-center px-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:115:8",children:h.jsxs(Q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,ease:"easeOut"},className:"flex flex-col items-center justify-center text-center max-w-sm mx-auto","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:116:10",children:[h.jsx(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},className:"mb-8","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:122:12",children:h.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:128:14",children:[h.jsx(Q.div,{animate:{rotate:360,scale:[1,1.05,1]},transition:{rotate:{duration:12,repeat:1/0,ease:"linear"},scale:{duration:2,repeat:1/0,ease:"easeInOut"}},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:129:16",children:h.jsxs("svg",{viewBox:"0 0 24 24",className:"h-8 w-8 text-foreground",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:svg:139:18",children:[h.jsx(Q.circle,{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"1.5",fill:"none",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:1},transition:{duration:1.5,ease:"easeInOut"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:circle:145:20"}),h.jsx(Q.path,{d:"M12 6L16 10L12 18L8 10L12 6Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.5",strokeLinejoin:"round",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,delay:.5,ease:"backOut"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:path:156:20"}),h.jsx(Q.path,{d:"M8 10L12 14L16 10",stroke:"currentColor",strokeWidth:"0.5",fill:"none",opacity:"0.7",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:.7},transition:{duration:1,delay:1,ease:"easeInOut"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:path:166:20"})]})}),h.jsx("span",{className:"text-2xl font-bold tracking-tight text-foreground font-sans","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:span:178:16",children:"NEXUS"})]})}),h.jsx(Q.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.4,delay:.2},className:"mb-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:182:12",children:h.jsxs("div",{className:"relative","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:188:14",children:[h.jsx(Q.div,{animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-2 border-foreground/20 border-t-foreground rounded-full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:189:16"}),h.jsx(Q.div,{animate:{scale:[1,1.2,1],opacity:[.3,.8,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 w-12 h-12 border border-foreground/10 rounded-full","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:194:16"})]})}),h.jsxs(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,delay:.3},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:209:12",children:[h.jsx("p",{className:"text-sm font-medium text-foreground/80 mb-2 font-sans","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:p:214:14",children:"Completing authentication..."}),h.jsx("div",{className:"flex items-center justify-center gap-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:215:14",children:[0,1,2].map(e=>h.jsx(Q.div,{className:"w-1 h-1 bg-foreground rounded-full",animate:{scale:[1,1.4,1],opacity:[.4,1,.4],y:[0,-2,0]},transition:{duration:1.2,repeat:1/0,delay:.15*e,ease:"easeInOut"},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:217:18"},e))})]})]})})]}):"success"===r?h.jsxs("div",{className:"min-h-screen bg-background font-sans antialiased","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:243:6",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background via-background to-background/95","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:244:8",children:h.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(34,197,94,0.08),transparent_50%)] dark:bg-[radial-gradient(circle_at_50%_50%,rgba(34,197,94,0.05),transparent_50%)]","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:245:10"})}),h.jsx("div",{className:"relative z-10 min-h-screen flex items-center justify-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:248:8",children:h.jsxs(Q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,ease:"easeOut"},className:"text-center","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:249:10",children:[h.jsx(Q.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.1},className:"mb-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:255:12",children:h.jsx("div",{className:"w-20 h-20 bg-success/10 dark:bg-success/5 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-sm border border-success/20","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:261:14",children:h.jsx(Q.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.4,delay:.3,type:"spring",stiffness:200},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:262:16",children:h.jsx(G,{icon:"lucide:check-circle",className:"w-10 h-10 text-success","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:Icon:267:18"})})})}),h.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.4},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:272:12",children:[h.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2 font-sans","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:h1:277:14",children:"Authentication Successful!"}),h.jsx("p",{className:"text-foreground/70 mb-4 font-sans","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:p:280:14",children:"Redirecting you to the application..."}),h.jsx("div",{className:"flex items-center justify-center gap-1","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:284:14",children:[0,1,2].map(e=>h.jsx(Q.div,{className:"w-1 h-1 bg-success rounded-full",animate:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,delay:.2*e},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:286:18"},e))})]})]})})]}):h.jsxs("div",{className:"min-h-screen bg-background font-sans antialiased","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:302:4",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background via-background to-background/95","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:303:6",children:h.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(239,68,68,0.1),transparent_50%)] dark:bg-[radial-gradient(circle_at_50%_50%,rgba(239,68,68,0.05),transparent_50%)]","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:304:8"})}),h.jsx("div",{className:"relative z-10 min-h-screen flex items-center justify-center p-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:307:6",children:h.jsxs(Q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,ease:"easeOut"},className:"text-center max-w-md mx-auto","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:308:8",children:[h.jsx(Q.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.1},className:"mb-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:314:10",children:h.jsx("div",{className:"w-20 h-20 bg-danger/10 dark:bg-danger/5 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-sm border border-danger/20","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:320:12",children:h.jsx(Q.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.4,delay:.3,type:"spring",stiffness:200},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:321:14",children:h.jsx(G,{icon:"lucide:alert-circle",className:"w-10 h-10 text-danger","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:Icon:326:16"})})})}),h.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.4},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:div:331:10",children:[h.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2 font-sans","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:h1:336:12",children:"Authentication Failed"}),h.jsx("p",{className:"text-foreground/70 mb-6 font-sans","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:p:339:12",children:o||"An error occurred during authentication"}),h.jsx(j,{color:"primary",variant:"solid",size:"lg",onPress:()=>e.replace("/"),startContent:h.jsx(G,{icon:"lucide:home",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:Icon:348:28"}),className:"bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary/80 transition-all duration-300","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\pages\\AuthCallback.tsx:Button:343:12",children:"Return to Home"})]})]})})]})},ir=o.lazy(()=>C(()=>import("./trade-journal-CCUx7PWA.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then(e=>({default:e.TradeJournal}))),lr=o.lazy(()=>C(()=>import("./trade-analytics-D1XTklIQ.js").then(e=>e.t),__vite__mapDeps([12,1,2,3,4])).then(e=>({default:e.TradeAnalytics}))),cr=o.lazy(()=>C(()=>import("./tax-analytics-a1JVCqVB.js"),__vite__mapDeps([13,2,4,1,3,14,11])).then(e=>({default:e.TaxAnalytics}))),dr=o.lazy(()=>C(()=>import("./monthly-performance-DVXWktNO.js"),__vite__mapDeps([15,2,4,10,1,3,11])).then(e=>({default:e.MonthlyPerformanceTable}))),ur=o.lazy(()=>C(()=>import("./DeepAnalyticsPage-DWxj-vJW.js"),__vite__mapDeps([16,2,4,1,3,14,8,7,9,10,11,17])));function pr(){const e=l();m();const{user:t,signOut:r}=he(),[a,s]=o.useState(!1),[i,p]=o.useState(!1),[f,g]=o.useState(""),[y,_]=o.useState(!0),[x,w]=o.useState(!1),[v,b]=o.useState(!1),[k,D]=o.useState(!1),[S,M]=o.useState(!1),N=n.useRef(null),[U,z]=n.useState(!1),P=()=>{var e,r;return(null==(e=null==t?void 0:t.user_metadata)?void 0:e.full_name)||(null==(r=null==t?void 0:t.email)?void 0:r.split("@")[0])||"User"};n.useEffect(()=>{t&&(async()=>{if(!S){const e="true"===localStorage.getItem(`migration_completed_${null==t?void 0:t.id}`),r="true"===localStorage.getItem(`migration_never_show_${null==t?void 0:t.id}`);e||r||await nr.hasDataToMigrate()&&b(!0),M(!0)}})()},[t,S]);const A=n.useCallback(async()=>{try{return await dt.getUserPreferences()}catch(e){return null}},[]),I=n.useCallback(async e=>{try{const t={...await A()||{},...e};await dt.saveUserPreferences(t)}catch(t){}},[A]);o.useEffect(()=>{t&&(async()=>{try{const e=await A();e?(s(!!e.is_mobile_menu_open),p(!!e.is_profile_open),g(e.user_name||P()),w(!!e.is_full_width_enabled)):g(P())}catch(e){g(P())}finally{_(!1)}})()},[A,t]),o.useEffect(()=>{y||I({is_mobile_menu_open:a})},[a,y,I]),o.useEffect(()=>{y||I({is_profile_open:i})},[i,y,I]),o.useEffect(()=>{y||I({user_name:f})},[f,y,I]),o.useEffect(()=>{y||I({is_full_width_enabled:x})},[x,y,I]);const T=()=>{var e;document.fullscreenElement?document.exitFullscreen():null==(e=N.current)||e.requestFullscreen()};n.useEffect(()=>{const e=()=>{z(document.fullscreenElement===N.current)};return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)},[]),o.useEffect(()=>{const e=setTimeout(()=>{C(()=>import("./trade-analytics-D1XTklIQ.js").then(e=>e.t),__vite__mapDeps([12,1,2,3,4])),C(()=>import("./tax-analytics-a1JVCqVB.js"),__vite__mapDeps([13,2,4,1,3,14,11])),C(()=>import("./monthly-performance-DVXWktNO.js"),__vite__mapDeps([15,2,4,10,1,3,11]))},2e3);return()=>clearTimeout(e)},[]);const E=n.useMemo(()=>[{path:"/",name:"Journal",icon:"lucide:book-open"},{path:"/analytics",name:"Analytics",icon:"lucide:bar-chart-2"},{path:"/tax-analytics",name:"Tax Analytics",icon:"lucide:calculator"},{path:"/monthly-performance",name:"Monthly Performance",icon:"lucide:calendar-check"},{path:"/deep-analytics",name:"Deep Analytics",icon:"lucide:pie-chart"}],[]);return h.jsx(ne,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:TruePortfolioProvider:199:4",children:h.jsx(we,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:AccountingMethodProvider:200:6",children:h.jsx(De,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:GlobalFilterProvider:201:8",children:h.jsxs("div",{className:"min-h-screen bg-background font-sans antialiased","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:div:202:10",children:[h.jsxs("header",{className:"sticky top-0 z-40 w-full border-b border-gray-200 dark:border-gray-700 bg-background/80 backdrop-blur-xl backdrop-saturate-150","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:header:204:10",children:[h.jsx("nav",{className:"px-4 sm:px-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:nav:205:12",children:h.jsxs("div",{className:"flex h-16 items-center justify-between","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:div:206:14",children:[h.jsxs("div",{className:"flex items-center gap-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:div:208:16",children:[h.jsxs(c,{to:"/",className:"flex items-center gap-2 font-semibold tracking-tight text-foreground hover:opacity-90 transition-opacity","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Link:209:18",children:[h.jsxs("svg",{viewBox:"0 0 24 24",className:"h-5 w-5 text-foreground",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:svg:213:20",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"1.5",fill:"none","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:circle:220:22"}),h.jsx("path",{d:"M12 6L16 10L12 18L8 10L12 6Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.5",strokeLinejoin:"round","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:path:229:22"}),h.jsx("path",{d:"M8 10L12 14L16 10",stroke:"currentColor",strokeWidth:"0.5",fill:"none",opacity:"0.7","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:path:237:22"})]}),h.jsx(Mt,{className:"text-foreground","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:AnimatedBrandName:245:20"})]}),h.jsx(j,{isIconOnly:!0,variant:"light",size:"sm",onPress:()=>s(!a),className:"sm:hidden","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Button:247:18",children:h.jsx(G,{icon:a?"lucide:x":"lucide:menu",className:"h-5 w-5","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Icon:254:20"})})]}),h.jsx("div",{className:"hidden sm:flex sm:items-center sm:gap-8","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:div:259:16",children:E.map(t=>{const r=e.pathname===t.path;return h.jsxs(c,{to:t.path,className:"flex items-center gap-2.5 px-3 py-2 text-sm font-medium transition-colors rounded-lg\n                          "+(r?"text-primary-600 dark:text-primary-400 bg-primary-100 dark:bg-primary-900/30 backdrop-blur-md shadow-md":"text-gray-700 dark:text-gray-300 hover:text-foreground hover:bg-gray-100 dark:hover:bg-gray-800/50 backdrop-blur-sm transition-all duration-300"),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Link:263:22",children:[h.jsx(G,{icon:t.icon,className:"h-4 w-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Icon:272:24"}),t.name]},t.path)})}),h.jsxs("div",{className:"flex items-center gap-3","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:div:280:16",children:[h.jsx(X,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:ThemeSwitcher:281:18"}),t?h.jsxs(h.Fragment,{children:[h.jsx(j,{variant:"flat",size:"sm",onPress:()=>p(!0),className:"hidden sm:flex items-center gap-1 px-3 py-1.5 rounded-full border border-white/20 bg-white/10 backdrop-blur-md hover:bg-white/20 transition-all duration-300 min-h-0 min-w-0 shadow-sm",startContent:h.jsx(G,{icon:"lucide:user",className:"h-4 w-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Icon:289:38"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Button:284:22",children:h.jsx("span",{className:"font-medium text-sm leading-none","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:span:291:24",children:f})}),h.jsx(j,{isIconOnly:!0,variant:"light",size:"sm",onPress:r,className:"hidden sm:flex hover:bg-red-100 dark:hover:bg-red-900/20 transition-all duration-300","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Button:293:22",children:h.jsx(G,{icon:"lucide:log-out",className:"h-4 w-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Icon:300:24"})})]}):h.jsx(j,{variant:"flat",size:"sm",onPress:()=>D(!0),className:"hidden sm:flex items-center gap-1 px-3 py-1.5 rounded-full border border-white/20 bg-white/10 backdrop-blur-md hover:bg-white/20 transition-all duration-300 min-h-0 min-w-0 shadow-sm",startContent:h.jsx(G,{icon:"lucide:log-in",className:"h-4 w-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Icon:309:36"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Button:304:20",children:h.jsx("span",{className:"font-medium text-sm leading-none","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:span:311:22",children:"Sign In"})})]})]})}),h.jsx($,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:AnimatePresence:319:12",children:a&&h.jsx(Q.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"sm:hidden border-t border-divider overflow-hidden","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:div:321:16",children:h.jsxs("div",{className:"space-y-1 px-4 py-3 bg-background/30 backdrop-blur-xl","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:div:328:18",children:[E.map(t=>{const r=e.pathname===t.path;return h.jsxs(c,{to:t.path,className:"flex items-center gap-2.5 px-3 py-2 text-sm font-medium transition-colors rounded-lg\n                          "+(r?"text-primary-600 dark:text-primary-400 bg-primary-100 dark:bg-primary-900/30 backdrop-blur-md shadow-md":"text-gray-700 dark:text-gray-300 hover:text-foreground hover:bg-gray-100 dark:hover:bg-gray-800/50 backdrop-blur-sm transition-all duration-300"),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Link:332:24",children:[h.jsx(G,{icon:t.icon,className:"h-4 w-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Icon:341:26"}),t.name]},t.path)}),t?h.jsxs(h.Fragment,{children:[h.jsx(j,{variant:"light",size:"sm",onPress:()=>{p(!0),s(!1)},className:"w-full flex items-center gap-2.5 px-3 py-2 text-sm font-medium transition-colors rounded-lg text-gray-700 dark:text-gray-300 hover:text-foreground hover:bg-gray-100 dark:hover:bg-gray-800/50 backdrop-blur-sm transition-all duration-300",startContent:h.jsx(G,{icon:"lucide:user",className:"h-4 w-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Icon:357:40"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Button:349:24",children:h.jsx("span",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:span:359:26",children:f||"Profile"})}),h.jsx(j,{isIconOnly:!0,variant:"light",size:"sm",onPress:()=>{r(),s(!1)},className:"flex items-center justify-center text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/20 transition-all duration-300","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Button:362:24",children:h.jsx(G,{icon:"lucide:log-out",className:"h-4 w-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Icon:372:26"})})]}):h.jsx(j,{variant:"light",size:"sm",onPress:()=>{D(!0),s(!1)},className:"w-full flex items-center gap-2.5 px-3 py-2 text-sm font-medium transition-colors rounded-lg text-gray-700 dark:text-gray-300 hover:text-foreground hover:bg-gray-100 dark:hover:bg-gray-800/50 backdrop-blur-sm transition-all duration-300",startContent:h.jsx(G,{icon:"lucide:log-in",className:"h-4 w-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Icon:384:38"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Button:376:22",children:h.jsx("span",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:span:386:24",children:"Sign In"})})]})})})]}),h.jsx(St,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:GlobalFilterBar:396:10"}),h.jsx("main",{ref:N,className:"flex-1 overflow-auto p-4 sm:p-6 lg:p-8","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:main:399:10",children:h.jsx(Nt,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:ErrorBoundary:400:12",children:h.jsx("div",{className:x?"py-6":"max-w-7xl mx-auto py-6","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:div:401:14",children:h.jsx(n.Suspense,{fallback:h.jsx(Ot,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Loader:402:36"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Suspense:402:16",children:h.jsxs(d,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Switch:403:18",children:[h.jsx(u,{path:"/auth/callback","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Route:404:20",children:h.jsx(sr,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:AuthCallback:405:22"})}),h.jsx(u,{path:"/analytics","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Route:407:20",children:h.jsx(lr,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:TradeAnalytics:408:22"})}),h.jsx(u,{exact:!0,path:"/",render:e=>h.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:div:411:22",children:h.jsx(ir,{...e,toggleFullscreen:T,isFullscreen:U,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:TradeJournal:417:24"})}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Route:410:20"}),h.jsx(u,{path:"/tax-analytics",component:cr,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Route:420:20"}),h.jsx(u,{path:"/monthly-performance",component:dr,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Route:421:20"}),h.jsx(u,{path:"/deep-analytics",component:ur,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Route:422:20"})]})})})})}),h.jsx(jt,{isOpen:i,onOpenChange:p,userName:f,setUserName:g,isFullWidthEnabled:x,setIsFullWidthEnabled:w,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:ProfileSettingsModal:429:10"}),t&&h.jsx(ye,{userName:f,setUserName:g,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:TruePortfolioSetupManager:440:12"}),t&&h.jsx(or,{isOpen:v,onClose:()=>{b(!1)},onMigrationComplete:()=>{(null==t?void 0:t.id)&&localStorage.setItem(`migration_completed_${t.id}`,"true"),b(!1),window.location.reload()},onNeverShowAgain:()=>{(null==t?void 0:t.id)&&localStorage.setItem(`migration_never_show_${t.id}`,"true"),b(!1)},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:MigrationModal:448:12"}),h.jsx(Et,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:Analytics:474:10"}),k&&h.jsx(Bt,{isOpen:k,onClose:()=>D(!1),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:AuthModal:479:12"})]})})})})}function mr(){return h.jsx(me,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:AuthProvider:494:4",children:h.jsx(Ft,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:AuthGuard:495:6",children:h.jsx(pr,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\App.tsx:AppContent:496:8"})})})}H.createRoot(document.getElementById("root")).render(h.jsx(o.StrictMode,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\main.tsx:StrictMode:9:2",children:h.jsx(p,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\main.tsx:BrowserRouter:10:4",children:h.jsxs(K,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\main.tsx:HeroUIProvider:11:6",children:[h.jsx(Y,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\main.tsx:ToastProvider:12:8"}),h.jsx(mr,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\main.tsx:App:13:8"})]})})}));export{He as A,Xe as B,Ze as C,ar as D,et as E,nt as F,at as G,rt as H,tt as I,ce as J,Ne as K,Ot as L,Je as M,ut as N,dt as S,be as a,Ie as b,Ue as c,Te as d,Ee as e,Oe as f,Be as g,$e as h,qe as i,Fe as j,Ae as k,Pe as l,ze as m,ve as n,Le as o,Qe as p,We as q,ee as r,Re as s,re as t,yt as u,Se as v,te as w,Ge as x,Z as y,Ve as z};
//# sourceMappingURL=index-CCg2rRgv.js.map
