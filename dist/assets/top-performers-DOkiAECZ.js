import{R as e}from"./react-vendor-EfHycc-t.js";import{I as t}from"./icons-BXW-tQdz.js";import{n as a,v as s,K as r,M as o}from"./index-CCg2rRgv.js";import{m as n}from"./trade-analytics-D1XTklIQ.js";import{u as c,a as d}from"./use-accounting-calculations-2iOnH437.js";import{j as i,A as p,B as l,f as m,C as x,D as f}from"./ui-framework-nn7D7dv2.js";import{motion as _}from"./animations-DTB6hMKs.js";import"./database-Ch4ty5VL.js";const h=({label:e,value:t,stock:a,date:s,isPercentage:r,isPositive:o,isNegative:c,index:d=0})=>i.jsx(_.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*d},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:div:57:4",children:i.jsxs(_.div,{className:"relative flex flex-col gap-2 p-3 bg-content2 dark:bg-gray-900 border border-foreground-200/10 dark:border-gray-800 rounded-lg",variants:n,whileHover:{x:4},transition:{type:"spring",stiffness:400,damping:10},"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:div:62:6",children:[i.jsxs("div",{className:"flex items-center justify-between","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:div:68:8",children:[i.jsx("div",{className:"flex items-center gap-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:div:69:10",children:i.jsx("span",{className:"text-sm font-medium text-foreground-700 dark:text-gray-300","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:span:70:12",children:e})}),i.jsx(_.div,{className:"font-semibold text-sm "+(o?"text-success-600 dark:text-success-400":c?"text-danger-600 dark:text-danger-400":"text-foreground-800 dark:text-white"),layout:!0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:div:74:10",children:r?`${t}%`:t})]}),(a||s)&&i.jsxs("div",{className:"flex items-center justify-between text-xs","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:div:87:10",children:[a&&i.jsx("span",{className:"text-foreground-600 dark:text-gray-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:span:89:14",children:a}),s&&i.jsx("span",{className:"text-foreground-500 dark:text-gray-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:span:94:14",children:s})]})]})}),u=({trades:n})=>{const{accountingMethod:_}=a(),u="cash"===_,{filter:j}=s(),k=e.useMemo(()=>"all"===j.type?n:n.filter(e=>r(e,j,u)),[n,j,u]),{tradesWithAccountingPL:y}=c(k),{displayName:g}=d(),[w,v]=e.useState("stockMove"),D=e.useCallback(e=>"pfImpact"!==w?0:u&&"all"===j.type?e._expandedTrades&&e._expandedTrades.length>0?e._expandedTrades.reduce((e,t)=>e+(t._cashPfImpact??0),0):e.cummPf??e._cashPfImpact??0:u?e._cashPfImpact??0:e._accrualPfImpact??e.pfImpact??0,[w,u,j.type]),{top:I,bottom:P}=e.useMemo(()=>{if(!y||!y.length)return{top:null,bottom:null};let e=y;if(u){const t=new Set;e=y.filter(e=>{const a=e.id.split("_exit_")[0];return!t.has(a)&&(t.add(a),!0)})}const t=[...e].sort((e,t)=>{let a,s;if("rewardRisk"===w)a=o(e),s=o(t);else if("plRs"===w)a=e.accountingPL,s=t.accountingPL;else if("pfImpact"===w)if(u&&"all"===j.type){const r=e=>e._expandedTrades&&e._expandedTrades.length>0?e._expandedTrades.reduce((e,t)=>e+(t._cashPfImpact??0),0):e.cummPf??e._cashPfImpact??0;a=r(e),s=r(t)}else u?(a=e._cashPfImpact??0,s=t._cashPfImpact??0):(a=e._accrualPfImpact??e.pfImpact??0,s=t._accrualPfImpact??t.pfImpact??0);else a=e[w]||0,s=t[w]||0;return s-a});return{top:t[0],bottom:t[t.length-1]}},[y,w]),C=(e,t)=>{if("plRs"===w){const a=(null==t?void 0:t.accountingPL)??e;return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:!0}).format(a)}if("rewardRisk"===w&&t){const e=o(t);return`${e%1==0?e.toFixed(0):e.toFixed(2)}R`}if("pfImpact"===w&&t){let e=0;e=u&&"all"===j.type?t._expandedTrades&&t._expandedTrades.length>0?t._expandedTrades.reduce((e,t)=>e+(t._cashPfImpact??0),0):t.cummPf??t._cashPfImpact??0:u?t._cashPfImpact??0:t._accrualPfImpact??t.pfImpact??0;return e.toFixed(2).replace(/\.?0+$/,"")}return e.toFixed(2).replace(/\.?0+$/,"")},z=()=>{switch(w){case"stockMove":return"Move";case"pfImpact":return"pf Impact";case"rewardRisk":return"R:R";case"plRs":return"P/L";default:return""}};if(!n||0===n.length)return i.jsx("div",{className:"flex items-center justify-center p-4 text-default-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:div:278:6",children:"No data available"});if(!I||!P)return i.jsx("div",{className:"flex items-center justify-center p-4 text-default-500","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:div:286:6",children:"No trades found for the selected period"});const N=I.id===P.id||u&&I.id.split("_exit_")[0]===P.id.split("_exit_")[0];return i.jsxs("div",{className:"space-y-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:div:297:4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-default-600","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:div:299:6",children:[i.jsx(t,{icon:"lucide:trophy",className:"w-4 h-4","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:Icon:300:8"}),i.jsxs("span",{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:span:301:8",children:["Top performers using ",g," Accounting"]})]}),i.jsx("div",{className:"flex justify-end","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:div:304:6",children:i.jsxs(p,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:Dropdown:305:8",children:[i.jsx(l,{"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:DropdownTrigger:306:10",children:i.jsx(m,{variant:"flat",size:"sm",className:"bg-content2 dark:bg-gray-900 text-foreground dark:text-white min-w-[120px] h-9",endContent:i.jsx(t,{icon:"lucide:chevron-down",className:"text-sm dark:text-gray-400","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:Icon:311:26"}),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:Button:307:12",children:z()})}),i.jsxs(x,{"aria-label":"Metric selection",className:"dark:bg-gray-900",selectedKeys:[w],selectionMode:"single",onSelectionChange:e=>v(Array.from(e)[0]),"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:DropdownMenu:316:10",children:[i.jsx(f,{textValue:"Move %",className:"dark:text-white dark:hover:bg-gray-800","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:DropdownItem:323:12",children:"Move %"},"stockMove"),i.jsx(f,{textValue:"Portfolio Impact",className:"dark:text-white dark:hover:bg-gray-800","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:DropdownItem:324:12",children:"Portfolio Impact"},"pfImpact"),i.jsx(f,{textValue:"Risk:Reward",className:"dark:text-white dark:hover:bg-gray-800","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:DropdownItem:325:12",children:"Risk:Reward"},"rewardRisk"),i.jsx(f,{textValue:"P/L (₹)",className:"dark:text-white dark:hover:bg-gray-800","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:DropdownItem:326:12",children:"P/L (₹)"},"plRs")]})]})}),i.jsx("div",{className:"space-y-2","data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:div:331:6",children:N?i.jsx(h,{label:z(),value:C("rewardRisk"===w?o(I):"plRs"===w?I.accountingPL:"pfImpact"===w?D(I):I[w]||0,I),stock:I.name,date:I.date,isPercentage:"plRs"!==w&&"rewardRisk"!==w,index:0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:TopPerformer:334:10"}):i.jsxs(i.Fragment,{children:[i.jsx(h,{label:`Highest ${z()}`,value:C("rewardRisk"===w?o(I):"plRs"===w?I.accountingPL:"pfImpact"===w?D(I):I[w]||0,I),stock:I.name,date:I.date,isPercentage:"plRs"!==w&&"rewardRisk"!==w,isPositive:!0,index:0,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:TopPerformer:351:12"}),i.jsx(h,{label:`Lowest ${z()}`,value:C("rewardRisk"===w?o(P):"plRs"===w?P.accountingPL:"pfImpact"===w?D(P):P[w]||0,P),stock:P.name,date:P.date,isPercentage:"plRs"!==w&&"rewardRisk"!==w,isNegative:!0,index:1,"data-locator":"C:\\Users\\anike_jr5dzh1\\Downloads\\nonapi\\prod_test_0.3-master\\src\\components\\analytics\\top-performers.tsx:TopPerformer:366:12"})]})})]})};export{u as TopPerformers};
//# sourceMappingURL=top-performers-DOkiAECZ.js.map
